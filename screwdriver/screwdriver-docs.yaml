resources:
- name: executor
  endpoint:
    path: /config/local.yaml
    method: GET
    data_selector: executor
    params: {}
- name: scms
  endpoint:
    path: /scms
    method: GET
    data_selector: scms
    params: {}
- name: notifications
  endpoint:
    path: /notifications
    method: GET
    data_selector: notifications
    params: {}
- name: github
  endpoint:
    path: /scms/github
    method: POST
    data_selector: config
- name: gitlab
  endpoint:
    path: /scms/gitlab
    method: POST
    data_selector: config
- name: bitbucket
  endpoint:
    path: /scms/bitbucket
    method: POST
    data_selector: config
- name: local_yaml
  endpoint:
    path: /config/local.yaml
    method: GET
    data_selector: bookends.default.setup
    params: {}
- name: dockerfile
  endpoint:
    path: /Dockerfile
    method: GET
    data_selector: dependencies
    params: {}
- name: kubernetes_deployment
  endpoint:
    path: /kubernetes/deployment
    method: GET
    data_selector: spec.template.spec.containers
    params: {}
- name: jobs
  endpoint:
    path: /user-guide/api
    method: GET
    data_selector: jobs
    params: {}
- name: jobs
  endpoint:
    path: /v4/pipelines/{pipeline_id}/jobs
    method: GET
    data_selector: jobs
    params: {}
- name: builds
  endpoint:
    path: /v4/builds
    method: POST
    data_selector: build
    params: {}
- name: jobs
  endpoint:
    path: /user-guide/api/jobs
    method: GET
    data_selector: records
- name: parameters
  endpoint:
    path: /user-guide/api/parameters
    method: GET
    data_selector: records
- name: jobs
  endpoint:
    path: /jobs
    method: GET
    data_selector: records
    params: {}
- name: integration_stage
  endpoint:
    path: /user-guide/configuration/stages
    method: GET
    data_selector: jobs
    params: {}
- name: scmUrls
  endpoint:
    path: /subscribe
    method: POST
    data_selector: scmUrls
    params: {}
- name: shared_settings
  endpoint:
    path: /user-guide/configuration/settings
    method: GET
    data_selector: settings
    params: {}
- name: job_settings
  endpoint:
    path: /user-guide/configuration/jobconfiguration
    method: GET
    data_selector: settings
    params: {}
- name: sourcePaths
  endpoint:
    path: /user-guide/configuration/sourcePaths
    method: GET
    data_selector: sourcePaths
- name: source_directory
  endpoint:
    path: /user-guide/configuration/sourceDirectory
    method: GET
    data_selector: sourceDirectory
    params: {}
- name: childPipelines
  endpoint:
    path: /user-guide/configuration/externalConfig
    method: GET
    data_selector: scmUrls
    params: {}
- name: cache
  endpoint:
    path: /build/cache
    method: GET
    data_selector: cache
    params: {}
- name: parameters
  endpoint:
    path: /user-guide/configuration/parameters
    method: GET
    data_selector: parameters
    params: {}
- name: scope
  endpoint:
    path: /user-guide/configuration/scope
    method: GET
    data_selector: scope
    params: {}
- name: templates
  endpoint:
    path: /templates
    method: GET
    data_selector: templates
- name: templates
  endpoint:
    path: /templates
    method: GET
    data_selector: records
    params: {}
- name: template
  endpoint:
    path: /template
    method: POST
    data_selector: template_data
- name: pipeline_templates
  endpoint:
    path: /pipeline/templates
    method: GET
- name: commands
  endpoint:
    path: /commands
    method: GET
    data_selector: commands
- name: build
  endpoint:
    path: /build
    method: POST
    data_selector: data
- name: workflow
  endpoint:
    path: /api/v1/workflow
    method: GET
    data_selector: data
    params: {}
- name: API Configuration
  endpoint:
    path: /user-guide/configuration/api
    method: GET
- name: Store Configuration
  endpoint:
    path: /user-guide/configuration/store
    method: GET
- name: Avatar Configuration
  endpoint:
    path: /user-guide/configuration/avatar
    method: GET
- name: Custom Documentation Link
  endpoint:
    path: /user-guide/configuration/custom-documentation-link
    method: GET
- name: Custom Slack Link
  endpoint:
    path: /user-guide/configuration/custom-slack-link
    method: GET
- name: Canary Routing
  endpoint:
    path: /user-guide/configuration/canary-routing
    method: GET
- name: build_clusters
  endpoint:
    path: /buildClusters
    method: POST
    data_selector: buildCluster
    params: {}
- name: users
  endpoint:
    path: /users
    method: GET
    data_selector: users
- name: vhosts
  endpoint:
    path: /vhosts
    method: GET
    data_selector: vhosts
- name: permissions
  endpoint:
    path: /permissions
    method: GET
    data_selector: permissions
- name: queues
  endpoint:
    path: /queues
    method: GET
    data_selector: queues
- name: exchanges
  endpoint:
    path: /exchanges
    method: GET
    data_selector: exchanges
- name: bindings
  endpoint:
    path: /bindings
    method: GET
    data_selector: bindings
- name: queue
  endpoint:
    path: /queue
    method: POST
    data_selector: records
    params:
      REDIS_HOST: 127.0.0.1
      REDIS_PORT: '6379'
      REDIS_PASSWORD: REDIS PASSWORD
      REDIS_TLS_ENABLED: false
      REDIS_DB_NUMBER: 0
      REDIS_QUEUE_PREFIX: ''
- name: health_check
  endpoint:
    path: /last-emitted
    method: GET
    data_selector: status
    params:
      PORT: 80
      HOST: 0.0.0.0
      URI: http://localhost:80
- name: api
  endpoint:
    path: /services/data/v4
    method: GET
- name: ui
  endpoint:
    path: /services/data/v4/ui
    method: GET
- name: store
  endpoint:
    path: /services/data/v4/store
    method: GET
- name: unzip_artifacts
  endpoint:
    path: /builds/{id}/artifacts/unzip
    method: POST
- name: provider_configuration
  endpoint:
    path: /user-guide/configuration/
    method: GET
    data_selector: records
    params: {}
- name: api_metrics
  endpoint:
    path: /v4/metrics
    method: GET
- name: build_metrics
  endpoint:
    path: /metrics
    method: GET
- name: banners
  endpoint:
    path: /api/banners
    method: POST
- name: ui
  endpoint:
    path: /ui
    method: GET
    data_selector: data
    params: {}
- name: api
  endpoint:
    path: /api
    method: GET
    data_selector: data
    params: {}
- name: redisConnection
  endpoint:
    path: /services/data/v1/redisConnection
    method: GET
    data_selector: records
    params: {}
- name: ui
  endpoint:
    path: http://sd.screwdriver.cd:4200
    method: GET
- name: store
  endpoint:
    path: http://sd.screwdriver.cd:9002
    method: GET
- name: queue
  endpoint:
    path: http://YOUR_IP:9003
    method: GET
- name: ui
  endpoint:
    path: http://sd.screwdriver.cd:4200
    method: GET
    data_selector: ui
    params: {}
- name: store
  endpoint:
    path: http://sd.screwdriver.cd:9002
    method: GET
    data_selector: store
    params: {}
- name: jobs
  endpoint:
    path: /user-guide/jobs
    method: GET
    data_selector: records
- name: parameters
  endpoint:
    path: /user-guide/parameters
    method: GET
    data_selector: records
- name: stages
  endpoint:
    path: /user-guide/stages
    method: GET
    data_selector: records
- name: settings
  endpoint:
    path: /user-guide/settings
    method: GET
    data_selector: records
- name: pipeline
  endpoint:
    path: /v4/pipelines
    method: GET
    data_selector: data
notes:
- Needs to be minimum 32 characters
- JWT tokens are signed with private keys.
- Minimum password length for encrypting session data and secrets is 32 characters.
- Default executor (set to k8s-vm)
- Flag to enable Kubernetes VM executor
- Number of CPU cores for micro is 1
- Memory in GB for micro is 1
- Uses OAuth2 for authentication
- Ensure to set up OAuth application for GitHub/GitLab/Bitbucket
- For building our extended Docker image, we will need to create a Dockerfile that
  will have our extra dependencies installed.
- A private key uses for signing jwt tokens. Generate one by running `$ openssl genrsa
  -out jwt.pem 2048`
- The public key used for verifying the signature. Generate one by running `$ openssl
  rsa -in jwt.pem -pubout -out jwt.pub`
- The public key used for verifying the signature when plugin is queue. Generate one
  by running `$ openssl rsa -in jwtqs.pem -pubout -out jwtqs.pub`
- A password used for encrypting session data. **Needs to be minimum 32 characters**
- A password used for encrypting stored secrets. **Needs to be minimum 32 characters**
- Requires setup of OAuth applications for GitHub, GitLab, and Bitbucket.
- The screwdriver.yaml is the only config file you need for using Screwdriver.
- JWT will be valid for 12 hours, after which you must re-authenticate.
- JWTs need to be passed via an Authorization header.
- The API enforces a maximum payload size of 1 MB per request.
- Shared configurations are merged with each job, but may be overridden by more specific
  configuration in a specific job.
- 'Jobs defined with ''requires: ~pr'' are started when a pull request is opened,
  reopened, or modified.'
- Each stage can be equipped with a setup job and a teardown job.
- Webhooks are automatically registered to the repositories at the time of pipeline
  creation.
- Nested environment variables do not work under the environment section.
- Environment variables are evaluated in the order in which they are defined under
  the same environment section.
- 'Environment variables are evaluated in the order in which they were declared: template
  > shared > jobs.'
- Annotations is a freeform key/value store, often used to configure pipeline or build
  execution settings.
- Job-level annotations can be specified under a specific job, or under `shared`.
- If you define the same property in both the `sonar-project.properties` file and
  `$SD_SONAR_OPTS`, `$SD_SONAR_OPTS` will override the properties file.
- By default, coverage is not sent for private pipelines. If you want to send coverage,
  please set `SD_ALLOW_PRIVATE_COVERAGE_SEND` to `true`.
- If you upload code coverage to `$SD_SELF_SONAR_HOST`, the code coverage percentage
  displayed on the UI will be `N/A`.
- Secrets may only be added, modified, or removed by people that are listed as admins
  of the Git repository associated with a given pipeline.
- Pull-request jobs can be created with modified `screwdriver.yaml` files including
  changes to the secrets configuration.
- If you don’t configure the build status, the notification will default to sending
  notifications on FAILURE only.
- This feature is only available for the Github SCM right now.
- sourcePaths will be ignored if you manually start a pipeline or restart a job.
- screwdriver.yaml must still be located at root.
- sourcePaths does not support wildcards or globs.
- The directory path is relative to the root of the repository.
- You must have a screwdriver.yaml under your source directory.
- read-only SCM. Check with your cluster admin for availability
- If your cache is large and the cache bookend runs out of memory, you can set the
  screwdriver.cd/ram annotation to HIGH to provide more memory to the build.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Some objects like Contact may return nulls in deeply nested fields
- sd-local uses an user API token to communicate with Screwdriver API and Store.
- User Interface configuration requires environment variables to be set.
- Uses JWT for authentication
- Screwdriver defaults most configuration but can be overridden using a config/local.yaml
  or environment variables.
- Build cluster scmContext is derived from API token of specific scm.
- Caution when creating buildCluster routing keys and refrain updating routing key.
- Redis tls enabled. Specify `false` if tls is not used.
- You need to see the MultiWorker page for more information.
- You cannot use localhost for the ECOSYSTEM_UI value if the URI value is set to an
  I.P. address.
- Using Chrome will cause login issues. Please use a different browser.
- Each secret must be base64 encoded
- To use Zip Artifacts feature, you need to enable the API settings of UNZIP_ARTIFACTS_ENABLED.
- This integration uses AWS MSK to schedule user builds in the user’s own AWS account.
- Log service and Launcher to Screwdriver api - connection timeout in seconds. Default
  is 20 seconds.
- Log service and Launcher to Screwdriver api - max retry attempts for before giving
  up. Default is 5 retry attempts.
- Log service to Screwdriver Store api - Connection timeout in seconds. Default is
  20 seconds.
- Log service to Screwdriver Store api - max retry attempts before giving up. Default
  is 5 retry attempts.
- Uses OAuth2 with JWT for authentication
- Ensure to configure the necessary OAuth App in Github
- Make sure to configure the OAuth application for GitHub.
- You may need to update your IP address in the configuration.
- Requires configuration of OAuth application in GitHub
- Ensure Redis server is running for queue service
errors:
- '401 Unauthorized: Recheck JWT setup or token expiration'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- '401 Unauthorized: Check if OAuth credentials are correct'
- '404 Not Found: Verify endpoint path'
- '500 Internal Server Error: Check server logs for more information'
- '401 Unauthorized: Check client credentials or token.'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '403 API rate limit exceeded: Please set the GitHub personal access token.'
- 'JWT_ENVIRONMENT: If you want the JWT to not contain environment, don’t set this
  environment variable.'
- 'SECRET_JWT_PRIVATE_KEY: A private key used for signing jwt tokens.'
- 'SECRET_JWT_PUBLIC_KEY: The public key used for verifying the signature.'
- '401 Unauthorized: Check OAuth credentials and permissions'
- '404 Not Found: Verify endpoint paths'
- '500 Internal Server Error: Server issues, try again later'
- 'HTTP code 407: Throttle API calls or reduce frequency'
auth_info:
  mentioned_objects:
  - jwtPrivateKey
  - jwtPublicKey
  - jwtQueueServicePublicKey
  - cookiePassword
  - encryptionPassword
  - OauthClientId
  - OauthClientSecret
  - JWT_ENVIRONMENT
  - SECRET_JWT_PRIVATE_KEY
  - SECRET_JWT_PUBLIC_KEY
  - SECRET_JWT_QUEUE_SVC_PUBLIC_KEY
  - SECRET_COOKIE_PASSWORD
  - SECRET_PASSWORD
  - IS_HTTPS
  - SECRET_WHITELIST
  - SECRET_ADMINS
  - OAuth applications
  - GitHub
  - GitLab
  - Bitbucket
  - OAuth Application
  - JWT
  - oauthClientId
  - oauthClientSecret
client:
  base_url: https://api.screwdriver.cd
  auth:
    type: apikey
source_metadata: null
