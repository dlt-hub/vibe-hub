resources:
- name: EMQX
  endpoint:
    path: /api/v5/nodes
    method: GET
    data_selector: items
- name: EMQX
  endpoint:
    params: {}
- name: EmqxEnterprise
  endpoint:
    path: /reference/v1beta3-reference.html
    method: GET
    data_selector: records
- name: EmqxBroker
  endpoint:
    path: /reference/v1beta4-reference.html
    method: GET
    data_selector: records
- name: emqx_cluster_status
  endpoint:
    path: /emqx_ctl/cluster/status
    method: GET
    data_selector: running_nodes
    params: {}
- name: emqx_service
  endpoint:
    path: /services
    method: GET
    data_selector: services
    params: {}
- name: emqx
  endpoint:
    path: /emqx
    method: GET
    data_selector: status
    params: {}
- name: EMQX
  endpoint:
    path: /v2beta1
    method: GET
    data_selector: license
    params: {}
- name: EmqxEnterprise
  endpoint:
    path: /v1beta4
    method: GET
    data_selector: license
    params: {}
- name: emqx
  endpoint:
    path: /emqx
    method: POST
    data_selector: status
    params: {}
- name: emqx
  endpoint:
    path: /emqx
    method: GET
    data_selector: status
    params: {}
- name: core
  endpoint:
    path: /v2beta1/emqx/core
    method: GET
    data_selector: coreNodes
- name: replicant
  endpoint:
    path: /v2beta1/emqx/replicant
    method: GET
    data_selector: replicantNodes
- name: emqx
  endpoint:
    path: /api/v1/emqx
    method: GET
    data_selector: data
    params: {}
- name: emqx-dashboard
  endpoint:
    path: /svc/emqx-dashboard
    method: GET
    data_selector: status.loadBalancer.ingress[0].ip
- name: emqx-listeners
  endpoint:
    path: /svc/emqx-listeners
    method: GET
    data_selector: status.loadBalancer.ingress[0].ip
- name: emqx
  endpoint:
    path: /api/v1/emqx
    method: GET
    data_selector: status
- name: emqx-enterprise
  endpoint:
    path: /api/v1/emqx-enterprise
    method: GET
    data_selector: status
- name: elasticsearch_logging
  endpoint:
    path: /elasticsearch-logging
    method: POST
    data_selector: status
    params: {}
- name: elasticsearch
  endpoint:
    path: /
    method: GET
- name: kibana
  endpoint:
    path: /
    method: GET
- name: emqx
  endpoint:
    path: /emqx
    method: GET
    data_selector: status
    params: {}
- name: emqx-dashboard
  endpoint:
    path: /api/v5/prometheus/stats
    method: GET
    data_selector: metrics
    params: {}
- name: emqx_indicators
  endpoint:
    path: /api/v4/emqx_prometheus
    method: GET
    data_selector: metrics
    params: {}
- name: rebalance
  endpoint:
    path: /v2beta1/rebalances
    method: POST
    data_selector: ''
    params: {}
- name: EMQX Cluster
  endpoint:
    path: /emqx
    method: POST
    data_selector: spec
    params: {}
- name: EmqxBroker
  endpoint:
    path: /api/v1/emqxbrokers
    method: GET
    data_selector: data
    params: {}
- name: EmqxEnterprise
  endpoint:
    path: /api/v1/emqxenterprises
    method: GET
    data_selector: data
    params: {}
- name: EmqxPlugin
  endpoint:
    path: /api/v1/emqxplugins
    method: GET
    data_selector: data
    params: {}
- name: EmqxBroker
  endpoint:
    path: /emqxbrokers
    method: GET
    data_selector: records
- name: EmqxEnterprise
  endpoint:
    path: /emqxenterprises
    method: GET
    data_selector: records
- name: EmqxPlugin
  endpoint:
    path: /emqxplugins
    method: GET
    data_selector: records
- name: EMQX
  endpoint:
    path: /emqx
    method: GET
- name: EmqxEnterprise
  endpoint:
    path: /apps.emqx.io/v1beta3
    method: GET
    data_selector: items
- name: EmqxBroker
  endpoint:
    path: /apps.emqx.io/v1beta4
    method: GET
    data_selector: items
- name: EmqxEnterprise
  endpoint:
    path: /reference/v1beta3-reference.html
    method: GET
- name: EmqxBroker
  endpoint:
    path: /reference/v2alpha1-reference.html
    method: GET
- name: EmqxEnterprise
  endpoint:
    path: /v1beta3
    method: GET
    data_selector: resources
    params: {}
- name: EmqxBroker
  endpoint:
    path: /v1beta3
    method: GET
    data_selector: resources
    params: {}
- name: EmqxEnterprise
  endpoint:
    path: /apps.emqx.io/v1beta3
    method: GET
- name: EmqxBroker
  endpoint:
    path: /apps.emqx.io/v2alpha1
    method: GET
- name: EmqxEnterprise
  endpoint:
    path: /apps.emqx.io/v1beta3
    method: GET
    data_selector: records
    params: {}
- name: EmqxBroker
  endpoint:
    path: /apps.emqx.io/v1beta4
    method: GET
    data_selector: records
    params: {}
- name: emqx
  endpoint:
    path: /zh/emqx-operator/2.2.27/reference/overview.html
    method: GET
    data_selector: records
- name: loadBalancer
  endpoint:
    path: /container-service-for-kubernetes/latest/configurenlbthroughannotation
    method: GET
    data_selector: ports
    params: {}
- name: emqx_cluster
  endpoint:
    path: /services/data/v2beta1/emqx
    method: POST
    data_selector: status
    params: {}
- name: emqx
  endpoint:
    path: /services/data/v2beta1/emqx
    method: POST
    data_selector: status
    params: {}
- name: emqx
  endpoint:
    path: /zh/emqx-operator/2.2.27/tasks/configure-emqx-service.html
    method: GET
    data_selector: metadata
    params: {}
- name: emqx
  endpoint:
    path: /services/data/vXX.X/sobjects/EMQX
    method: GET
    data_selector: records
    params: {}
- name: emqx
  endpoint:
    path: /services/data/vXX.X/sobjects/Emqx
    method: POST
    data_selector: status
    params: {}
- name: emqx_core
  endpoint:
    path: /emqx
    method: GET
    data_selector: status.coreNodes
    params: {}
- name: emqx_replicant
  endpoint:
    path: /emqx
    method: GET
    data_selector: status.replicantNodes
    params: {}
- name: emqx
  endpoint:
    path: /services/data/v2beta1
    method: POST
    data_selector: spec
    params: {}
- name: emqx_enterprise
  endpoint:
    path: /services/data/v1beta4
    method: POST
    data_selector: spec
    params: {}
- name: emqx
  endpoint:
    path: /services/data/v2beta1
    method: POST
    data_selector: spec
    params: {}
- name: emqx-ee
  endpoint:
    path: /services/data/v1beta4
    method: POST
    data_selector: spec
    params: {}
- name: emqx
  endpoint:
    path: /emqx
    method: GET
    data_selector: status
    params: {}
- name: emqxenterprise
  endpoint:
    path: /emqxenterprise
    method: GET
    data_selector: status
    params: {}
- name: elasticsearch-logging
  endpoint:
    path: /services/data/v1.0/sobjects/elasticsearch-logging
    method: GET
    data_selector: records
    params: {}
- name: filebeat
  endpoint:
    path: /services/data/v1.0/sobjects/filebeat
    method: GET
    data_selector: records
    params: {}
- name: logstash
  endpoint:
    path: /logs
    method: POST
    data_selector: logs
    params: {}
- name: emqx
  endpoint:
    path: /api/v5/prometheus/stats
    method: GET
    data_selector: metrics
- name: emqx-exporter
  endpoint:
    path: /metrics
    method: GET
    data_selector: metrics
- name: metrics
  endpoint:
    path: /api/v4/emqx_prometheus
- name: v1beta3
  endpoint:
    path: /apps.emqx.io/v1beta3
    method: GET
- name: EmqxBroker
  endpoint:
    path: /emqxbrokers
    method: GET
    data_selector: items
- name: EmqxEnterprise
  endpoint:
    path: /emqxenterprises
    method: GET
    data_selector: items
- name: EmqxPlugin
  endpoint:
    path: /emqxplugins
    method: GET
    data_selector: items
- name: EmqxBroker
  endpoint:
    path: /emqxbrokers
    method: GET
    data_selector: items
- name: EmqxEnterprise
  endpoint:
    path: /emqxenterprises
    method: GET
    data_selector: items
- name: EmqxPlugin
  endpoint:
    path: /emqxplugins
    method: GET
    data_selector: items
- name: EmqxPlugin
  endpoint:
    path: /
    method: GET
    data_selector: ''
    params: {}
- name: Rebalance
  endpoint:
    path: /
    method: GET
    data_selector: ''
    params: {}
- name: EMQX
  endpoint:
    path: /emqx
    method: GET
    data_selector: items
    params: {}
- name: EMQXList
  endpoint:
    path: /emqxlist
    method: GET
    data_selector: items
    params: {}
- name: rebalance
  endpoint:
    path: /rebalances
    method: GET
    data_selector: items
- name: emqx_dashboard
  endpoint:
    path: /services/emqx-ee-dashboard
    method: GET
- name: emqx_listeners
  endpoint:
    path: /services/emqx-ee-listeners
    method: GET
- name: emqx-ee
  endpoint:
    path: /apps.emqx.io/v2beta1
    method: POST
    data_selector: spec
    params: {}
- name: emqx
  endpoint:
    path: /apps.emqx.io/v2beta1
    method: POST
    data_selector: spec
    params: {}
- name: emqx-ee
  endpoint:
    path: /apps.emqx.io/v1beta4
    method: POST
    data_selector: spec
    params: {}
- name: emqx
  endpoint:
    path: /apps.emqx.io/v1beta4
    method: POST
    data_selector: spec
    params: {}
- name: aws_load_balancer_ssl_cert
  endpoint:
    path: service.beta.kubernetes.io/aws-load-balancer-ssl-cert
    method: GET
    data_selector: arn:aws:acm:us-west-2:xxxxx:certificate/xxxxxxx
- name: aws_load_balancer_backend_protocol
  endpoint:
    path: service.beta.kubernetes.io/aws-load-balancer-backend-protocol
    method: GET
    data_selector: tcp
- name: aws_load_balancer_ssl_ports
  endpoint:
    path: service.beta.kubernetes.io/aws-load-balancer-ssl-ports
    method: GET
    data_selector: '"1883"'
- name: emqx
  endpoint:
    path: /v2beta1/emqx
    method: GET
    data_selector: status
    params: {}
- name: emqx
  endpoint:
    path: /emqx
    method: GET
- name: emqx-tls
  endpoint:
    path: /tasks/configure-emqx-tls
    method: POST
    data_selector: data
    params: {}
- name: core
  endpoint:
    path: /status/coreNodes
    method: GET
    data_selector: coreNodes
- name: replicant
  endpoint:
    path: /status/replicantNodes
    method: GET
    data_selector: replicantNodes
- name: emqx
  endpoint:
    path: /emqx
    method: GET
    data_selector: spec
    params: {}
- name: emqx-dashboard
  endpoint:
    path: /services/data/vXX.X/sobjects/EmqxDashboard
    method: GET
    data_selector: status
    params: {}
- name: emqx-listeners
  endpoint:
    path: /services/data/vXX.X/sobjects/EmqxListeners
    method: GET
    data_selector: status
    params: {}
- name: elasticsearch-logging
  endpoint:
    path: /services/data/v1/elasticsearch-logging
    method: POST
    data_selector: data
    params: {}
- name: elasticsearch
  endpoint:
    path: /services/data/v1/elasticsearch
    method: GET
    data_selector: logs
    params: {}
- name: kibana
  endpoint:
    path: /services/data/v1/kibana
    method: GET
    data_selector: logs
    params: {}
- name: logstash_conf
  endpoint:
    path: /etc/logstash_c/logstash.conf
    method: GET
    data_selector: data
    params: {}
- name: logstash_yml
  endpoint:
    path: /usr/share/logstash/config/logstash.yml
    method: GET
    data_selector: data
    params: {}
- name: emqx
  endpoint:
    path: /emqx
    method: POST
    data_selector: spec.config.data
    params: {}
- name: emqx
  endpoint:
    path: /api/v5/prometheus/stats
    method: GET
- name: emqx-exporter
  endpoint:
    path: /metrics
    method: GET
- name: emqx_prometheus
  endpoint:
    path: /api/v4/emqx_prometheus
    method: GET
- name: Rebalance
  endpoint:
    path: /v2beta1/rebalance
    method: POST
    data_selector: ''
    params: {}
- name: EmqxBroker
  endpoint:
    path: /emqxbrokers
    method: GET
    data_selector: ''
    params: {}
- name: EmqxEnterprise
  endpoint:
    path: /emqxEnterprises
    method: GET
    data_selector: ''
    params: {}
- name: EmqxPlugin
  endpoint:
    path: /emqxplugins
    method: GET
    data_selector: ''
    params: {}
- name: emqx
  endpoint:
    path: /v2alpha1/emqx
    method: GET
    data_selector: items
- name: emqx_list
  endpoint:
    path: /v2alpha1/emqxlist
    method: GET
    data_selector: items
notes:
- Refer to Kubernetes API documentation for fields of metadata.
- The EMQX Operator requires a Kubernetes cluster of version >=1.24.
- EMQX cluster can only use one protocol in LoadBalancer type of Service, for example
  TCP or UDP.
- EMQX Operator requires a Kubernetes cluster of version >=1.24.
- 'Supported, except MixedProtocolLBService: EMQX cluster can only use one protocol
  in LoadBalancer type of Service, for example TCP or UDP.'
- The EMQX Operator provides Kubernetes native deployment and management of EMQX.
- The EMQX Operator requires a Kubernetes cluster of version '>=1.24'.
- EMQX Operator 要求 Kubernetes 集群的版本号 >=1.24
- 支持，但是不包含 MixedProtocolLBService
- but direct access to K8S service port does not require TLS authentication
- To create an AKS cluster on Azure, you first need to activate the AKS service in
  your Azure subscription.
- You can check the status of the EMQX cluster using the kubectl get command. Please
  ensure that the STATUS is Running which may take some time.
- License key must be provided by the user during configuration.
- License updates must be done through the EMQX Dashboard.
- Customize TLS certificates via the extraVolumes and extraVolumeMounts fields.
- The main configuration file of EMQX is /etc/emqx.conf.
- Starting from version 5.0, EMQX adopts HOCON as the configuration file format.
- Just EMQX Enterprise Edition supports Core + Replicant cluster.
- There must be at least one Core node in the EMQX cluster.
- The 'storageClassName' field indicates the name of the StorageClass. You can use
  the command 'kubectl get storageclass' to get the StorageClass that already exists
  in the Kubernetes cluster, or you can create a StorageClass according to your own
  needs.
- By default, EMQX will open an MQTT TCP listener tcp-default corresponding to port
  1883 and Dashboard listener dashboard-listeners-http-bind corresponding to port
  18083.
- EMQX Operator will automatically inject the default listener information into the
  Service when creating the Service, but when there is a conflict between the Service
  configured by the user and the listener configured by EMQX (name or port fields
  are repeated), EMQX Operator will use the user's configuration prevail.
- Only supports apps.emqx.io/v1beta4 EmqxEnterprise and apps.emqx.io/v2beta1 EMQX.
- Uses Kubernetes for deployment
- Elasticsearch requires vm.max_map_count to be at least 262144
- Wait for Logstash to be ready, you can view the status of the Logstash pod through
  the kubectl get command, make sure STATUS is Running
- Only allowed to configure .spec.config.data when creating an EMQX cluster, does
  not support updating.
- EMQX supports exposing indicators through the HTTP interface.
- The cluster load rebalancing requirements EMQX Enterprise must be greater than or
  equal to 4.4.12
- Both emqx-operator and emqx are installed in the same namespace
- Cert manager may be available cluster-wide or in the same namespace as emqx-operator
- Defaults to 2 replicas for the EMQX instance.
- The image pull policy defaults to Always if :latest tag is specified, or IfNotPresent
  otherwise.
- EMQX Operator 要求 Kubernetes 集群的版本号 >=1.24。
- 支持，但是不推荐，因为缺乏足够的测试
- EMQX Operator requires Kubernetes cluster version >=1.24.
- For Kubernetes versions 1.22 (inclusive) to 1.23, MixedProtocolLBService is not
  included.
- EMQX Operator requires Kubernetes cluster version >=1.24
- EMQX Operator requires Kubernetes version >=1.24
- EMQX Operator requires Kubernetes version >=1.24.
- EMQX Operator要求Kubernetes集群的版本号 >=1.24。
- EMQX 自定义资源不支持在运行时更新这个字段
- NLB 支持的地域及可用区可以登录 NLB 控制台查看，至少需要两个可用区。多个可用区间用逗号分隔，如 cn-hangzhou-k:vsw-i123456,cn-hangzhou-j:vsw-j654321。
- 如集群为中国内地 Region 时，组合后的证书 ID 为 ${your-cert-id}-cn-hangzhou。如集群为的其他 Region 时，组合后的证书
  ID 为 ${your-cert-id}-ap-southeast-1。
- Kubernetes 集群节点必须可以访问外网
- Kubernetes 集群节点的操作系统建议选择 Ubuntu
- 使用默认的用户名和密码 admin/public 登录 EMQX 控制台
- 腾讯云 TKE 要求云硬盘大小必须为 10 的倍数，默认提供的 cbs（高性能云盘） 要求硬盘最小为 10GB
- 通过浏览器访问 http://192.168.1.200:18083 使用默认的用户名和密码 admin/public 登录 EMQX 控制台
- Use NLB for TLS termination in Amazon EKS
- Requires AWS Certificate Manager for certificate management
- Uses LoadBalancer for service type
- Uses TLS certificates stored in Kubernetes secrets.
- EMQX集群中至少要有一个Core节点，建议至少有三个Core节点以确保高可用性。
- 在实际业务中，Replicant节点会接受全部的客户端请求，所以Replicant节点需要的资源会更高一些。
- Users can configure persistence through the .spec.coreTemplate.spec.volumeClaimTemplates
  field for EMQX 5.x and through .spec.persistent field for EMQX 4.x.
- EMQX 默认会开启一个 MQTT TCP 监听器 tcp-default 对应的端口为1883 以及 Dashboard 监听器 dashboard-listeners-http-bind
  对应的端口为18083。
- EMQX Operator 在创建 Service 时会将缺省的监听器信息自动注入到 Service 里面，但是当用户配置的 Service 和 EMQX 配置的监听器有冲突时（name
  或者 port 字段重复），EMQX Operator 会以用户的配置为准。
- 该功能仅支持 apps.emqx.io/v1beta4 EmqxEnterprise 及 apps.emqx.io/v2beta1 EMQX
- 在进行滚动更新时，对应的 Service 会同时选中新的和旧的 Pod，这可能导致 MQTT 客户端连接到错误的 Pod 上
- Uses ELK stack for log collection
- Ensure storage class name is specified in YAML
- Wait for Filebeat to be ready by running `kubectl get pod -n kube-logging -l 'k8s-app=filebeat'`
- Ensure Logstash is ready by running `kubectl get pod -n kube-logging -l 'k8s-app=logstash'`
- EMQX supports exposing metrics via HTTP interface.
- Supports various EMQX configurations as per API documentation.
- cert-manager version 1.1.6 or higher is required
- Ensure the EMQX cluster status is 'Running' after deployment
- Specifies the ARN of one or more certificates managed by the AWS Certificate Manager.
- Specifies whether to use TLS for the backend traffic between the load balancer and
  the kubernetes pods.
- Specifies a frontend port with a TLS listener. This means that accessing port 1883
  through AWS NLB service requires TLS authentication, but direct access to K8S service
  port does not require TLS authentication.
- If you want to request CPU and memory resources, you need to ensure that the CPU
  is greater than or equal to 250m and the memory is greater than or equal to 512M.
- License key is required for EMQX Enterprise.
- License content should be configured during EMQX cluster creation.
- Uses secrets to manage TLS certificates
- The external IP can be accessed through a browser at port 18083
- For the purpose of high availability, EMQX Operator recommends that the EMQX cluster
  have at least three Core nodes.
- The `storageClassName` field indicates the name of the StorageClass.
- EMQX will open an MQTT TCP listener `tcp-default` corresponding to port 1883 and
  Dashboard listener `dashboard-listeners-http-bind` corresponding to port 18083.
- The storageClassName field indicates the name of StorageClass
- Elasticsearch requires vm.max_map_count to be at least 262144.
- Kibana can be accessed at http://{node_ip}:35601
- The .spec.config.data field configures the EMQX cluster log level to debug.
- This field is only allowed to be configured when creating an EMQX cluster, and does
  not support updating.
- EMQX supports exposing indicators through the http interface.
- Cluster load rebalancing requires EMQX Enterprise version >= 4.4.12
errors:
- 'Not supported: Lower than 1.16'
- 'Lower than 1.16: Not supported'
- Connect to an AKS cluster using kubectl commands
- Retrieve External IP of the EMQX cluster
- 'Running: Check the status of the EMQX cluster through kubectl get command'
- '401 Unauthorized: Check API key and permissions'
- 'Unsupported Kubernetes version: below 1.16'
- 低于 1.16 版本的 Kubernetes 不支持 apiextensions/v1 APIVersion
- '不支持: 低于 1.16 版本的 Kubernetes 不支持 apiextensions/v1 APIVersion'
- '低于 1.16: 不支持'
- 'STATUS: Running - 确保 EMQX 集群的状态为 Running'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck API key or secret.'
auth_info:
  mentioned_objects:
  - API Key
  - User
client:
  base_url: https://www.emqx.com/en
  headers:
    Accept: application/json
source_metadata: null
