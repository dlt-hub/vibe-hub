resources:
- name: allocations
  endpoint:
    path: /v1/docs/allocations
    method: GET
- name: blackthorn_logs
  endpoint:
    path: /v1/docs/blackthorn-logs
    method: GET
- name: company_info
  endpoint:
    path: /v1/docs/company-info
    method: GET
- name: custom_metadata_types
  endpoint:
    path: /v1/docs/custom-metadata
    method: GET
- name: disputes
  endpoint:
    path: /v1/docs/disputes
    method: GET
- name: line_items
  endpoint:
    path: /v1/docs/line-items
    method: GET
- name: payment_gateway
  endpoint:
    path: /v1/docs/payment-gateway
    method: GET
- name: payment_gateway_customer
  endpoint:
    path: /v1/docs/stripe-customer
    method: GET
- name: payment_methods
  endpoint:
    path: /v1/docs/payment-methods
    method: GET
- name: payment_schedules
  endpoint:
    path: /v1/docs/payment-schedules
    method: GET
- name: invoices
  endpoint:
    path: /v1/docs/sales-documents
    method: GET
- name: transactions
  endpoint:
    path: /v1/docs/transactions
    method: GET
- name: webhook_events
  endpoint:
    path: /v1/docs/webhook-event
    method: GET
- name: Invoice
  endpoint:
    path: /docs/invoices
    method: GET
    data_selector: records
- name: Line Item
  endpoint:
    path: /docs/line-items
    method: GET
    data_selector: records
- name: Line Item
  endpoint:
    path: /line-items
    method: GET
    data_selector: records
- name: payment_methods
  endpoint:
    path: /v1/payment-methods
    method: GET
    data_selector: payment_methods
    params: {}
- name: transaction
  endpoint:
    path: /v1/transactions
    method: GET
    data_selector: transactions
    params: {}
- name: transaction
  endpoint:
    path: /v1/docs/transactions
    method: GET
    data_selector: records
- name: Payments
  endpoint:
    path: /payments
    method: GET
- name: Data Dictionary Group
  endpoint:
    path: /services/data/vXX.X/sobjects/bt_stripe__Data_Dictionary_Group__c
    method: GET
    data_selector: records
- name: Display Language
  endpoint:
    path: /services/data/vXX.X/sobjects/Display_Language__c
    method: GET
    data_selector: records
- name: Stripe Currency Setting
  endpoint:
    path: /services/data/vXX.X/sobjects/StripeCurrencySetting
    method: GET
    data_selector: records
    params: {}
- name: Stripe Connect Country Specs
  endpoint:
    path: /services/data/vXX.X/sobjects/StripeConnectCountrySpecs
    method: GET
    data_selector: records
    params: {}
- name: payment_gateway
  endpoint:
    path: /v1/payments
    method: POST
    data_selector: transaction
    params: {}
- name: Transaction
  endpoint:
    path: /v1/docs/transaction-reattempt-logic
    method: GET
    data_selector: records
    params: {}
- name: Invoice
  endpoint:
    path: /v1/docs/stripe-billing-overview
    method: GET
    data_selector: records
    params: {}
- name: Stripe Currency Setting
  endpoint:
    path: /services/data/vXX.X/sobjects/StripeCurrencySetting
    method: GET
    data_selector: records
    params: {}
- name: Stripe Connect Country Specs
  endpoint:
    path: /services/data/vXX.X/sobjects/StripeConnectCountrySpecs
    method: GET
    data_selector: records
    params: {}
- name: Blackthorn Pay - Reattempt Settings
  endpoint:
    path: /v1/docs/transaction-reattempt-logic
    method: GET
    data_selector: settings
    params: {}
- name: Blackthorn Pay - Trigger Settings
  endpoint:
    path: /v1/docs/transaction-trigger-settings
    method: GET
    data_selector: settings
    params: {}
- name: Blackthorn Pay - Transaction Parents
  endpoint:
    path: /v1/docs/transaction-parents
    method: GET
    data_selector: parents
    params: {}
- name: Blackthorn Pay - Transaction Validations
  endpoint:
    path: /v1/docs/transaction-validations
    method: GET
    data_selector: validations
    params: {}
- name: Blackthorn Pay - Features
  endpoint:
    path: /v1/docs/payments-features
    method: GET
    data_selector: features
    params: {}
- name: Contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
- name: Account
  endpoint:
    path: /services/data/vXX.X/sobjects/Account
    method: GET
    data_selector: records
- name: Payment Method
  endpoint:
    path: /services/data/vXX.X/sobjects/PaymentMethod
    method: GET
    data_selector: records
- name: Transaction
  endpoint:
    path: /services/data/vXX.X/sobjects/Transaction
    method: GET
    data_selector: records
- name: transaction_email_receipt
  endpoint:
    path: /docs/email-receipts
    method: GET
    data_selector: transactions
    params: {}
- name: PaymentGatewayCustomer
  endpoint:
    path: /v1/payments/customers
    method: GET
    data_selector: customers
- name: PaymentMethod
  endpoint:
    path: /v1/payments/methods
    method: GET
    data_selector: methods
- name: Transaction
  endpoint:
    path: /v1/payments/transactions
    method: GET
    data_selector: transactions
- name: Payment Gateway Customer
  endpoint:
    path: /services/data/vXX.X/sobjects/PaymentGatewayCustomer
    method: GET
    data_selector: records
    params: {}
- name: Transaction
  endpoint:
    path: /v1/docs/transactions
    method: GET
    data_selector: records
    params: {}
- name: Default Payment Method
  endpoint:
    path: /v1/docs/default-payment-method
    method: GET
    data_selector: records
    params: {}
- name: Custom Setting
  endpoint:
    path: /v1/docs/custom-settings
    method: GET
    data_selector: records
    params: {}
- name: Payments Admin
  endpoint:
    path: /payments/admin
    method: GET
- name: Payments User
  endpoint:
    path: /payments/user
    method: GET
- name: Payments Manager
  endpoint:
    path: /payments/manager
    method: GET
- name: Payments Community/Platform User
  endpoint:
    path: /payments/community-platform-user
    method: GET
- name: Payments Site Guest User
  endpoint:
    path: /payments/site-guest-user
    method: GET
- name: Payments Lite User
  endpoint:
    path: /payments/lite-user
    method: GET
- name: payment_schedules
  endpoint:
    path: /v1/docs/payment-schedules
    method: GET
    data_selector: records
- name: stripe_billing
  endpoint:
    path: /v1/docs/stripe-billing-overview
    method: GET
    data_selector: records
- name: transactions_to_fix
  endpoint:
    path: /reports/transactions_to_fix
    method: GET
    data_selector: records
- name: completed_and_failed_transactions
  endpoint:
    path: /reports/completed_and_failed_transactions
    method: GET
    data_selector: records
- name: historical_gross_revenue
  endpoint:
    path: /reports/historical_gross_revenue
    method: GET
    data_selector: records
- name: reconciliation_and_payouts
  endpoint:
    path: /reports/reconciliation_and_payouts
    method: GET
    data_selector: records
- name: revenue_forecast_by_month
  endpoint:
    path: /reports/revenue_forecast_by_month
    method: GET
    data_selector: records
- name: transactions_to_be_reattempted
  endpoint:
    path: /reports/transactions_to_be_reattempted
    method: GET
    data_selector: records
- name: transactions_failed_today
  endpoint:
    path: /reports/transactions_failed_today
    method: GET
    data_selector: records
- name: transactions_due_in_next_7_days
  endpoint:
    path: /reports/transactions_due_in_next_7_days
    method: GET
    data_selector: records
- name: transactions_completed_today
  endpoint:
    path: /reports/transactions_completed_today
    method: GET
    data_selector: records
- name: transactions_completed_this_month
  endpoint:
    path: /reports/transactions_completed_this_month
    method: GET
    data_selector: records
- name: payment_gateway
  endpoint:
    path: /payment_gateways
    method: POST
    data_selector: gateway
- name: transaction
  endpoint:
    path: /transactions
    method: POST
    data_selector: transaction
- name: Payment Gateway
  endpoint:
    path: /payment_gateway
    method: GET
- name: Payment Method
  endpoint:
    path: /payment_method
    method: GET
- name: Transaction
  endpoint:
    path: /transaction
    method: GET
- name: Payment Method
  endpoint:
    path: /v1/payment_methods
    method: GET
    data_selector: data
    params: {}
- name: Transaction
  endpoint:
    path: /v1/transactions
    method: GET
    data_selector: data
    params: {}
- name: Stripe Metadata Mapping
  endpoint:
    path: /services/data/vXX.X/sobjects/StripeMetadataMapping
    method: GET
    data_selector: records
    params: {}
- name: line_item
  endpoint:
    path: /docs/line-items
    method: GET
    data_selector: records
- name: Product
  endpoint:
    path: /services/data/vXX.X/sobjects/Product
    method: GET
    data_selector: records
    params: {}
- name: payment_method
  endpoint:
    path: /v1/payment_methods
    method: POST
    data_selector: records
- name: Payment Gateway Customers
  endpoint:
    path: /v1/payment_gateway/customers
    method: GET
    data_selector: customers
- name: Payment Methods
  endpoint:
    path: /v1/payment_gateway/methods
    method: GET
    data_selector: methods
- name: Transactions
  endpoint:
    path: /v1/payment_gateway/transactions
    method: GET
    data_selector: transactions
- name: invoice
  endpoint:
    path: /invoices
    method: GET
    data_selector: records
    params: {}
- name: line_item
  endpoint:
    path: /line_items
    method: GET
    data_selector: records
    params: {}
- name: fee
  endpoint:
    path: /events/fees
    method: GET
    data_selector: fees
    params: {}
notes:
- All date fields on an Invoice will reflect the appropriate date format based on
  your browser's location setting.
- Supports PCI compliance by not storing sensitive Payment Method details.
- Payout Transactions are created in Salesforce via webhook by Stripe.
- Adjustment Transactions are created via webhook by Stripe. It should not be manually
  created.
- Must enable Customer Information Manager to avoid errors.
- Multiple currencies require separate gateways.
- Blackthorn Payments Admin helps manage the Payments app's settings.
- Guest users can access publicly available pages without any licensing or authentication.
- Users can create up to 100 sites for free without buying community licenses.
- Default value for Retain Webhook Records is 30 days.
- Default for Auto-Change Batch Size is 1, with a max of 75.
- Automatically set the latest default payment method on all related 'Open' Transactions.
- Update default Payment Methods in Stripe and they will sync back to Salesforce with
  the setup of Webhooks.
- Please do not send receipts from both Blackthorn | Payments and Stripe. Your customers
  do not want to receive two emails with the same information about a Transaction.
- The sync process is only to migrate your records from that moment backward.
- Only Visa and Mastercard are supported.
- Only e-commerce is supported, not physical retail.
- Level 3 data cannot be modified after a charge is captured.
- Matching criteria are based on Matching and Duplication rules specified in Setup.
- If you leave the Match Records field blank and don't have active duplicate rules
  for Lead, Contact, and Account, you will receive an error in the Blackthorn Logs.
- Processing Transactions in any currency does not require the Salesforce feature
  'Multi-Currency'.
- Amount fields are number fields, not currency fields.
- All permission sets give at least Read, Create, and Edit permission to all custom
  objects and Read and Edit permission to all custom fields.
- The Payments Community/Platform User permission set does not have any of our Assigned
  Apps.
- SCA is only supported by Stripe. (SCA is not supported by Authorize.net or Spreedly.)
- Blackthorn does not support webhook callbacks for gateways configured through Spreedly.
- Do not use ACH payments via Spreedly without caution.
- Stripe is purpose-built for back-end payment processing.
- Certain payment methods like Sepa Debit only work with certain currencies (EUR).
- Payment Method records created in Stripe Checkout cannot be reused for additional
  Transactions.
- Blackthorn no longer supports Payments APIs.
- The documentation provided is a self-help resource for legacy implementations only.
- Some objects like Invoice may not be visible in the Experience Cloud without proper
  permissions.
- Product is a standard object so it is not included in the Stripe Billing permission
  set.
- Uses PCI compliant methods for handling payment information
- When using the sync function, there are no 'undo' calls.
- Invoice creation requires prior setup of Company Info and DocumentLink Template.
errors:
- Balance Due = '0' triggers the Invoice's Payment Status = 'Paid'.
- 'INVALID_PAYMENT_METHOD: Ensure all required fields are filled.'
- 'PAYMENT_GATEWAY_UNAVAILABLE: Check if the Payment Gateway is online.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- No 'undo' calls are available for sync operations.
- 'Payment Gateway not found: Ensure the gateway is correctly configured.'
- 'Transaction failed: Verify the payment method and amount.'
- 'INVALID_OR_NULL_FOR_RESTRICTED_PICKLIST: Currency: bad value for restricted picklist
  field.'
- 'No such customer: ''cus_**********'''
- Keys for idempotent requests can only be used with the same parameters they were
  first used with.
- 'Invalid Payment Method: Check card details or account number'
- 'Verification Failed: Micro-deposit amounts are incorrect'
- '400 Bad Request: Check the input parameters.'
- '404 Not Found: Verify the endpoint path.'
- '401 Unauthorized: Recheck OAuth credentials.'
- '400: E_INVALID_CODE: Invalid documentlink code'
- '402: E_UNLICENSED: No active license available'
- '403: E_NOT_AUTHORIZED: App is not authorized to access org'
- '404: E_NOT_FOUND: Document not found'
- '500: E_NOT_PAYABLE: Document is no payable'
- '502: E_INVALID_CLIENT: Payments API is not enabled'
- '422: E_CAPTURE_ERROR'
- '422: E_CAPTURE_ERROR: Failed to close transaction'
- '422: E_CAPTURE_ERROR: ???????'
- '424: E_PROCESS_ERROR: No successful payment method received from response'
- '424: E_PROCESS_ERROR: Cannot locate a captured transaction'
- '500: E_SERVICE_ERROR: Payments API is disabled'
- '500: E_SERVICE_ERROR: ??????'
- '500: E_RESPONSE_ERROR: ??????'
- '500: E_RESPONSE_ERROR: No successful transactions received from response'
- '500: E_RESPONSE_ERROR: Payment was declined'
- 'METHOD_NOT_ALLOWED: HTTP Method ''GET'' not allowed. Allowed are POST'
auth_info:
  mentioned_objects:
  - PaymentMethod
  - Account
  - Contact
  - Spreedly Environment Key
  - Spreedly Configured Gateway
  - Gateway Token
  - Spreedly Private Key
  - Spreedly Certificate Token
client:
  base_url: https://www.blackthorn.io
  auth:
    type: oauth2
    flow: refresh_token
    token_url: https://login.blackthorn.io/services/oauth2/token
    client_id: '{{ dlt.secrets[''api_client_id''] }}'
    client_secret: '{{ dlt.secrets[''api_client_secret''] }}'
    refresh_token: '{{ dlt.secrets[''api_refresh_token''] }}'
    location: header
    header_name: Authorization
  headers:
    Accept: application/json
source_metadata: null
