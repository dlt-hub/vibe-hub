resources:
- name: apikey
  endpoint:
    path: /zot/auth/apikey
    method: GET
    data_selector: string
    params: {}
- name: catalog
  endpoint:
    path: /v2/_catalog
    method: GET
    data_selector: repositories
    params: {}
- name: discover
  endpoint:
    path: /v2/_oci/ext/discover
    method: GET
    data_selector: extensions
    params: {}
- name: cosign
  endpoint:
    path: /v2/_zot/ext/cosign
    method: POST
    data_selector: string
    params: {}
- name: mgmt
  endpoint:
    path: /v2/_zot/ext/mgmt
    method: GET
    data_selector: string
    params:
      resource: config
- name: notation
  endpoint:
    path: /v2/_zot/ext/notation
    method: POST
    data_selector: string
    params: {}
- name: userprefs
  endpoint:
    path: /v2/_zot/ext/userprefs
    method: PUT
    data_selector: string
    params:
      action: toggleBookmark
      repo: repository name
- name: blobs
  endpoint:
    path: /v2/{name}/blobs/{digest}
    method: GET
    data_selector: string
    params: {}
- name: uploads
  endpoint:
    path: /v2/{name}/blobs/uploads
    method: POST
    data_selector: string
    params: {}
- name: manifests
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: GET
    data_selector: string
    params: {}
- name: tags_list
  endpoint:
    path: /v2/{name}/tags/list
    method: GET
    data_selector: tags
    params:
      n: 'true'
      last: 'true'
- name: referrers
  endpoint:
    path: /v2/{name}/referrers/{digest}
    method: GET
    data_selector: manifests
    params:
      name: 'true'
      digest: 'true'
      artifactType: 'false'
- name: manifests
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: PUT
    data_selector: string
    params:
      name: 'true'
      reference: 'true'
- name: images
  endpoint:
    path: /v2/images
    method: GET
    data_selector: results
- name: repositories
  endpoint:
    path: /repo
    method: GET
- name: tags
  endpoint:
    path: /tools/tags
    method: GET
- name: artifacts
  endpoint:
    path: /hello-artifact
    method: GET
- name: search
  endpoint:
    path: /search
    method: POST
    data_selector: results
- name: sync
  endpoint:
    path: /sync
    method: POST
    data_selector: results
- name: lint
  endpoint:
    path: /lint
    method: POST
    data_selector: results
- name: scrub
  endpoint:
    path: /scrub
    method: POST
    data_selector: results
- name: trust
  endpoint:
    path: /trust
    method: POST
    data_selector: results
- name: metrics
  endpoint:
    path: /metrics
    method: GET
    data_selector: results
- name: user_preferences
  endpoint:
    path: /userprefs
    method: POST
    data_selector: results
- name: released_images
  endpoint:
    path: /general/releases/
    method: GET
- name: repositories
  endpoint:
    path: /repo
    method: GET
    data_selector: repositories
    params: {}
- name: tags
  endpoint:
    path: /tools/tags
    method: GET
    data_selector: tags
    params: {}
- name: explore
  endpoint:
    path: /explore
    method: GET
    data_selector: images
    params: {}
- name: images
  endpoint:
    path: /image/list
    method: GET
    data_selector: REPOSITORY
    params: {}
- name: repositories
  endpoint:
    path: /config
    method: GET
    data_selector: aliases
    params: {}
- name: cve
  endpoint:
    path: /cve
    method: GET
    data_selector: CVEList
- name: repo
  endpoint:
    path: /repo
    method: GET
    data_selector: repositories
- name: image
  endpoint:
    path: /image
    method: GET
    data_selector: images
- name: search
  endpoint:
    path: /search
    method: GET
    data_selector: results
- name: zot_service
  endpoint:
    path: /etc/systemd/system/zot.service
    method: POST
    data_selector: service_definition
    params: {}
- name: project-zot
  endpoint:
    path: /helm-charts
    method: GET
    data_selector: charts
- name: zot
  endpoint:
    path: /api/v2.1.10
    method: GET
    data_selector: charts
    params: {}
- name: zot
  endpoint:
    path: /helm-charts
    method: GET
    data_selector: charts
- name: catalog
  endpoint:
    path: /v2/_catalog
    method: GET
    data_selector: repositories
- name: configuration_file
  endpoint:
    path: /admin-guide/admin-configuration/#configuration-file
    method: GET
    data_selector: settings
    params: {}
- name: userprefs
  endpoint:
    path: /_zot/ext/userprefs
    method: PUT
- name: metrics
  endpoint:
    path: /metrics
    method: GET
- name: sync
  endpoint:
    path: /sync
    method: GET
- name: search
  endpoint:
    path: /search
    method: GET
- name: scrub
  endpoint:
    path: /scrub
    method: GET
- name: lint
  endpoint:
    path: /lint
    method: GET
- name: catalog
  endpoint:
    path: /v2/_catalog
    method: GET
- name: repositories
  endpoint:
    path: /v2/_oci/ext/discover
    method: GET
- name: blobs
  endpoint:
    path: /v2/{repo}/blobs/uploads
    method: POST
- name: tags
  endpoint:
    path: /v2/{repo}/tags/list
    method: GET
- name: metrics
  endpoint:
    path: /metrics
    method: GET
- name: catalog
  endpoint:
    path: /v2/_catalog
    method: GET
    data_selector: repositories
- name: discover_extensions
  endpoint:
    path: /v2/_oci/ext/discover
    method: GET
    data_selector: extensions
- name: upload_certificate
  endpoint:
    path: /v2/_zot/ext/notation
    method: POST
    data_selector: ''
    params:
      truststoreType: ca
- name: auth_apikey
  endpoint:
    path: /zot/auth/apikey
    method: GET
- name: catalog
  endpoint:
    path: /v2/_catalog
    method: GET
- name: discover
  endpoint:
    path: /v2/_oci/ext/discover
    method: GET
- name: auth_apikey
  endpoint:
    path: /zot/auth/apikey
    method: GET
- name: logout
  endpoint:
    path: /zot/auth/logout
    method: POST
- name: artifacts_referrers
  endpoint:
    path: /oras/artifacts/v1/{name}/manifests/{digest}/referrers
    method: GET
- name: v2
  endpoint:
    path: /v2/
    method: GET
- name: catalog
  endpoint:
    path: /v2/_catalog
    method: GET
- name: oci_ext_discover
  endpoint:
    path: /v2/_oci/ext/discover
    method: GET
- name: zot_ext_cosign
  endpoint:
    path: /v2/_zot/ext/cosign
    method: POST
- name: zot_ext_mgmt
  endpoint:
    path: /v2/_zot/ext/mgmt
    method: GET
- name: zot_ext_notation
  endpoint:
    path: /v2/_zot/ext/notation
    method: POST
- name: zot_ext_userprefs
  endpoint:
    path: /v2/_zot/ext/userprefs
    method: PUT
- name: blobs_digest
  endpoint:
    path: /v2/{name}/blobs/{digest}
    method: GET
- name: blobs_uploads
  endpoint:
    path: /v2/{name}/blobs/uploads
    method: POST
- name: blobs_uploads_session
  endpoint:
    path: /v2/{name}/blobs/uploads/{session_id}
    method: GET
- name: manifests_reference
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: GET
- name: referrers_digest
  endpoint:
    path: /v2/{name}/referrers/{digest}
    method: GET
- name: tags_list
  endpoint:
    path: /v2/{name}/tags/list
    method: GET
- name: auth_apikey
  endpoint:
    path: /zot/auth/apikey
    method: GET
    data_selector: string
    params: {}
- name: auth_logout
  endpoint:
    path: /zot/auth/logout
    method: POST
    data_selector: string
    params: {}
- name: get_catalog
  endpoint:
    path: /v2/_catalog
    method: GET
    data_selector: repositories
    params: {}
- name: get_extensions
  endpoint:
    path: /v2/_oci/ext/discover
    method: GET
    data_selector: extensions
    params: {}
- name: get_server_config
  endpoint:
    path: /v2/_zot/ext/mgmt
    method: GET
    data_selector: string
    params:
      resource: config
- name: blobs_uploads
  endpoint:
    path: /v2/{name}/blobs/uploads
    method: POST
    data_selector: string
    params: {}
- name: blobs_uploads_session
  endpoint:
    path: /v2/{name}/blobs/uploads/{session_id}
    method: DELETE
    data_selector: string
    params: {}
- name: blobs_uploads_session_get
  endpoint:
    path: /v2/{name}/blobs/uploads/{session_id}
    method: GET
    data_selector: string
    params: {}
- name: blobs_uploads_session_patch
  endpoint:
    path: /v2/{name}/blobs/uploads/{session_id}
    method: PATCH
    data_selector: string
    params: {}
- name: blobs_uploads_session_put
  endpoint:
    path: /v2/{name}/blobs/uploads/{session_id}
    method: PUT
    data_selector: string
    params: {}
- name: manifests_reference
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: DELETE
    data_selector: string
    params: {}
- name: manifests_reference_get
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: GET
    data_selector: string
    params: {}
- name: manifests_reference_head
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: HEAD
    data_selector: string
    params: {}
- name: manifests_reference_put
  endpoint:
    path: /v2/{name}/manifests/{reference}
    method: PUT
    data_selector: string
    params: {}
- name: referrers_digest
  endpoint:
    path: /v2/{name}/referrers/{digest}
    method: GET
    data_selector: string
    params: {}
- name: tags_list
  endpoint:
    path: /v2/{name}/tags/list
    method: GET
    data_selector: string
    params: {}
- name: cosign_public_key_upload
  endpoint:
    path: /v2/_zot/ext/cosign
    method: POST
    data_selector: ''
    params: {}
- name: notation_certificate_upload
  endpoint:
    path: /v2/_zot/ext/notation
    method: POST
    data_selector: ''
    params:
      truststoreType: ca
- name: image_signature_verification
  endpoint:
    path: /v2/_zot/ext/verify
    method: POST
    data_selector: ''
    params: {}
- name: artifact
  endpoint:
    path: /v2/
    method: GET
    data_selector: referrer
    params: {}
- name: storage
  endpoint:
    path: /storage
    method: GET
    data_selector: storage
    params: {}
- name: subPaths
  endpoint:
    path: /subPaths
    method: GET
    data_selector: subPaths
    params: {}
- name: retention_policies
  endpoint:
    path: /articles/retention/
    method: GET
- name: sync
  endpoint:
    path: /sync
    method: POST
    data_selector: syncDetails
- name: sync
  endpoint:
    path: /sync
    method: POST
    data_selector: synchronized
    params: {}
- name: zot
  endpoint:
    path: /v2/
    method: GET
- name: storage
  endpoint:
    path: /tmp/zot
    method: GET
    data_selector: storage
    params: {}
- name: cache
  endpoint:
    path: redis://host:6379
    method: GET
    data_selector: cache
    params: {}
- name: cluster
  endpoint:
    path: /articles/scaleout/
    method: GET
    data_selector: cluster_info
- name: logging
  endpoint:
    path: /monitoring/log
    method: GET
    data_selector: log
    params: {}
- name: metrics
  endpoint:
    path: /monitoring/metrics
    method: GET
    data_selector: metrics
    params: {}
- name: search
  endpoint:
    path: /v2/_zot/ext/search
    method: POST
    data_selector: Results
- name: graphql_playground
  endpoint:
    path: /v2/_zot/debug/graphql-playground#
    method: GET
    data_selector: schema
- name: CVEListForImage
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.CVEListForImage
- name: ImageListForCVE
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.ImageListForCVE
- name: ImageListWithCVEFixed
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.ImageListWithCVEFixed
- name: ImageListForDigest
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.ImageListForDigest
- name: RepoListWithNewestImage
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.RepoListWithNewestImage
- name: ImageList
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.ImageList
- name: ExpandedRepoInfo
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.ExpandedRepoInfo
- name: GlobalSearch
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.GlobalSearch
- name: DerivedImageList
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.DerivedImageList
- name: BaseImageList
  endpoint:
    path: /graphql
    method: POST
    data_selector: data.BaseImageList
- name: image_details
  endpoint:
    path: /Image
    method: POST
    data_selector: data.Image
    params: {}
- name: image_referrers
  endpoint:
    path: /Referrers
    method: POST
    data_selector: data.Referrers
    params: {}
- name: profile
  endpoint:
    path: /v2/_zot/pprof/profile
    method: GET
    data_selector: ''
    params:
      seconds: '30'
- name: trace
  endpoint:
    path: /v2/_zot/pprof/trace
    method: GET
    data_selector: ''
    params:
      seconds: '30'
- name: hello-server
  endpoint:
    path: /hello-server
    method: POST
    data_selector: deployment
    params:
      image: localhost:5001/hello-app:1.0
- name: local-registry-hosting
  endpoint:
    path: /local-registry-hosting
    method: POST
    data_selector: data
    params: {}
- name: hello-server
  endpoint:
    path: /hello-server
    method: POST
    data_selector: data
    params: {}
- name: hello-server
  endpoint:
    path: /hello-app:1.0
    method: POST
    data_selector: deployment
    params: {}
- name: docker
  endpoint:
    path: /v2/docker
    method: GET
- name: released_images
  endpoint:
    path: /releases
    method: GET
    data_selector: assets
    params: {}
- name: project-zot
  endpoint:
    path: /helm-charts
    method: GET
- name: zot
  endpoint:
    path: /project-zot/zot
    method: GET
    data_selector: charts
    params: {}
- name: zot
  endpoint:
    path: /v2/_catalog
    method: GET
    data_selector: repositories
- name: notation
  endpoint:
    path: /v2/_zot/ext/notation
    method: POST
- name: artifact
  endpoint:
    path: /v2/
    method: GET
    data_selector: referrer
    params: {}
- name: storage
  endpoint:
    path: /storage
    method: GET
    data_selector: records
- name: s3_permissions
  endpoint:
    path: /s3/permissions
    method: POST
    data_selector: permissions
    params: {}
- name: dynamodb_permissions
  endpoint:
    path: /dynamodb/permissions
    method: POST
    data_selector: permissions
    params: {}
- name: sync
  endpoint:
    path: /sync
    method: POST
    data_selector: registries
    params:
      enable: true
- name: repositories
  endpoint:
    path: /v2/_catalog
    method: GET
    data_selector: repositories
    params: {}
- name: ImageListForDigest
  endpoint:
    path: /ImageListForDigest
    method: POST
    data_selector: data.ImageListForDigest.Results
    params: {}
- name: RepoListWithNewestImage
  endpoint:
    path: /RepoListWithNewestImage
    method: POST
    data_selector: data.RepoListWithNewestImage.Results
    params: {}
- name: ImageList
  endpoint:
    path: /ImageList
    method: POST
    data_selector: data.ImageList.Results
    params: {}
- name: ExpandedRepoInfo
  endpoint:
    path: /ExpandedRepoInfo
    method: POST
    data_selector: data.ExpandedRepoInfo.Images
    params: {}
- name: GlobalSearch
  endpoint:
    path: /GlobalSearch
    method: POST
    data_selector: data.GlobalSearch.Images
    params: {}
- name: DerivedImageList
  endpoint:
    path: /DerivedImageList
    method: POST
    data_selector: data.DerivedImageList.Results
    params: {}
- name: BaseImageList
  endpoint:
    path: /BaseImageList
    method: POST
    data_selector: data.BaseImageList.Results
    params: {}
- name: Image
  endpoint:
    path: /Image
    method: POST
    data_selector: data.Image
    params: {}
- name: Referrers
  endpoint:
    path: /Referrers
    method: POST
    data_selector: data.Referrers
    params: {}
- name: pprof
  endpoint:
    path: /v2/_zot/pprof/
    method: GET
    data_selector: ''
    params: {}
- name: profile
  endpoint:
    path: /v2/_zot/pprof/profile
    method: GET
    data_selector: ''
    params:
      seconds: '30'
- name: trace
  endpoint:
    path: /v2/_zot/pprof/trace
    method: GET
    data_selector: ''
    params:
      seconds: '30'
- name: hello-server
  endpoint:
    path: /hello-app:1.0
    method: POST
- name: hello-server
  endpoint:
    path: /hello-app:1.0
    method: GET
    data_selector: deployment
    params: {}
notes:
- OCI-native container image registry, simplified
- Some objects may return nulls in deeply nested fields
- Support is added for OpenID authentication with GitHub, Google, and dex.
- In these examples, authentication is disabled for the source and destination.
- 'To authenticate with the zot server, log in at the start of your session using
  the command: oras login -u myUsername -p myPassword localhost:5000'
- Authentication is disabled for the source and destination by default.
- TLS authentication can be disabled by using the command `regctl registry set --tls=disabled
  localhost:5000`.
- Open source
- CNCF project
- 'License: Apache 2.0'
- Supports TLS mutual authentication, HTTP Basic (local htpasswd and LDAP), and HTTP
  Bearer token.
- Uses a single configuration file for governance of zot instance behavior.
- While binary images are available for FreeBSD, building container images is not
  supported at this time.
- Authentication is disabled for the source and destination.
- TLS authentication can be disabled by setting --tls=disabled.
- Depending on the security configuration of the zot registry, you might need to authenticate
  before being given access.
- Uses zli commands to interact with the zot registry.
- Configuring a dedicated non-root user ID as the User and Group in the zot service
  definition is required.
- Using Kubernetes with Helm charts for zot, you can easily deploy zot as an application
  in a Kubernetes cluster.
- kubectl must be installed and a Kubernetes cluster must be ready.
- Helm must be installed.
- 'Helm charts for zot are hosted in publicly-accessible repositories: zotregistry.dev,
  artifacthub.io'
- Zot configuration file is located at /etc/zot/config.json
- Executable binary images for supported server platforms and architectures are available
  from the zot package repository in GitHub.
- By default, auth is disabled.
- A YAML configuration file is created at /etc/zot/config.yml in the container.
- The registry administrator configures zot primarily through settings in the configuration
  file.
- Before launching zot with a new configuration, we recommend that you verify the
  syntax of your configuration.
- The extension features are available only with a full zot image. With a minimal
  zot image, the extensions section is ignored if present.
- The user preferences extension is enabled by default when the search and ui extensions
  are enabled.
- The zot registry code base is hosted on GitHub at https://github.com/project-zot/zot.
- Some API endpoints are available only when a specific extension is enabled in the
  zot configuration file.
- If zot authentication is not configured, any user can access the zot API.
- API key is required for authentication.
- zot is compatible with kubernetes/cri-o using docker:// transport, which is the
  default.
- Uses OAuth2 with bearer token — requires setup of connected app in zot
- Always include the read action in any policy that you define.
- Unathenticated users have read-only access to these repositories.
- Signature verification is enabled by including the trust attribute and setting it
  to true
- Immutable image tag support is achieved by leveraging authorization policies.
- Uses a local zot registry setup
- Uses local setup with configurable host and port
- All interactions with zot are over HTTP APIs, and htpasswd-based local authentication,
  LDAP, mutual TLS, and token-based authentication mechanisms are supported.
- zot supports local and remote file storage
- zot does not implement, support, or require any vendor-specific protocols, including
  that of Docker
- If at least one `keepTags` policy is defined for a repository, all tags not matching
  those policies are removed.
- All image retention and garbage collection processing is made per repository, not
  per groups of repositories.
- zot is a OCI-only registry
- Docker compatibility can be enabled using the compat attribute
- Only signed images (notation and cosign) are synchronized.
- The sync communication is secured using certificates in `certDir`.
- This registry synchronizes with upstream registry every 6 hours.
- This registry preserves upstream digests instead of converting them to OCI images.
- On-demand mirroring is disabled.
- Clustering supports both bare-metal and Kubernetes environments.
- The remote backend storage must be S3 API-compatible.
- Clustering is supported in both bare-metal and Kubernetes environments.
- High availability of the zot registry is supported by stateless zot instances and
  shared remote storage.
- A cluster of zot instances can be easily scaled with no repo-specific intelligence
  in the load balancing scheme
- An active/standby zot registry can be implemented between two zot instances by configuring
  the sync extension in the standby instance to mirror the other instance.
- To minimize the exposure window of failure, it is recommended to keep the synchronization
  period as small as practical.
- 'The minimum level for logged events includes: panic, fatal, error, warn, info,
  debug, and trace.'
- Metrics collection can be enabled or disabled in the configuration.
- The zb tool is useful for benchmarking OCI registry workloads.
- We recommend installing and benchmarking with zb when you install zot.
- If authentication is enabled, only a zot admin user can access the APIs for profiling.
- Use kind to try out zot deployment with Kubernetes
- The procedure installs a kind cluster with a zot registry at localhost:5001
- Note that /v2 is required for this to work.
- zot is a production-ready, open-source, vendor-neutral container image registry
  server based purely on OCI standards.
- The minimal build feature is the ability to build a minimal Distribution Spec compliant
  registry in order to reduce library dependencies and the possible attack surface.
- Supports TLS mutual authentication
- Supports HTTP Basic (local htpasswd and LDAP)
- Supports HTTP Bearer token
- Supports Identity-Based Access Control
- When downloading a binary image for MacOS, download the darwin image.
- When downloading a container image for MacOS, download the linux image, not the
  darwin image.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Some objects like Contact may return nulls in deeply nested fields
- The zot configuration file is located at /etc/zot/config.json.
- Linting can be enabled by including this attribute and setting it to true.
- If the mandatory annotations option is configured when you push an image, linter
  will verify that the mandatory annotations list present in the configuration is
  also found in the manifest's annotations list.
- Use the endpoint for uploading a certificate for notation with the specified method.
- If your network policy doesn't allow inbound connections, the callback will not
  work and this authentication method will fail.
- It is considered best practice to avoid changing the content once a software version
  has been released.
- Uses HTTP without authentication
- The server runs on localhost:8080
- Uses AWS S3 for remote storage configuration.
- A cache driver is used to store duplicate blobs when dedupe is enabled.
- zot supports database caching using BoltDB as the cache driver for local filesystems
  and DynamoDB for remote filesystems.
- Zot is a OCI-only registry, any upstream image stored in the Docker image format
  is converted to OCI format when downloading to zot.
- Because Docker Hub rate-limits pulls and does not support catalog listing, do not
  use polled mirroring with Docker Hub.
- User request for content from the zot registry causes zot to synchronize the content
  with this remote registry before delivering it.
- 'High availability of the zot registry is supported by the following features: Stateless
  zot instances to simplify scale out, Bare-metal and Kubernetes deployments.'
- The zb tool is useful for benchmarking OCI registry workloads in scenarios such
  as comparing configuration changes, software versions, hardware/deployment environments,
  and other registries.
errors:
- '400: Bad Request'
- '404: Not Found'
- '500: Internal Server Error'
- '401 Unauthorized: Recheck OpenID configurations.'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- '401 Unauthorized: Recheck username or password'
- '401 Unauthorized: Use correct credentials.'
- '404 Not Found: Check the requested resource.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
auth_info:
  mentioned_objects:
  - OpenID
  - GitHub
  - Google
  - dex
  - myUsername
  - myPassword
  - Bearer
  - OAuth2
  - apikey
  - session-based authentication
  - OauthToken
  - AuthProvider
  - NamedCredential
client:
  base_url: https://zotregistry.dev
  headers:
    Accept: application/json
source_metadata: null
