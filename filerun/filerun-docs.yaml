resources:
- name: user_account_info
  endpoint:
    path: /api.php/account/info
    method: GET
    data_selector: success
    params:
      scope: profile email
- name: files_browse
  endpoint:
    path: /api.php/files/browse/
    method: GET
    data_selector: data.files
    params:
      path: /ROOT/HOME
      itemType: files
- name: files_metadata
  endpoint:
    path: /api.php/files/metadata/
    method: GET
    data_selector: data
    params:
      path: /ROOT/HOME/file.ext
- name: files_search
  endpoint:
    path: /api.php/files/search/
    method: POST
    data_selector: data
    params:
      path: /ROOT/HOME
- name: files_createfolder
  endpoint:
    path: /api.php/files/createfolder/
    method: POST
    data_selector: data
    params:
      path: /ROOT
      name: New Folder
- name: files_upload
  endpoint:
    path: /api.php/files/upload/
    method: PUT
    data_selector: data
    params:
      path: /ROOT/HOME/existing-folder/my-file.ext
      filePath: your-file.ext
- name: files_download
  endpoint:
    path: /api.php/files/download/
    method: GET
    data_selector: data
    params:
      path: /ROOT/HOME/existing-folder/my-file.ext
- name: files_delete
  endpoint:
    path: /api.php/files/delete/
    method: POST
    data_selector: data
    params:
      path: /ROOT/HOME/existing-folder/my-file.ext
      permanent: true
- name: files_share
  endpoint:
    path: /api.php/files/share/
    method: POST
    data_selector: data
    params:
      path: /ROOT/HOME/existing-folder
      uid: 123
- name: admin_users_info
  endpoint:
    path: /api.php/admin-users/info
    method: POST
    data_selector: data
    params:
      UID: 456
- name: add_user
  endpoint:
    path: /add
    method: POST
    data_selector: data
    params:
      data[username]: required
      data[name]: required
- name: edit_user
  endpoint:
    path: /edit
    method: POST
    data_selector: data
    params:
      UID: required
- name: delete_user
  endpoint:
    path: /delete
    method: POST
    data_selector: data
    params:
      UIDS: required
- name: thumbnails
  endpoint:
    path: /imagemagick
    method: GET
    data_selector: thumbnails
- name: ghostscript
  endpoint:
    path: /ghostscript
    method: GET
    data_selector: ghostscript
- name: email_settings
  endpoint:
    path: /e-mail_notification_system
    method: GET
    data_selector: settings
    params: {}
- name: image_files
  endpoint:
    path: /api/image_files
    method: GET
    data_selector: records
- name: office_documents
  endpoint:
    path: /api/office_documents
    method: GET
    data_selector: records
- name: pdf_documents
  endpoint:
    path: /api/pdf_documents
    method: GET
    data_selector: records
- name: text_documents
  endpoint:
    path: /api/text_documents
    method: GET
    data_selector: records
- name: epub
  endpoint:
    path: /api/epub
    method: GET
    data_selector: records
- name: archive_files
  endpoint:
    path: /api/archive_files
    method: GET
    data_selector: records
- name: video_files
  endpoint:
    path: /api/video_files
    method: GET
    data_selector: records
- name: audio_files
  endpoint:
    path: /api/audio_files
    method: GET
    data_selector: records
- name: autocad_files
  endpoint:
    path: /api/autocad_files
    method: GET
    data_selector: records
- name: other_3d_model_files
  endpoint:
    path: /api/other_3d_model_files
    method: GET
    data_selector: records
- name: misc_file_types
  endpoint:
    path: /api/misc_file_types
    method: GET
    data_selector: records
- name: file_indexing
  endpoint:
    path: /file_indexing
    method: GET
    data_selector: files
    params: {}
- name: custom_folder_size
  endpoint:
    path: /customizables/plugins/folder_size/app.php
    method: POST
    data_selector: data
    params: {}
- name: custom_event_scripts
  endpoint:
    path: /custom_event_scripts
    method: GET
    data_selector: records
- name: search_by_filename
  endpoint:
    path: /search/filename
    method: GET
- name: search_by_metadata
  endpoint:
    path: /search/metadata
    method: GET
- name: search_by_content
  endpoint:
    path: /search/content
    method: GET
- name: guest_user
  endpoint:
    path: /guest_users
    method: GET
    data_selector: guest_users
    params: {}
- name: activity_logs
  endpoint:
    path: /file-based_activity_logs
    method: GET
    data_selector: logs
    params: {}
- name: WebDAV
  endpoint:
    path: /dav.php/
    method: GET
- name: MySQL
  endpoint:
    path: /mysql
    method: GET
    data_selector: backup
    params: {}
- name: FileRun application files
  endpoint:
    path: /filerun/files
    method: GET
    data_selector: backup
    params: {}
- name: metadata_update_file_type
  endpoint:
    path: /command_line_tools/metadata_update_file_type.php
    method: POST
    data_selector: none
    params:
      path: /path/to/folder-or-file/
- name: metadata_index
  endpoint:
    path: /command_line_tools/metadata_index.php
    method: POST
    data_selector: none
    params:
      username: superuser
      path: /full/path/to/subfolder/
- name: delete_old_files
  endpoint:
    path: /command_line_tools/delete_old_files.php
    method: POST
    data_selector: none
    params: {}
- name: email_notifications
  endpoint:
    path: /command_line_tools/email_notifications.php
    method: POST
    data_selector: none
    params:
      hostname: your.full-hostname.com
- name: empty_trash
  endpoint:
    path: /command_line_tools/empty_trash.php
    method: POST
    data_selector: none
    params:
      username: superuser
      days: 30
- name: make_thumbs
  endpoint:
    path: /command_line_tools/make_thumbs.php
    method: POST
    data_selector: none
    params:
      username: superuser
- name: make_thumbs_large
  endpoint:
    path: /command_line_tools/make_thumbs.php
    method: POST
    data_selector: none
    params:
      username: superuser
      size: large
- name: paths_cleanup
  endpoint:
    path: /command_line_tools/paths_cleanup.php
    method: POST
    data_selector: none
    params: {}
- name: process_search_index_queue
  endpoint:
    path: /command_line_tools/process_search_index_queue.php
    method: POST
    data_selector: none
    params: {}
- name: reindex_files
  endpoint:
    path: /command_line_tools/reindex_files.php
    method: POST
    data_selector: none
    params:
      username: superuser
- name: add_file_to_search_index
  endpoint:
    path: /command_line_tools/add_file_to_search_index.php
    method: POST
    data_selector: none
    params:
      path: /full/path/to/file.ext
- name: add_folder_to_search_index
  endpoint:
    path: /command_line_tools/add_folder_to_search_index.php
    method: POST
    data_selector: none
    params:
      path: /full/path/to/folder/
- name: reset_superuser_pass
  endpoint:
    path: /command_line_tools/reset_superuser_pass.php
    method: POST
    data_selector: none
    params:
      hostname: your.full-hostname.com
      new_password: new-password
- name: index_filenames
  endpoint:
    path: /command_line_tools/index_filenames.php
    method: POST
    data_selector: none
    params:
      path: /path/to/folder/
      suppress_output: true
- name: space_quota_notifications
  endpoint:
    path: /command_line_tools/space_quota_notifications.php
    method: POST
    data_selector: none
    params:
      hostname: your.full-hostname.com
- name: users_sync
  endpoint:
    path: /command_line_tools/users_sync.php
    method: POST
    data_selector: none
    params:
      hostname: your.full-hostname.com
- name: users
  endpoint:
    path: /admin/users
    method: GET
- name: groups
  endpoint:
    path: /admin/groups
    method: GET
- name: roles
  endpoint:
    path: /admin/roles
    method: GET
notes:
- Access tokens are valid only for the set of operations and resources described in
  the scope of the token request.
- Requires setup of user permissions for access to certain functionalities
- Usernames must be unique in the database.
- Authorization header must include a valid Bearer token.
- Make sure you are running the latest FileRun version before applying this information
  to your installation.
- The latest FileRun version requires PHP 8.1+ and the free version is no longer available.
- FileRun requires PHP version 8.1, 8.2 or 8.3, configured with the ionCube Loader
  extension.
- The OPCache extension is highly recommended, for dramatically speeding FileRun/PHP
  up.
- Replace /private/path/php_error.log with a valid path.
- Replace /path-to-filerun and /path-to-user-files above with actual paths.
- Replace /path/to/your/temp/folder/ with an actual path.
- Replace UTC with your actual time zone.
- Make sure session.save_path is set in your PHP configuration file and points to
  an existing folder that PHP can write to.
- Make a backup of your FileRun installation folder.
- In 99% of the cases problems are caused by a server or PHP configuration problem.
- Make sure the path set in PHP's configuration for 'session.save_path' points to
  a folder which exists and its permissions allow PHP to write data to it.
- Make sure that your disk space is not full.
- Make sure that you are not trying to login to FileRun via HTTP, while you have already
  logged in via HTTPS before that.
- Try removing the 'web.config' file from the FileRun installation folder.
- Make sure the system user under which IIS is running has write permission over the
  folder 'system/data' (and all its subfolders).
- Enable detailed error reporting in the IIS configuration to get more information
  about the problem.
- Make sure PHP is configured with the latest ionCube version.
- You are using a too old MySQL/MariaDB version. You would need at least version 5.6,
  while 5.7 is the recommended one.
- Try using '127.0.0.1' instead of 'localhost' for the MySQL hostname.
- Make sure PHP is configured with 'include_path' which contains '.'.
- Your IIS server is not serving WOFF2 files correctly.
- Make sure the reverse proxy forwards all the headers to the FileRun server.
- Your reverse proxy must be fully transparent.
- You can adjust the time difference by either configuring PHP with a different timezone,
  or configuring just the FileRun installation to use your time zone.
- If you want to change also the date/time formats used in the interface, these can
  be changed by editing the language translation files.
- For ImageMagick/GraphicsMagick to generate thumbnails for PDF documents, install
  Ghostscript.
- Right-click the file without a thumbnails, select the Control panel option under
  More options. You will find in there troubleshooting tools which will help you find
  out what happens behind the scene and where the problem might be.
- Make sure the folder the image files are in, are writable by PHP. FileRun needs
  to cache the generated thumbnails in a hidden folder next to the files.
- 'For PDF files: make sure that Ghostscript is installed on the server and working.'
- 'On Windows servers: make sure PHP can run external applications. You need to give
  the Internet Guest User read & execute permission on the file that PHP is trying
  to run ImageMagick through.'
- 'On Windows servers: you might also need to adjust the permissions of the system
  temporary folder, to allow ImageMagick, Ghostscript and most importantly IUSR to
  write temporary data in there.'
- Most SMTP servers require authentication.
- FileRun tries to detect your SMTP server configuration.
- Searching files by keywords in their contents requires additional configuration
  and third-party software.
- If you are running FileRun using Docker, please use the specified guide.
- Undo the settings changes if the test is not successful
- FileRun follows the RFC6238 standard for TOTP security tokens
- If the application is set to Testing instead of Production under OAuth consent screen
  you will need to add test users and these users will be the only users that can
  use this integration.
- FileRun uses by default Bitly.com for shortening the shared links.
- You will be asked to enter your Bitly password.
- The PHP file customizables/config.php needs to start with <?php on the first line.
- Do not end the file with '?>'.
- As software updates are replacing FileRun's files regardless of the fact that they
  have been customized, there is a way to make CSS modifications which will be preserved
  between software updates.
- Guest users do not login with username and password, but with special access links.
- Guest user accounts are automatically deleted when there are no longer any files
  or folders shared with them.
- Users will be notified only about actions performed inside their own home folder.
- Disabling the user's 'User can access the files' activity logs' permission will
  disable this feature.
- The URL must contain the trailing slash character, after 'dav.php'.
- If you use a self-signed certificate, you will get a warning.
- Make a backup of the FileRun installation.
- Adjust File/Folder permissions to allow PHP to replace files.
- Ensure MySQL/MariaDB user has ALTER and DROP permissions.
- Secure the installation again after the update.
- The action will not be logged inside FileRun, no notifications will be sent.
errors:
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- '403 Forbidden: Check your permissions'
- '404 Not Found: Ensure the path is correct'
- '400 Bad Request: Verify the request parameters'
- The value of data[username] needs to be unique in the database
- If the provided credentials are verified as correct, but you are being returned
  to the login page, check session.save_path.
- 'MySQL error: SQLSTATE[42000]: Syntax error or access violation: 1115 Unknown character
  set: ''utf8mb4''.'
- 'MySQL: SQLSTATE[HY000] [2002] No such file or directory.'
- 'Resource temporarily unavailable: If you experience trouble when you create a file
  in the directory, edit /etc/davfs2/davfs2.conf and add: use_locks 0.'
- 'Certificate warnings: If you use a self-signed certificate, you will get a warning.'
auth_info:
  mentioned_objects:
  - client_id
  - client_secret
  - refresh_token
client:
  base_url: https://filerun.com
  auth:
    type: oauth2
source_metadata: null
