resources:
- name: personal_referral_links
  endpoint:
    path: /personal_referral_links
    method: POST
    data_selector: referral_link
- name: referral_links
  endpoint:
    path: /referral_links/{code}
    method: GET
    data_selector: referral_link
- name: shares
  endpoint:
    path: /shares
    method: GET
    data_selector: results
- name: reminder_emails
  endpoint:
    path: /reminder_emails
    method: GET
    data_selector: results
- name: email_captures
  endpoint:
    path: /email_captures
    method: POST
    data_selector: email_capture
- name: email_captures
  endpoint:
    path: /email_captures
    method: GET
    data_selector: results
- name: purchases
  endpoint:
    path: /purchases
    method: GET
    data_selector: results
- name: conversions
  endpoint:
    path: /conversions
    method: GET
    data_selector: results
- name: rewards
  endpoint:
    path: /rewards
    method: GET
    data_selector: results
- name: email_capture
  endpoint:
    path: /webhooks/email_capture
    method: POST
    data_selector: email_capture_event
    params: {}
- name: reward
  endpoint:
    path: /rewards/{id}
    method: GET
- name: coupon_banks
  endpoint:
    path: /coupon_banks
    method: GET
- name: coupon_bank
  endpoint:
    path: /coupon_banks/{id}
    method: GET
- name: coupons
  endpoint:
    path: /coupons
    method: GET
- name: clicks
  endpoint:
    path: /clicks
    method: GET
- name: newsletter_opt_ins
  endpoint:
    path: /newsletter_opt_ins
    method: GET
- name: email_opt_outs
  endpoint:
    path: /email_opt_outs
    method: GET
- name: user_data_request_report
  endpoint:
    path: /user_data/request_report
    method: POST
- name: user_data_delete
  endpoint:
    path: /user_data/delete
    method: POST
- name: conversion
  endpoint:
    path: /v2/conversions
    method: POST
    data_selector: conversion
    params: {}
- name: visitor_status
  endpoint:
    path: /v2/visitor_status
    method: POST
    data_selector: response
- name: reward_webhook
  endpoint:
    path: /v2/reward_webhook
    method: POST
    data_selector: reward
    params: {}
- name: unsubscribe_webhook
  endpoint:
    path: /v2/unsubscribe_webhook
    method: POST
    data_selector: unsubscribe
    params: {}
- name: tracking_customer
  endpoint:
    method: POST
    data_selector: customer
    params: {}
- name: tracking_order
  endpoint:
    method: POST
    data_selector: order
    params: {}
- name: tracking_products
  endpoint:
    method: POST
    data_selector: products
    params: {}
- name: widget_management
  endpoint:
    method: POST
    data_selector: widget
    params: {}
- name: email_captures
  endpoint:
    path: /analytics/email-captures
    method: GET
    data_selector: results
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
    data_selector: results
- name: shares
  endpoint:
    path: /analytics/shares
    method: GET
    data_selector: results
- name: clicks
  endpoint:
    path: /analytics/clicks
    method: GET
    data_selector: results
- name: signups
  endpoint:
    path: /analytics/account-sign-ups
    method: GET
    data_selector: results
- name: purchases
  endpoint:
    path: /analytics/purchases
    method: GET
    data_selector: results
- name: distributed_advocate_rewards
  endpoint:
    path: /analytics/distributed-advocate-rewards
    method: GET
    data_selector: results
- name: distributed_friend_incentives
  endpoint:
    path: /analytics/distributed-friend-incentives
    method: GET
    data_selector: results
- name: referral_rewards
  endpoint:
    path: /analytics/rewards/referral
    method: GET
    data_selector: results
- name: ledger_balance_custom
  endpoint:
    path: /ledger-balance-custom
    method: GET
- name: email_capture
  endpoint:
    path: /analytics/email-captures
    method: GET
    data_selector: results
- name: purchases
  endpoint:
    path: /analytics/purchases
    method: GET
    data_selector: results
- name: signups
  endpoint:
    path: /analytics/account-sign-ups
    method: GET
    data_selector: results
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
    data_selector: results
- name: shares
  endpoint:
    path: /analytics/shares
    method: GET
    data_selector: results
- name: clicks
  endpoint:
    path: /analytics/clicks
    method: GET
    data_selector: results
- name: distributed_advocate_rewards
  endpoint:
    path: /analytics/distributed-advocate-rewards
    method: GET
    data_selector: results
- name: distributed_friend_incentives
  endpoint:
    path: /analytics/distributed-friend-incentives
    method: GET
    data_selector: results
- name: redemption_options
  endpoint:
    path: /reward/redemption-options
    method: GET
- name: coupons
  endpoint:
    path: /reward/coupons
    method: GET
- name: user_data
  endpoint:
    path: /user-data
    method: GET
    data_selector: ''
    params: {}
- name: delete_user_data
  endpoint:
    path: /user-data
    method: DELETE
    data_selector: ''
    params: {}
- name: tracking_event
  endpoint:
    path: /track
    method: POST
    data_selector: event
    params: {}
- name: subscribe_event
  endpoint:
    path: /subscribe
    method: POST
    data_selector: event
    params: {}
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
- name: email_captures
  endpoint:
    path: /analytics/email-captures
    method: GET
    data_selector: results
- name: purchases
  endpoint:
    path: /analytics/purchases
    method: GET
    data_selector: results
- name: signups
  endpoint:
    path: /analytics/account-sign-ups
    method: GET
    data_selector: results
- name: distributed_advocate_rewards
  endpoint:
    path: /analytics/distributed-advocate-rewards
    method: GET
    data_selector: results
- name: distributed_friend_incentives
  endpoint:
    path: /analytics/distributed-friend-incentives
    method: GET
    data_selector: results
- name: email_capture
  endpoint:
    path: /analytics/email-captures
    method: GET
    data_selector: results
    params: {}
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
    data_selector: results
    params: {}
- name: shares
  endpoint:
    path: /analytics/shares
    method: GET
    data_selector: results
    params: {}
- name: clicks
  endpoint:
    path: /analytics/clicks
    method: GET
    data_selector: results
    params: {}
- name: signups
  endpoint:
    path: /analytics/account-sign-ups
    method: GET
    data_selector: results
    params: {}
- name: redemption_options
  endpoint:
    path: /getRedemptionOptions
    method: GET
- name: timezones
  endpoint:
    path: /timezones
    method: GET
    data_selector: timezones
    params: {}
- name: Referral Code
  endpoint:
    params:
      code: string
      status: string
- name: Advocate
  endpoint:
    params:
      string: string
      customerId: string
      name: string
      rewardDetails: rewardDetails
- name: Reward Details
  endpoint:
    params:
      amount: string
      value: string
      description: string
- name: Responses
  endpoint:
    params:
      merchantid: string
      id: string
      string: string
      name: string
      loyaltyInfo: customer_loyaltyInfo
- name: referral_link_batch
  endpoint:
    path: /api/referral_links/batch
    method: POST
    data_selector: purls
- name: adjust_ledger_balance
  endpoint:
    path: /api/ledger/adjust
    method: POST
    data_selector: currency
- name: personal_referral_link
  endpoint:
    path: /personal-referral-link
    method: POST
    data_selector: link
    params: {}
- name: purchase_event
  endpoint:
    path: /event/purchase
    method: POST
    data_selector: eventId
    params: {}
- name: user_data
  endpoint:
    path: /user-data
    method: GET
    data_selector: null
    params: {}
- name: email_captures
  endpoint:
    path: /analytics/email-captures
    method: GET
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
- name: shares
  endpoint:
    path: /analytics/shares
    method: GET
- name: clicks
  endpoint:
    path: /analytics/clicks
    method: GET
- name: account_sign_ups
  endpoint:
    path: /analytics/account-sign-ups
    method: GET
- name: purchases
  endpoint:
    path: /analytics/purchases
    method: GET
- name: distributed_advocate_rewards
  endpoint:
    path: /analytics/distributed-advocate-rewards
    method: GET
- name: distributed_friend_incentives
  endpoint:
    path: /analytics/distributed-friend-incentives
    method: GET
- name: referral_rewards
  endpoint:
    path: /analytics/rewards/referral
    method: GET
- name: redemption_options
  endpoint:
    path: /reward/redemption-options
    method: GET
- name: coupons
  endpoint:
    path: /reward/coupons
    method: GET
- name: ledger_heads
  endpoint:
    path: /analytics/loyalty/ledger-heads
    method: GET
- name: ledger_balance
  endpoint:
    path: /ledger-balance
    method: GET
- name: ledger_balance_custom
  endpoint:
    path: /ledger-balance-custom
    method: GET
- name: receipts
  endpoint:
    path: /analytics/receipts
    method: GET
- name: personal_referral_link
  endpoint:
    path: /personal-referral-link
    method: POST
    data_selector: link
    params: {}
- name: distributed_advocate_rewards
  endpoint:
    path: /analytics/distributed-advocate-rewards
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: distributed_friend_incentives
  endpoint:
    path: /analytics/distributed-friend-incentives
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: reward_redemption_options
  endpoint:
    path: /reward/redemption-options
    method: GET
    data_selector: records
    params: {}
- name: email_captures
  endpoint:
    path: /analytics/email-captures
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: shares
  endpoint:
    path: /analytics/shares
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: clicks
  endpoint:
    path: /analytics/clicks
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: signups
  endpoint:
    path: /analytics/account-sign-ups
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: purchases
  endpoint:
    path: /analytics/purchases
    method: GET
    data_selector: results
    params:
      fromDate: string
      toDate: string
- name: referral_code
  endpoint:
    path: /referral/code
    method: POST
    data_selector: code
    params:
      code: string
      status: string
- name: advocate
  endpoint:
    path: /advocate
    method: POST
    data_selector: advocate
    params:
      string: string
      customerId: string
      name: string
      rewardDetails: rewardDetails
- name: results
  endpoint:
    path: /results
    method: GET
    data_selector: results
    params:
      advocateCustomerId: string
      advocateEmail: string(email)
      advocateName: string
      channel: string
      referralCode: string
      campaignId: string(uuid)
      campaignName: string
      createdOn: string(date-time)
      userAgent: string
      ipAddress: string(ipv4)
- name: results
  endpoint:
    path: /results
    method: GET
    data_selector: results
    params:
      fromDate: string(date-time)
      toDate: string(date-time)
      campaignId: string(uuid)
      customerId: string
      query: string(email)
      pageToken: string
      pageSize: string
- name: timezones
  endpoint:
    path: /timezones
    method: GET
    data_selector: records
    params: {}
- name: referral_code
  endpoint:
    path: /referral_code
    method: POST
    data_selector: records
    params:
      code: string
      status: string
- name: advocate
  endpoint:
    path: /advocate
    method: POST
    data_selector: records
    params:
      rewardDetails: rewardDetails
- name: getReferralStatus
  endpoint:
    path: /v1/referral-status
    method: GET
- name: widget_views
  endpoint:
    path: /analytics/widget-views
    method: GET
    params:
      fromDate: '2020-01-05T01:07:38.509Z'
      toDate: '2021-01-05T01:07:38.509Z'
- name: shares
  endpoint:
    path: /analytics/shares
    method: GET
    params:
      fromDate: '2020-01-05T01:07:38.509Z'
      toDate: '2021-01-05T01:07:38.509Z'
- name: clicks
  endpoint:
    path: /analytics/clicks
    method: GET
    params:
      fromDate: '2020-01-05T01:07:38.509Z'
      toDate: '2021-01-05T01:07:38.509Z'
- name: account_sign_up
  endpoint:
    path: /event/account-sign-up
    method: POST
    data_selector: eventId
    params: {}
- name: purchase
  endpoint:
    path: /event/purchase
    method: POST
    data_selector: eventId
    params: {}
- name: custom_event
  endpoint:
    path: /event/custom
    method: POST
    data_selector: eventId
    params: {}
- name: redemption_options
  endpoint:
    path: /reward/redemption-options
    method: GET
    data_selector: records
    params: {}
- name: coupons
  endpoint:
    path: /reward/coupons
    method: GET
    data_selector: records
    params: {}
- name: timezones
  endpoint:
    path: /timezones
    method: GET
    data_selector: timezones
- name: referral_code
  endpoint:
    path: /referral_codes
    method: GET
    data_selector: codes
- name: advocate
  endpoint:
    path: /advocates
    method: GET
    data_selector: advocates
- name: referral_code
  endpoint:
    path: /referral/code
    method: GET
    data_selector: code
    params:
      code: string
      status: string
- name: advocate
  endpoint:
    path: /advocate
    method: GET
    data_selector: advocate
    params:
      string: string
      customerId: string
      name: string
      rewardDetails: rewardDetails
- name: reward_details
  endpoint:
    path: /reward/details
    method: GET
    data_selector: rewardDetails
    params:
      amount: string
      value: string
      description: string
notes:
- Webhook requests include signatures for validation.
- A conversion occurs when Friendbuy is notified of a purchase and can associate it
  to an advocate’s referral.
- Notify Friendbuy of a purchase through a Track Order call via the Friendbuy JavaScript
  embedded on your site.
- Common use cases for visitor status include depositing a session-based credit into
  a referred user’s shopping cart and determining if a friend offer email capture
  widget should be shown.
- The reward webhook is the preferred method for depositing credit or points into
  an advocate’s account in your system.
- The unsubscribe webhook can be used to update your master opt-out list with all
  users who unsubscribe from friendbuy emails.
- The custom reward validation integration allows you to add custom criteria to determine
  whether or not Friendbuy should fulfill a reward to an advocate.
- It is best used with a reward delay, which is configured for a Referral and Sharing
  widget.
- When a Webhook receives a status code that is not a 200, we will attempt to retry
  the request every 15 minutes until 24 hours have passed or a response code of 200
  is received.
- For webhooks and integrations, when friendbuy sends a request to your endpoints,
  the signature will be included in the X-Friendbuy-Hmac-SHA256 header.
- Contact Friendbuy support for your key and secret.
- Use Bearer Token for authorization.
- All GET endpoints require either toDate and fromDate or pageToken.
- API uses Bearer Tokens for authorization.
- Webhooks should be set up for reward validation.
- All world timezones are supported.
- Use Bearer tokens for authorization.
- Common use cases for the Merchant API include creating purchases, signups, and custom
  events.
- All GET endpoints require either a toDate and fromDate or a pageToken.
- The base URL for all Friendbuy Merchant API endpoints is https://mapi.fbot.me/v1.
- The API supports generating personal referral links for customers.
- Purchase events can be tracked via the Merchant API.
- The Friendbuy Merchant API supports Bearer token authentication.
- Use of Attribution ID is no longer recommended.
- Requires Bearer token for authentication.
- Ensure to replace {access-token} with a valid token.
errors:
- '400 Bad Request: The request was malformed or semantically invalid'
- '401 Unauthorized: The request did not contain proper credentials'
- '404 Not Found: The requested resource could not be found'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'RETRY_LIMIT_EXCEEDED: Retry behavior has reached its limit without a valid response.'
- '400: Bad Request - Invalid input, object invalid'
- '404: Not Found - Campaign does not exist or is inactive.'
- '429: Too Many Requests - Too many requests'
- '404: Not Found - Not found - campaign does not exist or is inactive.'
- '422: Unprocessable Entity - Unprocessable Entity'
- '500: Internal Server Error - Internal Server Error (uncontrolled failure)'
- '401 Unauthorized: Check API key and permissions.'
- '404 Not Found: Ensure the endpoint exists.'
- '500 Internal Server Error: Try again later.'
- '400 Bad Request: Invalid input, object invalid'
- '404 Not Found: Not found - campaign does not exist or is inactive.'
- '422 Unprocessable Entity: Unprocessable Entity'
- '429 Too Many Requests: Too many requests'
- '500 Internal Server Error: Internal Server Error (uncontrolled failure)'
- 'error: The error name.'
- 'message: The error details.'
- 'code: The status code of the error.'
- 'reference: A reference string that can be sent to friendbuy for debugging.'
- 'error: string'
- 'message: string'
- 'code: number'
- 'reference: string'
- '401 Unauthorized: Check your token.'
- '401 Unauthorized: Recheck Bearer token or credentials'
- '404 Not Found: Check endpoint URL'
- '500 Internal Server Error: Retry the request'
- '400: Bad Request: Invalid input, object invalid'
- '422: Unprocessable Entity: Unprocessable Entity'
- '429: Too Many Requests: Too many requests'
- '500: Internal Server Error: Internal Server Error (uncontrolled failure)'
- error
- message
- code
- reference
- '401: Unauthorized - Invalid API key or secret'
- '404: Not Found - The requested resource does not exist'
- '422: Unprocessable Entity - The request was well-formed but was unable to be followed
  due to semantic errors'
- '400: Bad Request - Invalid input, object invalid.'
- '429: Too Many Requests - Rate limit exceeded.'
- '500: Internal Server Error - An error occurred on the server.'
- '200: OK'
- '422: Unprocessable Entity'
- '429: Too Many Requests'
- '500: Internal Server Error'
- '200 OK: 0 or more records are retrieved.'
- '400: Bad Request - The code or advocate are blocked or the code is otherwise invalid'
- '404: Not Found - Not found - takes place when a user does not have a ledger.'
- '401: Unauthorized - Invalid or missing authentication token'
- '429: Too Many Requests - Rate limit exceeded'
- 'error: An error occurred while processing the request.'
- 'message: Detailed error message.'
- 'code: HTTP status code.'
- 'reference: Reference for debugging.'
auth_info:
  mentioned_objects:
  - OauthToken
  - AuthProvider
  - NamedCredential
  - Bearer Token
  - customerId
  - token
  - secret
client:
  base_url: https://mapi.fbot.me/v1
  auth:
    type: bearer
    location: header
    header_name: Authorization
    flow: refresh_token
    token_url: /authorization
    client_id: 3fa85f64-5717-4562-b3fc-2c963f66afa
    client_secret: 95eb1c78-f77e-4c55-828e-17ed3e0163a2
    refresh_token: '{{ dlt.secrets[''api_refresh_token''] }}'
  paginator:
    type: page
    cursor_param: cursor
    page_size_param: pageSize
    default_page_size: 200
  headers:
    Accept: application/json
    X-FRIENDBUY-SIGNATURE-V2: Request body signature
    Content-Type: application/json
source_metadata: null
