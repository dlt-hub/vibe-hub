resources:
- name: nodes
  endpoint:
    path: /nodes/
    method: GET
    data_selector: nodes
- name: noderange
  endpoint:
    path: /noderange/
    method: GET
    data_selector: noderange
- name: power_state
  endpoint:
    path: /nodes/[nodename]/power/state
    method: GET
    data_selector: state
- name: reseat_node
  endpoint:
    path: /nodes/[nodename]/power/reseat
    method: POST
    data_selector: reseat
- name: next_boot_device
  endpoint:
    path: /nodes/[nodename]/boot/nextdevice
    method: POST
    data_selector: bootdevice
- name: identify_node
  endpoint:
    path: /nodes/[nodename]/identify
    method: POST
    data_selector: identify
- name: hardware_health
  endpoint:
    path: /nodes/[nodename]/health/hardware
    method: GET
    data_selector: health
- name: hardware_inventory
  endpoint:
    path: /nodes/[nodename]/inventory/hardware/all
    method: GET
    data_selector: inventory
- name: firmware_inventory
  endpoint:
    path: /nodes/[nodename]/inventory/firmware/all
    method: GET
    data_selector: firmware
- name: events_log
  endpoint:
    path: /nodes/[nodename]/events/hardware/log
    method: GET
    data_selector: events
- name: node
  endpoint:
    path: /nodediscover
    method: GET
    data_selector: nodediscover
    params: {}
- name: everything
  endpoint:
    path: /users/documentation/noderange.html
    method: GET
- name: rackmount
  endpoint:
    path: /users/documentation/attributeexpressions.html
    method: GET
- name: pdus
  endpoint:
    path: /users/documentation/noderange.html
    method: GET
- name: switches
  endpoint:
    path: /users/documentation/noderange.html
    method: GET
- name: noderange_examples
  endpoint:
    path: /noderange/examples
    method: GET
    data_selector: examples
    params: {}
- name: web_ui
  endpoint:
    path: /lenovo-confluent/
    method: GET
    data_selector: web interface
    params: {}
- name: web_interface
  endpoint:
    path: /lenovo-confluent/
    method: GET
- name: driver_update_media_package
  endpoint:
    path: /var/lib/confluent/public/os/<OS profile name>/boot/initramfs
    method: POST
    data_selector: driver_update_media_package_filename
    params: {}
- name: kernelargs_update
  endpoint:
    path: /var/lib/confluent/public/os/<OS profile name>/profile.yaml
    method: PATCH
    data_selector: kernelargs
    params: {}
- name: net_config_fixup
  endpoint:
    path: /var/lib/confluent/public/os/your-profile-here/scripts/pod.d/fixipoib
    method: POST
    data_selector: postscript
    params: {}
- name: events
  endpoint:
    path: /var/log/confluent/events
    method: GET
    data_selector: info
    params: {}
- name: nodediscover
  endpoint:
    path: /nodediscover
    method: GET
    data_selector: list
    params: {}
- name: networking
  endpoint:
    path: /networking/macs
    method: GET
    data_selector: macs
    params: {}
- name: o2
  endpoint:
    path: nodeattrib/o2
    method: SET
    data_selector: location
    params:
      location.height: 2
      location.rack: 4
      location.row: 1
      location.u: 32
- name: d1
  endpoint:
    path: nodeattrib/d1
    method: SET
    data_selector: enclosure
    params:
      enclosure.bay: 1
      enclosure.manager: smm1
- name: smm1
  endpoint:
    path: nodeattrib/smm1
    method: SET
    data_selector: location
    params:
      location.height: 2
      location.rack: 4
      location.row: 1
      location.u: 35
- name: collate_command
  endpoint:
    path: /collate
    method: GET
    data_selector: output
    params: {}
- name: collective_invite
  endpoint:
    path: /collective/invite
    method: POST
    data_selector: output
    params: {}
- name: collective_join
  endpoint:
    path: /collective/join
    method: POST
    data_selector: output
    params: {}
- name: collective_show
  endpoint:
    path: /collective/show
    method: GET
    data_selector: output
    params: {}
- name: collective_gencert
  endpoint:
    path: /collective/gencert
    method: POST
    data_selector: output
    params: {}
- name: collective_delete
  endpoint:
    path: /collective/delete
    method: DELETE
    data_selector: output
    params: {}
- name: attributes
  endpoint:
    path: /nodeattrib/attributes
    method: GET
    data_selector: attributes
    params: {}
- name: change_management_controller_password
  endpoint:
    path: /nodebmcpassword
    method: POST
    data_selector: response
    params: {}
- name: current_ip_configuration
  endpoint:
    path: /nodeconfig/current_ip
    method: GET
- name: change_ip_configuration
  endpoint:
    path: /nodeconfig/change_ip
    method: POST
- name: console_session
  endpoint:
    path: /nodeconsole
    method: OPEN
    data_selector: session_data
    params: {}
- name: nodediscover
  endpoint:
    path: /nodediscover
    method: GET
    data_selector: data
    params: {}
- name: firmware_report
  endpoint:
    path: /nodefirmware
    method: GET
    data_selector: firmware_info
- name: hardware_inventory
  endpoint:
    path: /nodeinventory
    method: GET
    data_selector: hardware
- name: layer2_route
  endpoint:
    path: /api/layer2route
    method: GET
    data_selector: routes
    params: {}
- name: license_management
  endpoint:
    path: /nodelicense
    method: GET
    data_selector: current_licenses
    params: {}
- name: list_media
  endpoint:
    path: /nodemedia/list
    method: GET
    data_selector: current_remote_media
    params: {}
- name: detach_all_media
  endpoint:
    path: /nodemedia/detachall
    method: POST
    data_selector: detach_response
    params: {}
- name: upload_media
  endpoint:
    path: /nodemedia/upload
    method: POST
    data_selector: upload_response
    params: {}
- name: attach_media
  endpoint:
    path: /nodemedia/attach
    method: POST
    data_selector: attach_response
    params: {}
- name: power_state
  endpoint:
    path: /nodepower
    method: GET
    data_selector: power_states
    params: {}
- name: change_power_state
  endpoint:
    path: /nodepower/change
    method: POST
    data_selector: change_state
    params: {}
- name: telemetry
  endpoint:
    path: /nodesensors
    method: GET
    data_selector: sensors
    params: {}
- name: nodeshell_command_execution
  endpoint:
    path: /nodeshell/execute
    method: POST
    data_selector: stdout
    params: {}
- name: servicedata
  endpoint:
    path: /servicedata
    method: GET
- name: stats_command
  endpoint:
    path: /stats
    method: GET
    data_selector: output
    params: {}
- name: node_attributes
  endpoint:
    path: /users/documentation/
    method: GET
    data_selector: nodes
    params: {}
- name: cpu1_temp
  endpoint:
    path: /nodes/n721/sensors/hardware/temperature/cpu1_temp.json
    method: GET
    data_selector: sensors
- name: cpu1_temp_bulk
  endpoint:
    path: /noderange/n721-n723/sensors/hardware/temperature/cpu1_temp.json
    method: GET
    data_selector: databynode
- name: confluent_user
  endpoint:
    path: /users/demouser
    method: POST
    data_selector: user
    params: {}
- name: nodes_stanza
  endpoint:
    path: /confluent2xcat
    method: GET
    data_selector: nodes.stanza
    params:
      output: nodes.stanza
- name: mac_csv
  endpoint:
    path: /confluent2xcat
    method: GET
    data_selector: mac.csv
    params:
      output: mac.csv
- name: nodediscover
  endpoint:
    path: /nodediscover
    method: GET
    data_selector: list
    params: {}
- name: nodeattrib
  endpoint:
    path: /nodeattrib
    method: POST
    data_selector: attributes
    params: {}
- name: nodediscover
  endpoint:
    path: /nodediscover/assign
    method: POST
- name: discovery_autosense
  endpoint:
    path: /confetty/show/discovery/autosense
    method: GET
    data_selector: enabled
    params: {}
- name: doca-host
  endpoint:
    path: /doca-host_3.0.0-058000-25.04-ubuntu2404_amd64.deb
    method: INSTALL
- name: doca-extra
  endpoint:
    path: /doca-extra
    method: INSTALL
- name: doca-ofed-userspace
  endpoint:
    path: /doca-ofed-userspace
    method: INSTALL
- name: mlnx-fw-updater
  endpoint:
    path: /mlnx-fw-updater
    method: INSTALL
- name: xpmem
  endpoint:
    path: /xpmem
    method: INSTALL
notes:
- Uses node-oriented configuration derived from a group.
- Default group called ‘everything’ is automatically added to every node.
- Node groups provide convenient shorthand for noderanges as well as a way to group
  attributes together.
- The API layer will automatically recognize a generic set attribute to string with
  expression syntax and import it as an expression.
- User access is set up without any user access by default.
- Usually a cluster uses the same username/password across the XCCs (xClarity Controllers).
- Membership in the everything group is automatic.
- Confluent is by default set up without any user access. To enable a user that can
  ssh into your server to access the web interface.
- Discovery is optional and can be skipped.
- For optimal results, the confluent server should be on the same network as the management
  ports.
- By default, confluent will assume it can use SNMPv1/v2c, community string `public`
  to communicate with the switch.
- If the wiring or configuration of set of nodes was incorrect at time of discovery,
  the situation can be corrected by doing manual discovery or by resetting the discovery
  process for the nodes.
- Output groups are sorted in descending size such that the topmost group is the largest.
- In order to perform restore, the confluent service must not be running.
- Currently nodedeploy only supports -n style deployment flows.
- Currently, there is no action that can change the insecure status of mounted URLs.
- The stats command helps analyze common numerical data such as performance numbers
  or temperatures.
- 'In xCAT if using SNMPv1, you can indicate your community globally in site: chtab
  key=snmpc site.value=public'
- SNMPv3 and an alternative method to specify SNMPv1 is through the switches table.
- Caution is warranted when using breakout cables as you may do with a switch like
  a G8332 to connect 4 systems to a single QSFP port.
- IPv6 and Domain name resolution may not work for Redfish-managed nodes
- Redfish management method not supported on FPC, SMM or SMM2
- xCAT genesis does not include support for Intel E810 or Mellanox ConnectX-6 Lx Ethernet
  adapters
- Occasional privilege errors from confluent commands
- XCC web interfaces opened from the confluent web GUI may spontaneously log out when
  entering the firmware update page
- Lenovo ThinkSystem generation “V3” systems may spontaneously reboot when using the
  nodefirmware command for certain firmware updates
- Http boot will fail for profile names with 84 or more characters
- 'Deployment interfaces must have IPv6 enabled, with at least an automatic fe80::
  address.'
- The OS repo URLs are set to the specific profile used to perform the deployment
  with confluent on a managed node.
- Confluent OS profile updates are not automatically applied on confluent updates.
- The ib=dhcp entry in the bootloader configuration file should be removed to avoid
  issues with booting.
- The sshd service must be manually configured to start automatically after deploying
  the stateless image.
- Updating the XCC backup firmware on Lenovo servers with nodefirmware may appear
  to succeed but updates the primary bank instead, when using the default *.zip file
  such as lnvgy_fw_xcc_qgx306n-1.00_anyos_comp.zip.
- The *.uxz file under the payloads directory may then be used to update the XCC backup
  firmware in the usual fashion.
- In some cases updating the XCC primary firmware with nodefirmware on Lenovo servers
  may fail with an error.
- After updating XCC or UEFI firmware, the 'Pending' status may not show if the system
  is managed via Redfish.
- nodefirmware may report an error on BMU type update when there is no actual error.
- When doing a nodefirmware update on a BMU type update, nodefirmware will return
  a pending status.
- When doing a nodefirmware update of LXUM firmware, nodefirmware will return a pending
  status.
- Updating confluent version 3.5 or less to confluent version 3.6.2 on SLES 15 may
  fail and show a message related to vendor change.
- Run the zypper up command with –allow-vendor-change option specified.
- The inability to use attribute expressions for passwords is expected behavior for
  security reasons. Allowing this functionality would allow passwords and username
  to be echoed in plain text.
- Running the apt-get install command can be interactive and so not suited for running
  through Confluent nodeshell command.
- Modifying the nodeshell command to have the DEBIAN_FRONTEND set to noninteractive
  will fix this issue
- 'To keep this issue from happening, install the following package: numactl-devel-2.0.18-2.el9.x86_64'
- This can occur if the InfiniBand interfaces used on the nodes in an MPI job in hpcx
  aren’t all running at the same speed.
- Updating the BFB on BlueField-3 adapters using doca-installer requires full path
  to *.bfb file
- Updating the BFB on BlueField-3 adapters using doca-installer may exit with “Broken
  pipe”
- The confluent network model does not currently map directly to the xCAT model.
- If wanting to indicate a static gateway for the sake of autodiscovery, set the net.ipv4_gateway
  attribute on a confluent group or confluent nodes.
- For SUSE Linux Enterprise 15, the HA module is required to be available for xCAT
  install to succeed.
- It is strongly recommended to also install lenovo-onecli.
- The default assures ability to use a local SQLite database.
- A user must be created on every confluent server to access.
- TLS certificate must be provided with private key and certificate paths specified.
- A minimum of 3 servers is required for redundancy in a collective.
- Most functions are enabled to be identical across a collective, however /networking
  and /discovery APIs are currently distinct per collective member.
- InfiniBand deployment is only supported in static mode.
- InfiniBand network configuration does not work as expected out of the box.
- Mellanox removes the middle two bytes (03:00) of their address during netboot.
- The driver update media package will typically be provided as a `*.iso` file.
- Place the driver update package cpio file into the OS profile being deployed, in
  the `boot/initramfs` directory.
- In the `profile.yaml` file in the `var/lib/confluent/public/os/<OS profile name>`
  directory, add the following to the kernelargs line.
- Update the profile to update the boot.ipxe and boot.img contents with the driver
  update media package file and kernelargs updates.
- Uses SNMP for device discovery
- Group inheritance can be used for scaling node definitions
- The setting must be defined for each Confluent management node, including all members
  of the collective if collective mode is in use.
- The setting defaults to 'True'.
- xCAT support for SNMP is now considered optional.
- Every rpm beginning with net-snmp must be exactly the same version.
- If root login by password is desired (if unspecified, only key based login over
  SSH will be allowed)
- The OS being deployed may prohibit ssh password login by root as a default, see
  `PermitRootLogin` in sshd_config for your distribution for more details.
- During the process of creating an xCAT stateless image under SLES 15.2, the xCAT
  genimage command may fail due to failure to locate the software packages in the
  distribution.
- Repetitive output such as 'aaa_base' not found in package names may be seen.
- A workaround for the problem would be to rename the file /install/sle15.2/x86_64/1/repodata
  to /install/sle15.2/x86_64/1/repodata-ignore.
- Once the stateless image creation process is completed, the above file should be
  restored to its original name.
- This is for a single-node install. Scale with nodeshell and arguments to make these
  steps unattended as needed.
- Note that these steps install a new version as opposed to replacing the older kernel
  version(s), so the system can be booted to the older kernel version(s) if needed.
- This step is optional, and is intended to keep all but the kernel packages at the
  base RHEL 9.5 levels. This is mainly for reproducibility of environment, but leaving
  this step out to allow all of the OS packages to be at the latest level is equally
  valid.
- This step is required since without it the mlnx-ofa_kernel-devel and mlnx-ofa_kernel-source
  packages will effectively be down-leveled to the ones not built for the errata kernel
  when installing the doca-ofed metapackage later.
- This is for a single-node install. Scale with nodeshell. Arguments to make these
  steps unattended have been included.
- DOCA must be installed before installing the GPU drivers to make sure the nvidia-peermem
  kernel module gets the right Infiniband symbols.
- When installing the nvidia-kmod-common package from the NVIDIA 570.124.06 local
  driver repo on RHEL 9.5 on an EFI-booted system, the /boot/efi/EFI/redhat/grub.cfg
  file, which is a 'stub' grub.cfg in the EFI system partition (ESP) that only points
  to /boot/grub2 for the full grub.cfg, is overwritten with a full grub.cfg and the
  grub.cfg in /boot/grub2 is not updated. To work around this, backup the grub.cfg
  in the ESP (this will be restored and the grub.cfg file in /boot/grub2 fixed after
  installing the GPU drivers).
- The nvidia-fabric-manager package is only necessary on 8-GPU HGX configs.
- While the CUDA local repo package can simply be installed locally on each compute
  node, this can take up a lot of local storage space. A more efficient way of making
  the CUDA local repo available to all compute nodes is to extract the files from
  the CUDA local repo package to a network share available to all compute nodes.
- The out-of-box Broadcom kernel modules will be installed under /lib/modules in the
  root filesystem, but, by default, won’t be included in the initramfs when it is
  updated.
errors:
- '500: Unexpected error - Media import already in progress for this media'
- '[LOG_CAT_MCAST] VMC Failed to join multicast, is_root 0. Unexpected event was received:
  event=13, str=RDMA_CM_EVENT_MULTICAST_ERROR, status=-22'
- '[LOG_CAT_MCAST] MCAST rank=21: Error in initializing vmc communicator'
- '[LOG_CAT_P2P] Failed to create MCAST comm'
- 'Warning: Failed to extract info-v0 - component may not exist in image or extraction
  not supported.'
- 'Warning: Failed to extract bl33-v0 - component may not exist in image or extraction
  not supported.'
- 'Warning: Failed to extract bl2-v0 - component may not exist in image or extraction
  not supported.'
- 'Warning: info-v0 component could not be extracted from the image.'
- 'Warning: Failed to extract firmware versions from the image bundle - Will not be
  able to verify post installation versions.'
- 'client_loop: send disconnect: Broken pipe'
auth_info:
  mentioned_objects: []
client:
  base_url: https://[server]/lenovo-confluent/
source_metadata: null
