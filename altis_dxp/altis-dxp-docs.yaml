resources:
- name: endpoint_data
  endpoint:
    path: /analytics/endpoint
    method: GET
    data_selector: data
    params: {}
- name: event_record
  endpoint:
    path: /analytics/event
    method: POST
    data_selector: event
    params: {}
- name: theme_structure
  endpoint:
    path: /themes/structure
    method: GET
- name: comment_header
  endpoint:
    path: /themes/comment-header
    method: GET
- name: starting_a_theme
  endpoint:
    path: /themes/starting
    method: GET
- name: the_loop
  endpoint:
    path: /themes/the-loop
    method: GET
- name: basic_loop
  endpoint:
    path: /themes/basic-loop
    method: GET
- name: complex_loops
  endpoint:
    path: /themes/complex-loops
    method: GET
- name: full_site_editing
  endpoint:
    path: /themes/full-site-editing
    method: GET
- name: security
  endpoint:
    path: /modules/security
    method: GET
    data_selector: require-login
    params: {}
- name: local
  endpoint:
    path: /environments/local
    method: GET
    data_selector: require-login
    params: {}
- name: ci
  endpoint:
    path: /environments/ci
    method: GET
    data_selector: cloud.cavalcade
    params: {}
- name: staging
  endpoint:
    path: /environments/staging
    method: GET
    data_selector: my-project.twitter-oauth2-token
    params: {}
- name: production
  endpoint:
    path: /environments/production
    method: GET
    data_selector: my-project.twitter-oauth2-token
    params: {}
- name: altis_updates
  endpoint:
    path: /.github/dependabot.yml
    method: POST
    data_selector: updates
    params:
      open-pull-requests-limit: 15
- name: auto_merge
  endpoint:
    path: /.github/auto-merge.yml
    method: POST
    data_selector: match
    params:
      dependency_name: altis/*
      dependency_type: all
      update_type: semver:patch
- name: code_review_process
  endpoint:
    path: /code-review/process
    method: GET
    data_selector: process_details
    params: {}
- name: error_handling
  endpoint:
    path: /code-review/errors
    method: GET
    data_selector: error_details
    params: {}
- name: pre-launch_checklist
  endpoint:
    path: /pre-launch/checklist
    method: GET
    data_selector: checklist_items
    params: {}
- name: domains_hosted_on_altis
  endpoint:
    path: /domains/hosted/on/altis
    method: GET
    data_selector: domains
    params: {}
- name: environment
  endpoint:
    path: /environment/configuration
    method: GET
    data_selector: environment_details
    params: {}
- name: database_migration
  endpoint:
    path: /migrating/database
    method: POST
    data_selector: migration_steps
    params: {}
- name: uploads_transfer
  endpoint:
    path: /transferring/uploads
    method: POST
    data_selector: upload_steps
    params: {}
- name: cloud_email
  endpoint:
    path: /modules/cloud/email-from-address
    method: GET
    data_selector: modules.cloud.email-from-address
    params: {}
- name: cms_branding
  endpoint:
    path: /modules/cms/branding
    method: GET
    data_selector: modules.cms.branding
    params: {}
- name: seo_enabled
  endpoint:
    path: /modules/seo/enabled
    method: GET
    data_selector: modules.seo.enabled
    params: {}
- name: backups
  endpoint:
    path: /backups
    method: GET
- name: export
  endpoint:
    path: /export
    method: POST
    data_selector: export_data
    params: {}
- name: import
  endpoint:
    path: /import
    method: POST
    data_selector: import_data
    params: {}
- name: xray_requests
  endpoint:
    path: /xray/requests
    method: GET
    data_selector: requests
    params: {}
- name: Email Logging
  endpoint:
    path: /cloud/dashboard/logs/
    method: GET
- name: instance_healthcheck
  endpoint:
    path: /__instance_healthcheck
    method: GET
    data_selector: status
- name: application_healthcheck
  endpoint:
    path: /__healthcheck
    method: GET
    data_selector: status
- name: redis_configuration
  endpoint:
    path: /configuration/redis
    method: POST
    data_selector: result
    params:
      redis: false
- name: login_logo
  endpoint:
    path: /content/site-logo.svg
- name: favicon
  endpoint:
    path: /content/favicon.png
- name: Block Theme Templates
  endpoint:
    path: /block-theme/templates
    method: GET
    data_selector: templates
    params: {}
- name: Template Parts
  endpoint:
    path: /block-theme/template-parts
    method: GET
    data_selector: template_parts
    params: {}
- name: Block Patterns
  endpoint:
    path: /block-theme/block-patterns
    method: GET
    data_selector: block_patterns
    params: {}
- name: clean_html
  endpoint:
    path: clean_html
    method: function
    data_selector: ''
    params:
      password: string
      userId: int
- name: print_clean_html
  endpoint:
    path: print_clean_html
    method: function
    data_selector: ''
    params:
      password: string
      userId: int
- name: wp_hash_password
  endpoint:
    path: wp_hash_password
    method: function
    data_selector: ''
    params:
      password: string
      userId: int
- name: wp_check_password
  endpoint:
    path: wp_check_password
    method: function
    data_selector: ''
    params:
      password: string
      userId: int
- name: wp_set_password
  endpoint:
    path: wp_set_password
    method: function
    data_selector: ''
    params:
      password: string
      userId: int
- name: local_avatars_config
  endpoint:
    path: /altis/cms/local-avatars
    method: POST
    data_selector: local-avatars
    params:
      enabled: false
- name: upload_limit
  endpoint:
    path: /simple_local_avatars_upload_limit
    method: POST
    data_selector: upload_limit
    params:
      bytes: 2097152
- name: custom-module
  endpoint:
    path: /content/mu-plugins/custom-module/load.php
    method: POST
    data_selector: modules
    params: {}
- name: A/B Tests
  endpoint:
    path: /altis/analytics/experiments/register_post_ab_test
    method: POST
    data_selector: results
    params: {}
- name: event
  endpoint:
    path: /wp-json/wp/v2/events
    method: GET
    data_selector: events
    params: {}
- name: goal_tracking
  endpoint:
    path: /analytics/optimization-framework/goal-tracking
    method: GET
    data_selector: goals
    params: {}
- name: personalization_block
  endpoint:
    path: /personalization
    method: GET
    data_selector: content
    params: {}
notes:
- The first time you run Local Server, it may take a little longer than usual, as
  it downloads the containers.
- Themes are a core concept of WordPress.
- Altis includes a minimal starter theme out-of-the-box.
- Plugins can be managed via Composer dependencies.
- Some plugins are not available natively on Packagist, and are available only via
  the WordPress.org Plugin Repository.
- Different Linux distributions will have different PHP versions in their package
  repositories.
- Your locally installed PHP version is only a prerequisite to install Altis. The
  actual PHP version to be used when running your project(s) is provided as a docker
  container, specific to each Altis version we maintain.
- Altis is multisite by default, and multisite only.
- The filesystem is read-only.
- Bug fix versions are generally not synchronised.
- Only the latest module major release and the 0 release are supported.
- Errors are highlighted within GitHub, under the review section.
- JavaScript code should not be minified and instead should be built via the build
  process.
- Unbounded queries should be avoided, as they quickly turn into scaling issues.
- Avoid writing to the database on page views, as this can cause a high level of load
  on the database server.
- Cache any remote data to improve performance and reduce variability.
- Avoid meta value queries — meta tables do not have MySQL indexes on the meta_value
  column
- Limit queries to 100 items — the Altis standards limit posts_per_page to 100
- All dynamic parameters in database queries must be escaped for the SQL query to
  avoid SQL injection bugs
- Escaping is used to ensure that data is safe to be output to the browser
- All user input must be validated and sanitized before being used in the codebase
- Nonces should be checked on every request which performs a destructive action
- Do not expose filenames — __FILE__ should not be used in admin menu slugs
- Debugging functions such as var_dump() and print_r() must not be used
- When built-in functions in Altis exist, they should be preferred over using PHP
  or third-party code
- Deprecated functions should not be used
- Only full PHP tags should be used
- PHP's timezone should not be changed via date_default_timezone_set()
- Call-time pass-by-reference calls are prohibited
- The backtick operator is not allowed
- Dynamic code constructs must not be used
- The goto operator should not be used
- Unicode byte-order marks (BOM) are not allowed
- Empty statements should not be used
- Translated text must follow specific rules to work correctly with static analysis
  tools and Altis' translation system
- In the event of an outage affecting the Altis Dashboard, use the backup email sysops@altis-dxp.com
  for urgent responses.
- Isolating and Debugging Issues - Altis Enterprise WordPress Documentation
- Altis does not take responsibility for your custom codebase, and cannot assist in
  errors which come from third-party plugins or your custom codebase.
- Altis provides a REST API to allow building fully decoupled frontends.
- Altis provides a REST API to allow building semi-decoupled frontends.
- CSS rules will be controlled via your React app, so you don't need any CSS rules
  in this file.
- You can now use this data in your React app. Note that you'll need to reference
  it as `window.HeadlessData` so that `ESLint` understands you are using a global
  variable.
- react-wp-ssr comes with several limitations that you should be aware of.
- Ensure that any custom code is heavily tested on development and staging environments
  before deploying to production.
- Login will be required on development and staging environments by default.
- Remove `require-login` on the production site after launch.
- Altis uses a WordPress Skeleton-style codebase layout, and you'll need to migrate
  to this style.
- Altis manages your wp-config for you, but you'll want to keep a copy of your existing
  configuration in case you need it later.
- 'If you run into any package version conflicts you can try the following steps:
  Remove existing vendor directory and composer.lock if present and try again.'
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Altis uses utf8mb4 MySQL database character set.
- Custom configuration in old wp-config.php should be migrated to .config/load.php.
- Module pre-releases are 'Release Candidates' and are not covered by the long term
  support policy.
- Altis includes support for multiple independent sites out-of-the-box.
- You must be authenticated as a super-admin to access the Network Admin.
- The Elasticsearch service is core to the advanced search and native analytics features
  of Altis.
- These local environment versions should be backwards compatible with older Altis
  versions but it is not guaranteed.
- Ensure your application is fully installed before carrying out tasks.
- Note this will only update bug fix and security releases of WordPress.
- If there is a new major version of WordPress, that will be included in a later version
  of Altis.
- Due to an issue in how Composer handles installation of composer-plugin packages
  the above step is required to ensure the new version of the required packages are
  used to manage the process.
- Files for intermediate image sizes are no longer created but handled entirely by
  Tachyon if modules.media.smart-media is enabled in your config, which is the default.
  This is only a breaking change if you have code that relies on fetching those files
  (not the original or full size image) directly by their path.
- Before deploying to Altis environments, you will need to clear the build cache using
  the 'Clear build cache' button.
- Some sites with large posts or large metadata sizes may encounter errors while reindexing
  which reference the payload size.
- Reindexing is not required for existing post content, however the new Indexables
  will require an initial index.
- Some objects like Contact may return nulls in deeply nested fields
- Altis v7 requires PHP 7.4 support.
- Yoast SEO is the most widely used and best in class SEO solution for WordPress
- The existing SEO features have been collectively replaced with the free version
  of Yoast SEO
- Clone & Amend allows editorial teams to work confidently on content updates and
  get approval before publishing
- Local Chassis is not compatible with devices using an ARM64 CPU as it relies on
  VirtualBox.
- HSTS is enabled by default for non local environments.
- Two-Factor Authentication is now required by default for Administrators and network
  Super-Admins.
- Altis v12 fully supports PHP 8.0 in both local and cloud environments.
- Altis v13 fully supports PHP 8.1 in both local and cloud environments.
- Support for versions of PHP earlier than 8.0 has been removed in Altis v13.
- The release of Altis v13 introduces the removal of support for PHP 7.4.
- The primary change is that we have un-bundled several parts of the Altis platform,
  with these features being available through plugins instead.
- Altis v15 introduces experimental support for PHP 8.2 in both local and cloud environments.
- Security support for PHP 7.4 has been removed.
- Altis v16 continues our experimental support for PHP 8.2 in both local and cloud
  environments.
- We’ve taken the slowest, most-used parts of WordPress, and re-implemented them to
  squeeze every drop of performance out of your site.
- The Analytics module has been removed and is now delivered through the new Altis
  Accelerate plugin.
- The Analytics module has been removed from the Altis platform.
- Google Tag Manager module is also removed as part of this release.
- PHP 8.1 and 8.2 are our recommended versions of PHP for Altis.
- PHP 8.0 is no longer supported in Altis.
- Extensible mechanism to allow for package-specific customizations of the docker-compose
  configuration
- Altis Advanced Security is an add-on to your existing Altis environments, and is
  not included as a standard part of your subscription.
- Altis Afterburner is our PHP extension designed specifically to turbocharge your
  WordPress performance on Altis Cloud.
- Should the Redis server disconnect or be unavailable for a period, the local cache
  will be cleared to prevent data race conditions.
- By default, the Audit log entries in this append-only cloud storage solution are
  kept indefinitely and are not subject to the same retention policies as other logs.
- At a minimum, your build script must install Composer dependencies in order for
  Altis to function.
- Supports running tasks to handle pre-deployment tasks such as minifying JavaScript,
  running webpack, compiling SASS.
- The maximum size of your built assets, including your codebase, is 640MB.
- The total elapsed time for a build cannot exceed 30 minutes.
- Altis Support is unable to assist with configuring access to private dependencies
  on third-party hosts.
- All static assets, uploaded files and cached pages generated by Altis are cached
  on a global CDN.
- Purging paths should be kept to only essential items as purging more than 1000 paths
  per month will incur overage charges.
- Due to AWS limitations, you cannot purge large numbers of paths at once.
- The purge_cdn_paths() function is limited to 10 wildcards or 2000 static paths.
- Requires setup of connected app in api
- Altis does not support an origin-push CDN setup.
- Reach out to Altis Cloud Support for assistance in third party CDN integration as
  it requires specific manual work by the Altis team.
- The command stores your authentication token with the Altis Dashboard in a private
  file in your profile.
- On Mac this file is stored in $HOME/Library/Application Support/altis-cli/config.json
- On Windows, if LOCALAPPDATA is defined, it is stored in $LOCALAPPDATA\altis-cli\config.json.
  Otherwise, it is stored in $USERPROFILE\Local Settings\Application Data\altis-cli\config.json
- On Linux, if the environment variable XDG_CONFIG_HOME is defined, it is stored in
  $XDG_CONFIG_HOME/altis-cli/config.json. Otherwise in $HOME/altis-cli/config.json
- Some objects may return nulls in deeply nested fields
- CLI sessions will time out after 20 minutes of inactivity, and have a hard limit
  of 60 minutes.
- Sandbox containers are completely replaced with a clean container when a new build
  is deployed.
- Importing is a destructive, non-reversible process.
- It is recommended to create a screen session before running search-replace.
- Accessing logs from the Altis Dashboard
- Log delivery to CloudWatch can be switched off, however this is not recommended
  as logs will not be available in the Altis Dashboard.
- X-Ray is on by default but can be turned off using the provided configuration.
- Altis uses MySQL-compatible servers running on Amazon Aurora, with an auto-scaling,
  replicated configuration.
- Any changes to the database configuration are considered to void your warranty,
  except as directed by the Altis team.
- Adjusting any configuration may cause catastrophic errors in your environments.
- The maximum attachment size is 10MB.
- Sending unsolicited email (spam) is not permitted and may lead to account termination.
- Altis supports geolocation targeting by default.
- When Geo Targeting is enabled, all page caches will be stored per country.
- Any changes to the health check configuration are considered to void your warranty,
  except as directed by the Altis team.
- To get the data in JSON format, send an Accept header with the value application/json
  or append ?_accept=json to the URL.
- Altis uses the TLSv1.2_2021 configuration by default.
- Customers with firewall customization packages may request custom TLS configuration.
- Custom configuration will only apply to traffic served by the web container, which
  does not include media or Tachyon.
- 'Nginx loads the following custom files from your project repository: .config/nginx-http-additions.conf
  and .config/nginx-additions.conf'
- Node.js hosting is available as an optional add-on to your Altis Cloud subscription,
  available on any plan.
- Currently, Altis only officially supports the Next.js framework running on Node.js
  v18, v20, or v21.
- Only use other frameworks if you are willing to maintain and debug the solution
  yourself.
- Build pipeline needs to produce a fully-complete, standalone directory with no other
  dependencies.
- Once created, builds are immutable, and your project will not be able to write or
  modify files while it is running.
- Strongly recommend against using Node add-ons (native dependencies) built with node-gyp.
- Node.js is an add-on to your existing Altis environments, and is not included as
  a standard part of your subscription.
- Node.js containers are attached to your existing Altis Cloud environment.
- Object cache behaviour is generally not user configurable, and is handled automatically
  for you by the Cloud module.
- Any changes to the cache configuration are considered to void your warranty, except
  as directed by the Altis team.
- Page caching is disabled on local environments, and due to non-production environments
  requiring authentication, will likely not be active during testing and QA.
- Response times for client requests are typically between 10 milliseconds and 30
  milliseconds when static files and pages are cached on the CDN.
- Response times for Batcache HIT requests are typically between 30 milliseconds and
  60 milliseconds.
- Average page generation time for a new WordPress install with the Twenty Twenty
  Two theme homepage is 150 milliseconds.
- Any changes to the storage configuration are considered to void your warranty, except
  as directed by the Altis team.
- Scheduled Tasks feature available in Altis.
- Altis runs on a read-only file system, and stores the uploads directory remotely.
- The cookie name is altis_session, rather than the default PHPSESSID in order to
  bypass CloudFront page caching.
- All static files on Altis Cloud are cached on the CDN for a long period of time.
- Due to the aggressive caching times, when files are changed it is necessary to reference
  the files by a new URL that will cause a different version to be saved on the CDN.
- The $version parameter can be defined dynamically, though should be optimized to
  only change when the file has changed.
- Uses Amazon CloudFront CDN to measure views.
- Page views statistics are collected in near-realtime and aggregated into monthly
  statistics.
- For information you don't want to store in your codebase, Altis provides the variables
  and secrets functionality.
- Changes to any values apply when the application container is next launched - this
  is typically at your next deploy.
- The root filesystem outside of the uploads directory is not writable on Altis.
- On Altis the uploads directory is a remote stream wrapper.
- User Agent is not detectable from PHP.
- The HTTP Referer header is not available in PHP.
- Direct access to PHP files is not allowed on Altis, outside of /wp-admin/*.
- All web requests are subject to a 60-second maximum execution.
- No custom PHP modules are supported.
- The WP_filesystem WordPress API is not currently supported on Altis.
- 'Maximum upload size: 1GB (1GB for media upload endpoints, and 50MB for all other
  requests)'
- 'PHP execution timeout: 60s'
- 'Cron task execution timeout: 1 hour'
- Provides a seamless implementation of reusable blocks into enterprise-level setups
  and workflows
- Improved user interface for block discovery, including search and filtering
- To add Full Site Editing (FSE) support to a theme, an index.html file in a directory
  called templates is required.
- Block Themes can use additional core blocks that map to classic functionality.
- Local avatars is enabled by default
- Default profile picture field on the Edit Profile page is hidden
- Altis introduces a fix to a bug where the main site on a network is hard-coded to
  contain `/blog/` prefix for posts by default.
- The prefix will always be used by the main site now, regardless of what permalink
  structure you choose in settings.
- By default the RSS Feeds are enabled. If you wish to disable it, set the `feeds`
  configuration property to `false`.
- By default XML RPC is enabled.
- In order for the test to function correctly, it needs WordPress to output the `<ab-test></ab-test>`
  Web Component (generated by the `output_ab_test_html_for_post()` function) that
  includes all the variations of the feature representation, so the front-end would
  be able to switch to the proper variation to serve to the visitor. As such, the
  built-in features will only work if the native WordPress functions are used, which
  are `the_title()` or `get_the_title()` for post title and `the_post_thumbnail()`
  or `get_the_post_thumbnail()` for featured image.
- In order for the A/B Testing feature to work properly, the variant switching needs
  to happen on the front-end, so the feature would only work with data the front-end
  can change in a Javascript-enabled browser.
- While `the_post_thumbnail()` is filtered to output the different variations as expected,
  `has_post_thumbnail()` is not filtered as it can be used in different situations
  than what the A/B Test is concerned with, and hence can break the expected functionality
  elsewhere.
- A built in click event goal is available out of the box which is used by the built
  in title A/B test feature.
- Goals can be registered in PHP or JavaScript.
- JavaScript should be enqueued in the <head> via the wp_enqueue_scripts action.
- The <personalization-block> must have a unique client-id attribute.
- The <personalization-block> must come after the associated templates.
errors:
- altis-review check must pass before merge
- false positives may be ignored with comments
- Multisite conversion may be required for non-multisite installations.
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- Can't deploy due to build size
- I click deploy, but nothing is happening
- Image parsing errors
- Account termination may occur if exceeding reasonable use of the email services.
- '500: Health check failed'
- '200: Health check successful'
auth_info:
  mentioned_objects: []
client:
  base_url: https://dashboard.altis-dxp.com
source_metadata: null
