resources:
- name: helm-configs
  endpoint:
    path: /etc/genestack/helm-configs
    method: GET
    data_selector: records
- name: kustomize
  endpoint:
    path: /etc/genestack/kustomize
    method: GET
    data_selector: records
- name: helm-chart-versions
  endpoint:
    path: /etc/genestack/helm-chart-versions.yaml
    method: GET
    data_selector: charts
- name: helm-configs
  endpoint:
    path: /etc/genestack/helm-configs
    method: GET
    data_selector: files
    params: {}
- name: kustomize
  endpoint:
    path: /etc/genestack/kustomize
    method: GET
    data_selector: scripts
    params: {}
- name: helm-chart-versions
  endpoint:
    path: /etc/genestack/helm-chart-versions.yaml
    method: GET
    data_selector: charts
    params: {}
- name: current
  endpoint:
    path: /current
    method: PUT
    data_selector: records
    params: {}
- name: archive
  endpoint:
    path: /archive
    method: GET
    data_selector: records
    params: {}
- name: image
  endpoint:
    path: /images
    method: GET
    data_selector: images
- name: router
  endpoint:
    path: /routers
    method: GET
    data_selector: routers
- name: network
  endpoint:
    path: /networks
    method: GET
    data_selector: networks
- name: subnet
  endpoint:
    path: /subnets
    method: GET
    data_selector: subnets
- name: security_group
  endpoint:
    path: /security-groups
    method: GET
    data_selector: security_groups
- name: server
  endpoint:
    path: /servers
    method: GET
    data_selector: servers
- name: keypair
  endpoint:
    path: /keypairs
    method: GET
    data_selector: keypairs
- name: kube_control_plane
  endpoint:
    path: /api/v1/control_plane
    method: GET
    data_selector: hosts
- name: kube_node
  endpoint:
    path: /api/v1/nodes
    method: GET
    data_selector: hosts
- name: router
  endpoint:
    path: /routers
    method: GET
- name: network
  endpoint:
    path: /networks
    method: GET
- name: subnet
  endpoint:
    path: /subnets
    method: GET
- name: security_group
  endpoint:
    path: /security-groups
    method: GET
- name: port
  endpoint:
    path: /ports
    method: GET
- name: floating_ip
  endpoint:
    path: /floating-ips
    method: GET
- name: keypair
  endpoint:
    path: /keypairs
    method: GET
- name: server
  endpoint:
    path: /servers
    method: GET
- name: general
  endpoint:
    path: /storage/classes/general
    method: GET
- name: general-multi-attach
  endpoint:
    path: /storage/classes/general-multi-attach
    method: GET
- name: general_storage
  endpoint:
    path: /storage/general
    method: GET
    data_selector: storageClasses
    params: {}
- name: general_multi_attach_storage
  endpoint:
    path: /storage/general-multi-attach
    method: GET
    data_selector: storageClasses
    params: {}
- name: namespace
  endpoint:
    path: /create-our-basic-openstack-namespace
    method: POST
- name: metallb_namespace
  endpoint:
    path: /etc/genestack/manifests/metallb/metallb-namespace.yaml
    method: POST
    data_selector: namespace
- name: metallb_installation
  endpoint:
    path: /opt/genestack/bin/install-metallb.sh
    method: POST
    data_selector: installation
- name: metallb_service_manifest
  endpoint:
    path: /etc/genestack/manifests/metallb/metallb-openstack-service-lb.yml
    method: POST
    data_selector: service_manifest
- name: mariadb_operator
  endpoint:
    path: /deploy-the-mariadb-operator
    method: GET
    data_selector: records
    params: {}
- name: mariadb_cluster
  endpoint:
    path: /deploy-the-mariadb-cluster
    method: GET
    data_selector: records
    params: {}
- name: memcached
  endpoint:
    path: /deploy-the-memcached-cluster
    method: GET
    data_selector: records
    params: {}
- name: metallb-namespace
  endpoint:
    path: /etc/genestack/manifests/metallb/metallb-namespace.yaml
    method: GET
- name: metallb-installation
  endpoint:
    path: /opt/genestack/bin/install-metallb.sh
    method: GET
- name: metallb-openstack-service-lb
  endpoint:
    path: /etc/genestack/manifests/metallb/metallb-openstack-service-lb.yml
    method: GET
- name: redis-operator
  endpoint:
    path: /opt/genestack/bin/install-redis-operator.sh
    method: POST
- name: redis-replication
  endpoint:
    path: /opt/genestack/bin/install-redis-replication.sh
    method: POST
- name: redis-sentinel
  endpoint:
    path: /opt/genestack/bin/install-redis-sentinel.sh
    method: POST
- name: mariadb_operator
  endpoint:
    path: /opt/genestack/bin/install-mariadb-operator.sh
    method: POST
    data_selector: output
    params: {}
- name: mariadb_cluster
  endpoint:
    path: /etc/genestack/kustomize/mariadb-cluster/overlay
    method: POST
    data_selector: output
    params: {}
- name: ovn.openstack.org/int_bridge
  endpoint:
    path: /
    method: POST
    data_selector: br-int
- name: ovn.openstack.org/bridges
  endpoint:
    path: /
    method: POST
    data_selector: br-ex
- name: ovn.openstack.org/ports
  endpoint:
    path: /
    method: POST
    data_selector: br-ex:bond1
- name: ovn.openstack.org/mappings
  endpoint:
    path: /
    method: POST
    data_selector: physnet1:br-ex
- name: ovn.openstack.org/availability_zones
  endpoint:
    path: /
    method: POST
    data_selector: az1
- name: ovn.openstack.org/gateway
  endpoint:
    path: /
    method: POST
    data_selector: enabled
- name: memcached
  endpoint:
    path: /opt/genestack/bin/install-memcached.sh
    method: POST
    data_selector: commands
    params: {}
- name: fluentbit_version
  endpoint:
    path: /etc/genestack/helm-chart-versions.yaml
    method: GET
    data_selector: fluentbit
    params: {}
- name: redis_operator
  endpoint:
    path: /opt/genestack/bin/install-redis-operator.sh
    method: POST
- name: redis_replication
  endpoint:
    path: /opt/genestack/bin/install-redis-replication.sh
    method: POST
- name: redis_sentinel
  endpoint:
    path: /opt/genestack/bin/install-redis-sentinel.sh
    method: POST
- name: ovn_annotations
  endpoint:
    path: /infrastructure-ovn-setup/#ovn-annotations
    method: GET
    data_selector: annotations
    params: {}
- name: httproute
  endpoint:
    path: /httproute
    method: GET
    data_selector: routes
    params: {}
- name: gateway
  endpoint:
    path: /gateways.gateway.networking.k8s.io
    method: GET
    data_selector: gateways
    params: {}
- name: flex-gateway
  endpoint:
    path: /etc/genestack/kustomize/gateway/nginx-gateway-fabric
    method: kubectl apply
    data_selector: gateways.gateway.networking.k8s.io
    params: {}
notes:
- 'Centralized Version Control: The helm-chart-versions.yaml file ensures that all
  services use consistent versions, reducing the risk of version mismatches during
  deployments.'
- 'Override Precedence: Configurations in /etc/genestack/helm-configs/<service_name>
  take precedence over those in /opt/genestack/base-helm-configs/<service_name>, allowing
  for flexible customization while maintaining baseline defaults.'
- Swift supports Object Versioning - multiple versions of the same object can be stored.
- Swift allows tagging of Object metadata for identification and processing state.
- Set custom error pages for any visitors accessing your static website, you may specify
  custom 401, 404 error pages or a catch all.
- Benefits of Object Expiration include Storage Management and Cost Efficiency.
- The OVN loadbalancers options are by default available within Genestack but is currently
  'tech preview' and not recommended for production use.
- Skyline UI currently limits the loadbalancer types to Amphora. This is a known issue
  and will be resolved in a future release.
- Swift allows the end user to store multiple versions of the same object so you can
  recover from an unintended overwrite or rollback of an object to an earlier date
  in time.
- This operation should have no operational impact on running VMs but should be performed
  during a maintenance window.
- 'Storage Management: Helps in managing and reclaiming storage space by removing
  outdated or unnecessary objects.'
- 'Cost Efficiency: Reduces storage costs by preventing accumulation of unneeded data.'
- The genestack code base will be assumed to be in /opt
- If running bootstrap with sudo, use -E to ensure environment is passed
- The OVN loadbalancers options are by default available within Genestack but is currently
  "tech preview" and not recommended for production use.
- Script can be found at scripts/hyperconverged-lab.sh
- Default components file is openstack-components.yaml
- Throughout the all our documentation and examples the genestack code base will be
  assumed to be in /opt.
- Script will deploy a hyperconverged lab environment on an OpenStack cloud.
- Do **NOT** use `cluster.local` as your domain. You will need to use a domain that
  you control.
- The lab is now ready for use
- This is the jump host address
- Do NOT use cluster.local as your domain. You will need to use a domain that you
  control and you will need to set the GATEWAY_DOMAIN variable to this prior to building
  your hyper-converged lab.
- Genestack assumes Kubernetes is present and available to run workloads on.
- The platform is designed to work with Kube-OVN and some form of persistent Storage.
- The Genestack Kubernetes deployment platform has a few dependencies that will need
  to be accounted for before running the deployment.
- 'The following dependencies are required: Kube-OVN, Persistent Storage.'
- The DNA of the OpenStack services has been built to scale, and be managed in a pseudo
  light-outs environment.
- Optional --region param
- The create-secrets.sh script by default creates a secret with a default region of
  *RegionOne*.
- Edit the /etc/genestack/manifests/metallb/metallb-openstack-service-lb.yml file
  following the comment instructions with the details of your cluster.
- The operator may take a minute to get ready, before deploying the Galera cluster,
  wait until the webhook is online.
- MariaDB has a base configuration which is HA and production ready.
- The operator may take a minute to get ready, before deploying the RabbitMQ cluster,
  wait until the operator pod is online.
- RabbitMQ has a base configuration which is HA and production ready. If you're deploying
  on a small cluster the aio configuration may better suit the needs of the environment.
- Make sure Prometheus Operator is deployed prior to running these commands. It will
  error out if the required CRDs are not already installed.
- Memcached has a base configuration which is HA and production ready. If you're deploying
  on a small cluster the aio configuration may better suit the needs of the environment.
- The file metallb-openstack-service-lb.yml is initially provided during bootstrap
  for genestack.
- If deploying on a small cluster, the aio configuration may better suit the needs
  of the environment.
- Run the libvirt deployment Script '/opt/genestack/bin/install-libvirt.sh'
- Once deployed you can validate functionality on your compute hosts with 'virsh'
- Memcached has a base configuration which is HA and production ready.
- If you're deploying on a small cluster the `aio` configuration may better suit the
  needs of the environment.
- Run the Fluent-Bit deployment Script `/opt/genestack/bin/install-fluentbit.sh`
- 'Error: helm-chart-versions.yaml not found at /etc/genestack/helm-chart-versions.yaml'
- Deploy Redis Operator and Replication cluster before deploying Sentinel.
- Run the libvirt deployment Script
- Validate functionality on your compute hosts with virsh
- The name of the integration bridge that will be used is 'br-int'.
- Comma separated list of bridges that will be created and plugged into OVS for a
  given node is 'br-ex'.
- Comma separated list of bridge mappings is 'br-ex:bond1'.
- Comma separated list of neutron mappings is 'physnet1:br-ex'.
- Colon separated list of Availability Zones a given node will serve is 'az1'.
- If set to 'enabled', the node will be marked as a gateway.
- The setup script can be fully automated by providing the required values as arguments.
- Run the Fluent-Bit deployment Script /opt/genestack/bin/install-fluentbit.sh
- The setup script will ask for a valid email address for use with ACME and the domain
  name for the gateway.
- The setup script will ask for a valid email address for use with ACME.
- The domain name for the gateway is required.
- Setup script asks for valid email address for use with ACME.
- Setup script asks for the domain name for the gateway.
errors:
- 'HTTP/1.1 401 Unauthorized: Recheck OAuth scopes or token expiration.'
- 'Error: helm-chart-versions.yaml not found at /etc/genestack/helm-chart-versions.yaml'
- 'Error: Could not extract fluentbit version from /etc/genestack/helm-chart-versions.yaml'
auth_info:
  mentioned_objects: []
client:
  base_url: https://api.rackspacecloud.com
  auth:
    type: oauth2
source_metadata: null
