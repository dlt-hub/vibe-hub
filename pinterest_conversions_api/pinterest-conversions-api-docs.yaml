resources:
- name: event_data
  endpoint:
    path: /ads.pinterest.com/advertiser/{ACCOUNT_ID}/conversions/event-history/
    method: GET
    data_selector: events
    params: {}
- name: general_permissions
  endpoint:
    path: /general_permissions
    method: GET
    data_selector: permissions
    params: {}
- name: product_specific_permissions
  endpoint:
    path: /product_specific_permissions
    method: GET
    data_selector: permissions
    params: {}
- name: ats_resource_permissions
  endpoint:
    path: /ats_resource_permissions
    method: GET
    data_selector: permissions
    params: {}
- name: LaunchPad Events
  endpoint:
    path: /launchpad/events
    method: GET
    data_selector: events
- name: CMP Events
  endpoint:
    path: /cmp/events
    method: GET
    data_selector: events
- name: ping
  endpoint:
    path: /ping
    method: GET
    data_selector: isLoaded
    params: {}
- name: getVendorList
  endpoint:
    path: /getVendorList
    method: GET
    data_selector: vendorList
    params: {}
- name: getAuditId
  endpoint:
    path: /getAuditId
    method: GET
    data_selector: AuditId
    params: {}
- name: resetAuditId
  endpoint:
    path: /resetAuditId
    method: POST
    data_selector: AuditId
    params: {}
- name: getConsentData
  endpoint:
    path: /getConsentData
    method: GET
    data_selector: consentData
    params: {}
- name: checkConsent
  endpoint:
    path: /checkConsent
    method: POST
    data_selector: consentResult
    params: {}
- name: accept
  endpoint:
    path: /accept
    method: POST
    data_selector: acceptResult
    params: {}
- name: reject
  endpoint:
    path: /reject
    method: POST
    data_selector: rejectResult
    params: {}
- name: addEventListener
  endpoint:
    path: /addEventListener
    method: POST
    data_selector: eventListenerResult
    params: {}
- name: removeEventListener
  endpoint:
    path: /removeEventListener
    method: POST
    data_selector: removeEventListenerResult
    params: {}
- name: Publisher Specific Opt-Outs
  endpoint:
    path: /opt-out/publisher-specific
    method: POST
    data_selector: optOutResponse
- name: Digital Advertising Alliance Opt-Out
  endpoint:
    path: /opt-out/daa
    method: POST
    data_selector: optOutResponse
- name: Publisher 1p Opt-Out
  endpoint:
    path: /opt-out/publisher-1p
    method: POST
    data_selector: optOutResponse
- name: emailIdentifiers
  endpoint:
    path: /api/v1/email-identifiers
    method: POST
    data_selector: data
    params: {}
- name: phoneNumbers
  endpoint:
    path: /api/v1/phone-numbers
    method: POST
    data_selector: data
    params: {}
- name: envelope
  endpoint:
    path: /ats/retrieveEnvelope
    method: GET
    data_selector: envelope
    params: {}
- name: conversionApiEvents
  endpoint:
    path: /ats/sendConversionApiEvents
    method: POST
    data_selector: events
    params: {}
- name: dataLayerEvents
  endpoint:
    path: /ats/detectDataLayerEvents
    method: POST
    data_selector: events
    params: {}
- name: Envelope API
  endpoint:
    path: /ats/envelope
    method: POST
    data_selector: identity_envelope
    params: {}
- name: conversions
  endpoint:
    path: /v1/conversions
    method: POST
    data_selector: data
- name: conversions_api
  endpoint:
    path: /api/v1/conversions
    method: POST
    data_selector: events
    params: {}
- name: event_types
  endpoint:
    path: /event-types
    method: GET
    data_selector: event_types
- name: required_parameters
  endpoint:
    path: /required-parameters
    method: GET
    data_selector: required_parameters
- name: user_data_keys
  endpoint:
    path: /user-data-keys
    method: GET
    data_selector: user_data_keys
- name: Meta
  endpoint:
    path: /meta/envelope
    method: GET
    data_selector: envelope
    params: {}
- name: Pinterest
  endpoint:
    path: /pinterest/account
    method: GET
    data_selector: account
    params: {}
- name: Snapchat
  endpoint:
    path: /snapchat/pixel
    method: GET
    data_selector: pixel
    params: {}
- name: TikTok
  endpoint:
    path: /tiktok/ad/account
    method: GET
    data_selector: account
    params: {}
- name: event
  endpoint:
    path: /path/to/event/endpoint
    method: POST
    data_selector: event_data
- name: Conversions
  endpoint:
    path: /v1/conversions
    method: POST
- name: Snap Pixel
  endpoint:
    path: /snapchat/pixel
    method: POST
    data_selector: data
    params: {}
- name: event_data
  endpoint:
    path: /send-event-data
    method: POST
    data_selector: events
    params: {}
- name: CAPI Integration
  endpoint:
    path: /api/conversions
    method: POST
    data_selector: events
    params: {}
- name: deals
  endpoint:
    path: /ats/deals
    method: GET
    data_selector: deals
    params: {}
- name: key_values
  endpoint:
    path: /key-values
    method: POST
    data_selector: key_values
- name: line_item
  endpoint:
    path: /line-items
    method: POST
    data_selector: line_items
- name: mapping_file
  endpoint:
    path: /uploads/akp
    method: POST
    data_selector: file_upload
    params: {}
- name: Send Identifiers From ESPs Using Detect Mode
  endpoint:
    path: /email-service-providers/using-detect-mode
    method: GET
    data_selector: records
- name: _lr_retry_request
  endpoint:
    path: /cookies/_lr_retry_request
    method: GET
    data_selector: description
    params: {}
- name: _lr_geo_location
  endpoint:
    path: /cookies/_lr_geo_location
    method: GET
    data_selector: description
    params: {}
- name: _lr_geo_location_state
  endpoint:
    path: /cookies/_lr_geo_location_state
    method: GET
    data_selector: description
    params: {}
- name: _lr_drop_match_pixel
  endpoint:
    path: /cookies/_lr_drop_match_pixel
    method: GET
    data_selector: description
    params: {}
- name: _lr_env_src_ats
  endpoint:
    path: /cookies/_lr_env_src_ats
    method: GET
    data_selector: description
    params: {}
- name: _lr_sampling_rate
  endpoint:
    path: /cookies/_lr_sampling_rate
    method: GET
    data_selector: description
    params: {}
- name: _lr_env
  endpoint:
    path: /cookies/_lr_env
    method: GET
    data_selector: description
    params: {}
- name: idl_env
  endpoint:
    path: /cookies/idl_env
    method: GET
    data_selector: description
    params: {}
- name: _lr_fb_env
  endpoint:
    path: /cookies/_lr_fb_env
    method: GET
    data_selector: description
    params: {}
- name: _lr_pairId
  endpoint:
    path: /cookies/_lr_pairId
    method: GET
    data_selector: description
    params: {}
- name: _lr_atsDirect
  endpoint:
    path: /cookies/_lr_atsDirect
    method: GET
    data_selector: description
    params: {}
- name: _lr_google_env
  endpoint:
    path: /cookies/_lr_google_env
    method: GET
    data_selector: description
    params: {}
- name: _lr_cached_events
  endpoint:
    path: /cookies/_lr_cached_events
    method: GET
    data_selector: description
    params: {}
- name: '*LASTREFRESHTIME'
  endpoint:
    path: /cookies/*LASTREFRESHTIME
    method: GET
    data_selector: description
    params: {}
- name: '*CREATEDAT'
  endpoint:
    path: /cookies/*CREATEDAT
    method: GET
    data_selector: description
    params: {}
- name: '*TYPE'
  endpoint:
    path: /cookies/*TYPE
    method: GET
    data_selector: description
    params: {}
- name: '*CONTENT'
  endpoint:
    path: /cookies/*CONTENT
    method: GET
    data_selector: description
    params: {}
- name: sidecar_bidders
  endpoint:
    path: /list_of_sidecar_enabled_bidders
    method: GET
    data_selector: bidders
    params: {}
- name: CAPI Integration
  endpoint:
    path: /ats/web
    method: POST
    data_selector: events
    params: {}
- name: universal_events
  endpoint:
    path: /universal/events
    method: POST
    data_selector: events
    params: {}
- name: user_data
  endpoint:
    path: /user/data
    method: POST
    data_selector: userData
    params: {}
- name: Meta
  endpoint:
    path: /meta/envelope
    method: GET
    data_selector: envelopes
- name: Pinterest
  endpoint:
    path: /pinterest/account
    method: GET
    data_selector: accounts
- name: Snapchat
  endpoint:
    path: /snapchat/pixel
    method: GET
    data_selector: pixels
- name: TikTok
  endpoint:
    path: /tiktok/account
    method: GET
    data_selector: accounts
- name: Meta CAPI
  endpoint:
    path: /meta/capi
    method: POST
- name: TikTok Events API
  endpoint:
    path: /tiktok/events
    method: POST
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
    params: {}
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
    params: {}
notes:
- For non-checkout events such as 'Add To Cart', 'Signup', and others, we recommend
  setting up a trigger event only on some pages to make sure they are not fired on
  every page load.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- 'Passwords must meet the following requirements: At least ten characters long, contain
  one lowercase character, contain one uppercase character, contain one number, contain
  one special character (~, !, @, #, $, %, ^, &, *, _, -, +, =, `, |, \, (, ), {,
  }, [, ], :, ;, ", '', <, >, ,, ., or ?)'
- You cannot add closed beta products to your subscription.
- If you already have most LiveRamp products in your subscription, the kits may not
  be available as an option for you.
- Invitation will expire after 7 days.
- ATS allows publishers to unlock greater monetization opportunities by enriching
  their addressable inventories without relying on third-party cookies.
- For brands, LaunchPad is a prerequisite for running Enhanced Client-Side Tags (eCST).
- For direct support regarding your ATS implementation, send an email to atsimplementation@liveramp.com.
- For direct support regarding non-ATS products (such as PreferenceLink and Privacy
  Manager), send an email to support-privacy-manager@liveramp.com.
- Privacy Manager has been deprecated since July 1st 2024.
- LaunchPad currently only supports Web platforms.
- To respect user privacy and align with GDPR requirements, ATS.js or LaunchPad should
  be loaded in the EU only after consent has been obtained.
- You can only install ATS using LaunchPad if the domains where you are running ATS
  are SSL-certified (`https`).
- It is only possible to select ATS configurations that are connected to approved
  placements.
- LaunchPad supports Google Analytics which allows you to track LaunchPad events in
  Google Analytics.
- For ATS to successfully communicate with your Consent Management Platform (CMP),
  make sure that the CMP loads before ATS.
- Enable debug mode in Console to print all notable events in the browser console
  log.
- Use querystring parameters to enable or disable debug mode.
- ATS can also be leveraged by marketers who deliver ads through partner platforms
  such as Pinterest, Meta, or TikTok.
- ATS expects a TCF v2.2 compatible consent string to be present before the ATS JavaScript
  library can be loaded.
- If consent is rejected, ATS.js will automatically remove the RampID envelope from
  the configured storage in the browser.
- ATS.js uses AWS Services to assess the user's geographic location based on their
  IP address.
- You can configure ATS in test mode while your placement is still pending approval.
- You can only install ATS using LaunchPad if your domains are SSL-certified.
- By default, the identity envelope is written to a first-party cookie.
- You must use cookies for storage if using a root domain; localStorage is always
  bound to the subdomain.
- Ensure identifiers are usable by demand by including them directly in your configuration.
- The library can only normalize plain-text email identifiers.
- Currently, detect mode can only accept ten-digit phone numbers.
- ATS.js script handles envelope refreshes and it does so every 30 minutes.
- This feature is currently in beta. Contact a LiveRamp representative to get this
  feature enabled.
- Deleting the ATS configuration without removing the code snippets will cause errors
  to be returned because calls are still being made to a configuration that does not
  exist.
- Ensure the envelope module is ready before calling ats.setAdditionalData.
- You must have an approved ATS placement to which you can link the SDK configuration.
- We recommend creating a separate Config ID for each of your iOS or Android titles.
- Ensure ATS is running on all Prebid-enabled pages
- If no LiveRamp identity envelope is returned in the response, it can indicate that
  there is no ATS.js running on the Prebid-enabled page or there is no function available
  to retrieve envelopes.
- No LiveRamp identity envelope is stored in a first-party cookie or local storage
  and thus there is no ‘assigned’ identity.
- The domains available to filter on are based on the Domains/Bundle ID section of
  the selected placement's details page.
- If the Overview section says that the placement is not receiving data, that indicates
  that no data are being sent to LiveRamp.
- If you are running Prebid in the EU, it is strongly recommended to include TCF Consent
  Management Module and TCF Control Module.
- Make sure you are running only one Prebid library/version on your page.
- If you are experiencing issues with the Analytics Adapter not sending data to our
  backend, update your Prebid module to at least version 7.6.0.
- ATS Analytics calculates its metrics using aggregate data (average of the averages).
  Because of this, you might see some discrepancies between your own calculations
  and ATS Analytics'.
- The Estimated Revenue calculation requires a minimum of 7 days of data.
- A single user logging in with multiple accounts and different emails may be assigned
  the same RampID.
- LiveRamp also supports sending offline events through our Offline Conversions API
  Programs in LiveRamp Connect.
- Requires configuration of API access within LiveRamp Console
- You can still call the function ats.sendConversionApiEvents() to send the event
  manually, even if you set the trigger option to 'Automatically'.
- For API implementations, you are required to include all the parameters in the required
  parameters table in your request payload.
- To use the conversions API, you need an access token.
- Event data can be collected via CSS selectors, URL, or data layer detection.
- Data Layer Detection V1 will be deprecated in favor of Data Layer Detection V2.
- For non-purchase events such as 'Add to Cart', 'Account Creation', and others, we
  recommend setting up a trigger event only on some pages to make sure they are not
  fired on every page load.
- Once you are done setting up the events, you may want to verify if your setup is
  working correctly in Meta Events Manager. After you start sending events, you should
  be able to verify them within 20 minutes.
- The Action Source is set to Website by default as the Snapchat CAPI Program only
  supports online web events for now.
- For non-checkout events such as 'Add To Cart', 'Signup', and others, it is recommended
  to set up a trigger event only on some pages to avoid firing on every page load.
- To authenticate requests to TikTok, you need to provide an access token generated
  in TikTok Ads Manager.
- The Data Layer Detection V1 method will be deprecated in the near future in favor
  of Data Layer Detection V2.
- The enhanced Online Conversions API is only available as an integration option in
  new ATS configurations.
- Some objects like Contact may return nulls in deeply nested fields
- You can only have one ATS Direct configuration per region.
- The New button on the Deals page will be disabled if you already have an ATS Direct
  configuration for the EU and U.S.
- Direct contact between stakeholders is generally required before managing deals
  in Console.
- A notification email is sent to the publisher when a new deal has arrived.
- Automatic key-values sync allows synchronization of all new active deals as Key-Values
  to GAM.
- The values of automatic key-values sync are excluded in GAM reporting by default.
- This integration requires you to still run ATS to generate the envelopes.
- The Google PAIR integration is currently available in beta.
- If you are running Amazon TAM as your header-bidding solution, you are not required
  to take any additional action within the Amazon UI for PAIR IDs to be picked up
  and passed.
- Integrating social logins with ATS.js
- This product is currently in open beta. Contact your LiveRamp representative to
  get this product activated for you.
- Do not capture URL strings as values in pdata.
- Do not include commas (",") or equals signs ("=") in keys or values
- Do not pass URL strings as values in pdata
- For online Activation use cases, a minimum of 25 devices must populate each segment
- Do not include more than 400 unique keys per tag ID
- Do not include the same key multiple times within the pdata passed in a given call
- For privacy reasons, the URL will be truncated before the first '?' or '=' character
  in the string.
- Identity envelopes must be base64 decoded before populating them into an eCST request.
- Do not pass URLs as custom data.
- Do not include commas (",") or equals signs ("=") in custom data.
- Make sure custom data are formatted correctly.
- Do not pass PII through custom data or "it"/"iv" query parameters.
- Understand how custom data macros work when they cannot pull in a value.
- Custom ID is Not Available for All Publishers
- 'Recurring Uploads: To account for newly registered users, we recommend uploading
  new files on a weekly basis.'
- Make sure to obtain hashed emails for users in the EU in compliance with GDPR. Some
  ESPs, such as Sailthru, provide macros that automatically generate hashed emails
  for you.
- Decrypting Envelopes requires access to additional LiveRamp services, such as the
  Identity Envelope Decryption API.
- In the European Union/European Economic Area, ATS requires a Transparency and Consent
  Framework (TCF) v2 string with LiveRamp listed as a vendor for all claimed purposes
  for envelope retrieval.
- In the U.S., ATS will honor the settings contained in a California Consumer Privacy
  Act (CCPA) string, but does not currently require its presence.
- Your envelopes expire every 15 days in the U.S. or 30 days internationally.
- The migration is easy, as we can handle the ATS configuration in Console for you.
- ATS is free for publishers and always will be, regardless of version or Console
  usage.
- Identity envelopes generated through Local Encoder will have a TTL of 15 days.
- ATS.js script handles envelope refreshes, and it does so every 30 minutes.
- 'Currently, you can activate web conversion and event data to the following platforms:
  Meta, Pinterest, Snapchat, TikTok.'
- Construct your payload using the keys listed under the Universal Key column.
- Add the platform-specific IDs below to the Account ID fields when you create the
  conversions API integration.
- Current Known Issues
- Upcoming System Downtimes
- Data Layer Detection allows users to push event data to the CAPI.
- Events without an identity envelope are supported for unauthenticated users.
- All consent strings provided before November 20 will still be valid.
- GPP strings will not be a requirement during the initial rollout of the functionality,
  however, it is strongly suggested that you implement this protocol as quickly as
  possible as it will become the new industry standard for conveying opt-in consent
  through the ad tech ecosystem in the U.S.
- You can now add multiple ATS for Web configuration for a single LaunchPad wrapper
  and select which approved countries and domains to set as loading rules.
- Improved email normalization within the ATS.js library to help reduce pre-processing
  effort.
- If ATS.js detects there is an opt-out, all cached conversion events will be removed
  from the browser storage.
- Fixed an issue regarding Incorrect dates displayed in the Performance insights screen
  for devices outside of the GMT+1 timezone.
- Fixed an issue that occurred when publishing an ATS for Web configuration in Console
  caused by AWS Cloudfront invalidation error.
- New level of permissioning has been introduced for ATS and ATS.js. User access permissions
  to specific ATS Placements and ATS JS configurations can now be individually controlled.
- Unnecessary polyfills and code to support IE11 have been removed, reducing the overall
  library size by 15%.
- New permissioning system in Console allows granular control over user operations.
- You can now view, create, edit, and delete templates.
- Save Privacy Manager configurations as templates and apply the templates to new
  or existing configurations.
- The Obtain Identifiers and Envelope Settings tabs have been combined into a single
  tab called Settings.
- The 'Envelope Storage' section has been renamed to 'Storage Options'.
- The 'Obtain Identifier' section has been renamed to 'Mode Selection'.
- Identifier detection settings are now grouped under a section called 'Detection
  Settings'.
- Effective July 1st 2024, Privacy Manager and PreferenceLink were no longer available.
- If you are migrating to another CMP, you might want to obtain all vendor configurations
  from Privacy Manager.
- Enables advertisers to efficiently send conversion events to Snapchat together with
  ATS envelopes.
- Talk to a LiveRamp representative if you want to enable the RideAlong functionality.
- If you are working with ATS for Web, no actions are required on your side as this
  update is automatically pushed to the wrapper.
- Some customers implementing ATS for Web may experience issues where the ATS library
  executes the envelopeModuleReady event listener before the envelope module is fully
  loaded.
- To make sure envelopeModuleReady is able to catch the event, you must make sure
  the event listener is registered before the ATS.js library is loaded.
- We'll always try to provide you with as much advance notice when we have any scheduled
  maintenance downtime.
errors:
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- '400 Bad Request: Check the request parameters.'
- '404 Not Found: Verify the endpoint path.'
- 'Invalid request body: when invalid data in the payload is sent to Console.'
- '401 Unauthorized: Check your API credentials'
- '429 Too Many Requests: Rate limit exceeded'
- '400: The Enhanced Client-Side Tag (eCST) will fail to fire properly if the macro
  leaves the "value" blank'
auth_info:
  mentioned_objects:
  - OauthToken
  - AuthProvider
  - NamedCredential
client:
  base_url: https://docs.liveramp.com
  auth:
    type: oauth2
source_metadata: null
