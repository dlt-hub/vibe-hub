resources:
- name: signatureVerificationRequest
  endpoint:
    path: /signatureVerification
    method: POST
    data_selector: result
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
- name: signatureVerificationRequest
  endpoint:
    path: /signatureVerificationRequest
    method: POST
    data_selector: params
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
      receiptLines:
        MERCHANT:
        - format:
          - BOLD
          - DOUBLE_HEIGHT
          type: TEXT
          value: 'Paymentsense Connect    '
        - format:
          - BOLD
          - DOUBLE_HEIGHT
          type: TEXT
          value: 0808 274 3307
        - format: []
          type: TEXT
          value: www.paymentsense.com
        - format: []
          type: TEXT
          value: M:540436505185116
        - format: []
          type: TEXT
          value: 'TID:22161339         '
        - format: []
          type: TEXT
          value: S46
        - format: []
          type: TEXT
          value: TABLE:17131869
        - format: []
          type: TEXT
          value: HANDSET:1
        - format: []
          type: TEXT
          value: VISA CREDIT
        - format: []
          type: TEXT
          value: 'AID: A0000000031010'
        - format:
          - BOLD
          - DOUBLE_HEIGHT
          type: TEXT
          value: CREDITO DE VISA
        - format: []
          type: TEXT
          value: '************0119'
        - format: []
          type: TEXT
          value: EXP 12/22
        - format: []
          type: TEXT
          value: PAN SEQ NO. 01
        - format: []
          type: TEXT
          value: STT 07/09
        - format: []
          type: TEXT
          value: ICC
        - format: []
          type: TEXT
          value: SALE
        - format: []
          type: TEXT
          value: AMOUNT            £31.42
        - format:
          - BOLD
          - DOUBLE_HEIGHT
          type: TEXT
          value: TOTAL             £31.42
        - format: []
          type: TEXT
          value: SIGN BELOW
        - format: []
          type: TEXT
          value: '........................'
        - format: []
          type: TEXT
          value: PLEASE DEBIT MY ACCOUNT
        - format: []
          type: TEXT
          value: 10/08/17 17:13
        - format: []
          type: TEXT
          value: AUTH CODE:565813
        - format: []
          type: TEXT
          value: TXN 0079
        - format: []
          type: TEXT
          value: '     MERCHANT COPY      '
        - format: []
          type: TEXT
          value: ' PLEASE RETAIN RECEIPT'
      applicationId: A0000000031010
      applicationLabel: CREDITO DE VISA
      authCode: '565813'
      cardholderVerificationMethod: SIGNATURE
      paymentMethod: ICC_CHIP
      primaryAccountNumber: '************0119'
- name: signature_verification
  endpoint:
    path: /verifySignature
    method: POST
    data_selector: result
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
      applicationId: A0000000031010
      applicationLabel: CREDITO DE VISA
      authCode: '565813'
      cardholderVerificationMethod: SIGNATURE
      paymentMethod: ICC_CHIP
      primaryAccountNumber: '************0119'
- name: signatureVerificationRequest
  endpoint:
    path: /signatureVerificationRequest
    method: POST
    data_selector: params
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
- name: signature_verification_request
  endpoint:
    path: /path/to/signatureVerificationRequest
    method: POST
    data_selector: result
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
- name: verify_signature
  endpoint:
    path: /verify_signature
    method: POST
    data_selector: params
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
      applicationId: A0000000031010
      applicationLabel: CREDITO DE VISA
      authCode: '565813'
      paymentMethod: ICC_CHIP
      primaryAccountNumber: '************0119'
      cardholderVerificationMethod: SIGNATURE
      receiptLines: {}
- name: signatureVerificationRequest
  endpoint:
    path: /verifySignature
    method: POST
    data_selector: params
    params:
      timeout: 80
      tid: '22161339'
      transactionType: SALE
      applicationId: A0000000031010
      applicationLabel: CREDITO DE VISA
      authCode: '565813'
      paymentMethod: ICC_CHIP
      primaryAccountNumber: '************0119'
      cardholderVerificationMethod: SIGNATURE
      receiptLines: {}
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
    params: {}
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
    params: {}
- name: terminals_reports
  endpoint:
    path: /pac/terminals/{tpi}/reports
    method: GET
- name: terminals_transactions
  endpoint:
    path: /pac/terminals/{tpi}/transactions
    method: POST
- name: tables
  endpoint:
    path: /pat/tables
    method: PUT
- name: specific_table
  endpoint:
    path: /pat/tables/{TableName}
    method: GET
- name: RetailTerminals
  endpoint:
    path: /rest/api#!/PAC32Terminals/RetailTerminals
    method: GET
- name: TransactionOnTPI
  endpoint:
    path: /rest/api#!/PAC32Transactions/TransactionOnTPI
    method: POST
- name: TransactionsByRequestId_0
  endpoint:
    path: /rest/api#!/PAC32Transactions/TransactionsByRequestId_0
    method: GET
- name: VerifySignature
  endpoint:
    path: /rest/api#!/PAC32Transactions/VerifySignature
    method: POST
- name: TransactionsByRequestId
  endpoint:
    path: /rest/api#!/PAC32Transactions/TransactionsByRequestId
    method: DELETE
- name: RetailReportRequest
  endpoint:
    path: /rest/api#!/PAC32Reports/RetailReportRequest
    method: POST
- name: Tables
  endpoint:
    path: /rest/api#!/PAT32Tables/Tables
    method: GET
- name: OpenTable
  endpoint:
    path: /rest/api#!/PAT32Tables/OpenTable
    method: POST
- name: TableReceipt
  endpoint:
    path: /rest/api#!/PAT32Tables/TableReceipt
    method: POST
- name: PATReport
  endpoint:
    path: /rest/api#!/PAT32Reports/PATReport
    method: POST
- name: access_token
  endpoint:
    path: /v1/access-tokens
    method: POST
- name: payment_status
  endpoint:
    path: /v1/payments/{access-token}
    method: GET
- name: cross_reference_payment
  endpoint:
    path: /v1/cross-reference-payments/{access-token}
    method: POST
- name: payment
  endpoint:
    path: /ConnectE/RestApi
    method: POST
    data_selector: transactionResult
- name: cross_reference_payments
  endpoint:
    path: /v1/cross-reference-payments/{access-token}
    method: GET
- name: access_tokens
  endpoint:
    path: /v1/access-tokens
    method: GET
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
    params: {}
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
- name: path_2958
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2958
    method: GET
    data_selector: records
- name: path_2959
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2959
    method: GET
    data_selector: records
- name: path_2960
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2960
    method: GET
    data_selector: records
- name: path_2961
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2961
    method: GET
    data_selector: records
- name: path_2962
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2962
    method: GET
    data_selector: records
- name: path_2963
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2963
    method: GET
    data_selector: records
- name: path_2964
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2964
    method: GET
    data_selector: records
- name: path_2965
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2965
    method: GET
    data_selector: records
- name: path_2966
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2966
    method: GET
    data_selector: records
- name: path_2967
  endpoint:
    path: /services/data/vXX.X/sobjects/Path 2967
    method: GET
    data_selector: records
- name: access_tokens
  endpoint:
    path: /v1/access-tokens
    method: POST
    data_selector: null
    params: {}
- name: connected_terminals
  endpoint:
    path: /connectedTerminals
    method: POST
    data_selector: result
    params: {}
- name: result
  endpoint:
    path: /connectedTerminals
    method: GET
    data_selector: result
    params: {}
- name: terminal_details
  endpoint:
    path: /terminalDetails
    method: POST
    data_selector: result
    params:
      tid: N/A
- name: terminal
  endpoint:
    path: /terminalDetails
    method: GET
    data_selector: result
    params: {}
- name: transaction
  endpoint:
    path: /transaction
    method: POST
    data_selector: result
    params:
      tid: terminal_id
      currency: GBP
      amount: 100
- name: result
  endpoint:
    path: ''
    method: ''
    data_selector: result
    params: {}
- name: request_message
  endpoint:
    path: /cancelTransaction
    method: POST
    data_selector: params
    params:
      tid: terminal_identifier
- name: response_message
  endpoint:
    path: /cancelTransaction
    method: POST
    data_selector: result
    params: {}
- name: request_message
  endpoint:
    path: /duplicate
    method: POST
    data_selector: params
    params:
      tid: N/A
- name: result
  endpoint:
    path: ''
    method: ''
    data_selector: ''
    params: {}
- name: report
  endpoint:
    path: /complete/report
    method: POST
    data_selector: result
    params:
      tid: N/A
- name: report_response
  endpoint:
    path: /report/response
    method: GET
    data_selector: result
    params: {}
- name: previousSessionIssuerTotals
  endpoint:
    path: /previousSessionIssuerTotals
    method: GET
    data_selector: previousSessionIssuerTotals
- name: currentSessionTotals
  endpoint:
    path: /currentSessionTotals
    method: GET
    data_selector: currentSessionTotals
- name: previousSessionTotals
  endpoint:
    path: /previousSessionTotals
    method: GET
    data_selector: previousSessionTotals
- name: currentSessionTransactionNumbers
  endpoint:
    path: /currentSessionTransactionNumbers
    method: GET
    data_selector: currentSessionTransactionNumbers
- name: previousSessionTransactionNumbers
  endpoint:
    path: /previousSessionTransactionNumbers
    method: GET
    data_selector: previousSessionTransactionNumbers
- name: reportLines
  endpoint:
    path: /reportLines
    method: GET
    data_selector: reportLines
- name: signatureVerificationRequest
  endpoint:
    path: /signatureVerificationRequest
    method: POST
    data_selector: params
- name: response_message
  endpoint:
    path: /signatureVerificationRequest
    method: POST
    data_selector: result
    params: {}
- name: notification
  endpoint:
    path: /terminalNotification
    method: POST
    data_selector: params
    params: {}
notes:
- The terminal will remain in a 'BUSY' state until this request is replied to / times
  out.
- Messages over the WebSocket connection use JSON following the JSON-RPC2 Protocol.
- Authorization header must use Basic Authorization with API key as password
- Software-House-Id and Installer-Id headers are required in every request
- We are no longer accepting integrations using this API version. Please use the latest
  API version (v2) if you are integrating for the first time.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Some objects like Contact may return nulls in deeply nested fields
- The suggested polling frequency is 1 second for Pay-At-Counter.
- The suggested polling frequency is 5 seconds for Pay-At-Table.
- Connect may enforce a delay of 0.1 seconds between requests.
- Whenever useful and possible, Connect will include messages in its responses intended
  and tailored for user feedback.
- When transactions reach the signature verification stage, several fields are provided.
- Each location that uses Connect will need its own host address and API token.
- The API key should be provided in the URI to authorize the connection.
- Two new query parameters have been introduced in the connection string to identify
  the partners to which an account relates.
- The values will be provided by Paymentsense.
- Ability to configure the Host and API Key values for each till.
- Before entering the QA process, you'll need to ensure that all of the items in the
  Integration Checklist have been implemented.
- Ensure that the PDQ is connected to the internet by following the steps in the provided
  documentation.
- 'Check if the PDQ has obtained a valid IP address (either from DHCP or its own static
  settings) by checking the colour of the network symbol. If the network symbol is:
  Green: The terminal has obtained an IP address through DHCP or through a static
  IP if this has been set up. Please note that any static IP will make this symbol
  green, even if the settings are not valid for your network. White: There is no network
  activity. Please check that the network cable has been correctly inserted into the
  black box/base and the router/switch. If you are using an iWL, please ensure that
  the power cable has been correctly inserted into the base and that the PDQ is paired
  to the base. The base pairing can be updated by following the instructions here.
  Red: The terminal is not able to obtain an IP address from the network. This could
  be caused by no DHCP response or if a network conflict has been detected.'
- Cashback will still need to be enabled on the PDQ regardless of how it is added
  to the transaction.
- Some PDQs have built-in printers and others do not.
- Access tokens can be generated from the Connect-E REST API and have a lifetime of
  30 minutes.
- To avoid charging a cardholder more than once we recommend that you store the created
  access tokens against a session or order.
- We have seen issues when new access tokens are issued on page load then there is
  a connectivity loss during the transaction.
- Each order should pass a unique and identifiable order ID in the OrderId field.
- Connect-E Wallet allows cardholders to check out with Apple Pay™ and Google Pay™.
- Apple Pay is currently available for Dojo and Cybersource only
- To enable Apple Pay, you must serve the domain verification file that must to be
  located at https://yourdomain/.well-known/apple-developer-merchantid-domain-association
  for each domain/subdomain that uses Apple Pay as a payment method.
- If `webHookUrl` is passed when creating an access token we'll make a `POST` to that
  url when the transaction is complete.
- If the `POST` to the `webHookUrl` fails or doesn't return either an HTTP `200` or
  `201` we will retry with an exponential backoff starting with a 10 second delay
  up to a maximum delay of 600 seconds.
- The currency this terminal or request is using is represented by ISO 4217.
errors:
- 'REQUEST_TIMEOUT: If no reply to this request is received.'
- 'Parse Error: -32700: Invalid JSON was received by the server. An error occurred
  on the server while parsing the JSON text.'
- 'Invalid Request: -32600: The JSON sent is not a valid Request object.'
- 'Method Not Found: -32601: The method does not exist / is not available.'
- 'Invalid Param: -32602: Invalid method parameter(s).'
- 'Internal Error: -32603: Internal JSON-RPC error. Default error code for unexpected/uncaught
  errors.'
- 'Connect Error: -32070: A Connect error has occurred on the server and further information
  is unavailable.'
- 'Invalid Param Value: -32071: One or more of the received parameter values are invalid.'
- 'Request Not Processed: -32072: The received request has not been processed.'
- 'Response Not Processed: -32073: The received response has not been processed.'
- 'Request Timed Out: -32074: The Connect To EPoS request has timed out.'
- 'Unavailable Terminal: -32075: The request on a terminal was unable to be processed
  as the terminal is unavailable.'
- 'Connection Discontinued: -32076: Notifies the EPoS that the websocket connection
  has been discontinued.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- Invalid parameter or an unavailable terminal
- 409 – Report data retrieval in progress
- 423 – Terminal busy due to pending signature verification
- This value should be configurable in your EPoS since we provide each customer site
  with their own host.
- This value should be configurable in your EPoS so each customer site can have their
  own key and each till can be identified.
- '400: Invalid Request'
- '401: Issue with Access Token'
- '404: No Access Token Supplied'
- '500: Internal Server Error'
- 'Error Code: -32700, -32600, -32601, -32602, -32603, -32070, -32071, -32072, -32073,
  -32074, -32075, -32076'
auth_info:
  mentioned_objects:
  - OauthToken
  - AuthProvider
  - NamedCredential
client:
  base_url: https://web.e.test.connect.paymentsense.cloud
  auth:
    type: oauth2
source_metadata: null
