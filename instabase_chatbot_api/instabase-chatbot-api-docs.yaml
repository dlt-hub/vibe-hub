resources:
- name: queries
  endpoint:
    path: /v2/queries
    method: POST
    data_selector: results
    params: {}
- name: queries
  endpoint:
    path: /v2/queries
    method: POST
    data_selector: results
    params: {}
- name: create_conversations
  endpoint:
    path: /api-sdk/api-reference/conversations/create-conversation
    method: POST
    data_selector: response
    params: {}
- name: run_deployment
  endpoint:
    path: /api-sdk/api-reference/runs/run-deployment
    method: POST
    data_selector: response
    params: {}
- name: run_query
  endpoint:
    path: /api-sdk/api-reference/queries/run-query
    method: POST
    data_selector: response
    params: {}
- name: delete_conversations
  endpoint:
    path: /api-sdk/api-reference/conversations/delete-conversation
    method: DELETE
    data_selector: response
    params: {}
- name: run_deployment
  endpoint:
    path: /api-sdk/api-reference/runs/run-deployment
    method: GET
- name: create_conversation
  endpoint:
    path: /api-sdk/api-reference/conversations/create-conversation
    method: POST
- name: delete_conversation
  endpoint:
    path: /api-sdk/api-reference/conversations/delete-conversation
    method: DELETE
- name: queries
  endpoint:
    path: /api-sdk/api-reference/queries
    method: GET
- name: conversations
  endpoint:
    path: /api-sdk/api-reference/conversations
    method: GET
- name: create_conversation
  endpoint:
    path: /api-sdk/api-reference/conversations/create-conversation
    method: POST
- name: batches
  endpoint:
    path: /v2/batches
    method: POST
    data_selector: id
- name: batches
  endpoint:
    path: /v2/batches
    method: POST
    data_selector: id
- name: converse_with_a_document
  endpoint:
    path: /api-sdk/api-reference/conversations/converse
    method: GET
- name: run_query
  endpoint:
    path: /api-sdk/api-reference/queries/run-query
    method: GET
- name: audit_logs
  endpoint:
    path: /api-sdk/api-reference/audit
    method: GET
- name: Amazon S3
  endpoint:
    path: /admin/data-sources/amazon-s3-connect
    method: GET
- name: Azure Blob Storage
  endpoint:
    path: /admin/data-sources/azure-blob-storage-connect
    method: GET
- name: Google Cloud Storage
  endpoint:
    path: /admin/data-sources/google-cloud-storage-connect
    method: GET
- name: Google Drive
  endpoint:
    path: /admin/data-sources/google-drive-connect
    method: GET
- name: mailboxes
  endpoint:
    path: /admin/data-sources/connect-mail
    method: GET
- name: subscriptions
  endpoint:
    path: /admin/subscriptions
    method: GET
    data_selector: subscriptions
    params: {}
- name: audit_logs
  endpoint:
    path: /api/v1/auditlogs
    method: POST
    data_selector: data.results
    params: {}
- name: batches
  endpoint:
    path: /api/batches
    method: POST
    data_selector: batch
    params: {}
- name: apps
  endpoint:
    path: /api/apps/runs
    method: POST
    data_selector: run
    params: {}
- name: queries
  endpoint:
    path: /api-sdk/api-reference/queries#run-query
    method: POST
    data_selector: results
    params:
      query: <QUERY>
      source_app:
        type: CHATBOT
        id: <CHATBOT-ID>
      model_name: <MODEL-NAME>
      include_source_info: <INCLUDE_SOURCE-INFO>
- name: conversations
  endpoint:
    path: /api/conversations
    method: POST
    data_selector: conversation
    params: {}
- name: chatbot
  endpoint:
    path: /chatbots
    method: POST
    data_selector: chatbot
    params: {}
- name: azure_blob_storage
  endpoint:
    path: /admin/data-sources/azure-blob-storage-connect
    method: GET
- name: create_conversation
  endpoint:
    path: /conversations
    method: POST
    data_selector: null
    params: {}
- name: file_paths
  endpoint:
    path: /api-sdk/api-reference/run-reference
    method: GET
    data_selector: file_paths
    params: {}
- name: bucket
  endpoint:
    path: /admin/data-sources/amazon-s3-connect
    method: POST
- name: app_registration
  endpoint:
    path: /admin/saml-sso-st/app-registration
    method: GET
- name: attribute_requirements
  endpoint:
    path: /admin/saml-sso-st/attribute-requirements
    method: GET
- name: read_file
  endpoint:
    path: /v2/files/:path
    method: GET
    data_selector: file_contents
    params:
      expect-node-type: file
- name: ground_truth_datasets
  endpoint:
    path: /automate/datasets
    method: GET
    data_selector: datasets
- name: bucket
  endpoint:
    path: /
    method: GET
- name: run_deployment
  endpoint:
    path: /api/v2/apps/deployments/:deployment-id/runs
    method: POST
    data_selector: id
- name: batches
  endpoint:
    path: /api/v2/batches
    method: POST
    data_selector: id
    params:
      name: test
notes:
- API_BASE_URL is set to https://aihub.instabase.com/api for community accounts.
- Community accounts use the default API root URL.
- For organization accounts, use the organization's root API URL if available.
- Upcoming AI Hub versions hide organizational OAuth tokens. To preserve read access
  to your tokens, copy them for safekeeping.
- Account multifactor authentication (MFA) is now enabled, and is required for accounts
  created with an email address instead of a Google account.
- Account multifactor authentication (MFA) is now enabled.
- Account multifactor authentication (MFA) is now enabled, and is required for accounts
  created with an email address instead of a Google account. If you created an account
  without MFA, you must set up MFA the next time you sign in.
- The API accepts RESTful HTTP requests made from a variety of tools or almost any
  programming language.
- The API call to create a batch is a free operation. It doesn’t use any consumption
  units.
- The API only supports requests via the https protocol.
- New AI Hub Community tier sign-ups are discontinued.
- AI Hub enforces maximum resource limits for files.
- Files within stated limits might still fail because of concurrent processing load
  and content complexity.
- To protect AI Hub Community subscribers from accidental overuse, AI Hub has a default
  monthly usage quota of $250 (USD) or 25,000 consumption units.
- All organization members can create OAuth tokens for use with the AI Hub API.
- Audit logs feature is in private preview with some limitations.
- Connect with Instabase Support to request the required access permissions.
- The ability to manage account security through AI Hub is available for accounts
  that use basic authentication (email and password credentials).
- Configure outbound HTTPS to Instabase telemetry servers.
- Allow outbound HTTPS to Azure management and cognitive services domains.
- Configure egress access to at least one of the supported LLM provider endpoints.
- This API operation is available for Enterprise-tier organizations with single-tenant
  environments.
- To use it you must have audit log access permissions.
- Always define the IB-Context header.
- For organization accounts, use your organization ID.
- For community accounts, omit setting api_root.
- For commercial accounts, ib_context should be set to user or organization ID.
- For organization accounts, set api_root to your organization’s root API URL.
- Self-service SSO configuration must be enabled for your organization. Connect with
  Instabase Support.
- Self-service SSO configuration must be enabled for your organization.
- Don’t turn off the Allow sign-in with email and password toggle until you’ve successfully
  tested your configuration.
- Group mapping is supported with security assertion markup language (SAML)-based
  SSO.
- Upstream changes in your IdP aren’t immediately applied and instead take effect
  with the member’s next AI Hub login.
- Conversations can contain up to 500 files, with a single-upload limit of 100 files.
- Total allowable upload size is based on a token limit of 4 million.
- Connected Azure Blob Storage containers are supported for use as a source of input
  files, a destination for file output, and as an upstream or downstream integration
  in deployments.
- Specify whether to use your community account or organization account to complete
  the request using IB-Context header.
- Connected Amazon S3 buckets are supported for use as a source of input files, a
  destination for file output, and as an upstream or downstream integration in deployments.
- Enabling SSO for your single-tenant AI Hub environment involves working closely
  with your support team.
- AI Hub requires the openid, email, and profile scopes.
- Version control for apps helps ensure stable, predictable behavior for deployed
  apps.
- Each app version has its own AI runtime update setting.
- Secrets are automatically redacted when printed to logs.
- Ensure the path is accessible within the context defined by the IB-Context header.
- App passwords are required for authentication.
- Multi-factor authentication must be enabled to create app passwords.
- Connected Google Cloud Storage containers are supported for use as a source of input
  files, a destination for file output, and as an upstream or downstream integration
  in deployments.
- AI Hub requires the use of a Google Cloud Storage service account to connect to
  your storage container.
- AI Hub uses Google’s native Sign in with Google feature to connect to your Google
  Drive.
- Files and folders with a / in the name don’t appear in the AI Hub file explorer
  and might result in an error if uploaded by API.
- Files or folders with the same name don’t appear in the file explorer and might
  result in an error if uploaded by API.
- Service accounts don’t have a personal workspace — requests that default to saving
  output to a personal workspace fail.
- Specify whether to use your community account or organization account to complete
  the request with IB-Context header.
- If unspecified, defaults to community account context.
- Quick clean options use Python functions to reformat data.
- Cleaning functions can return any value and must raise an exception if issues occur.
errors:
- '401 Unauthorized: Check API token and IB-Context.'
- 'ConnectionError: Couldn''t submit request to API'
- 'Timeout: Request to API timed out'
- 'Bad response from API: Check response status code and content'
- 'extraction failed: Errors occurred while processing CSV files.'
- 'data type error: Incorrect data type in the request body.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- '401 Unauthorized: Recheck API token or IB-Context'
- Verify that the security group allows outbound HTTPS.
- Check the NAT gateway configuration for private subnets.
- Confirm that no corporate firewall blocking is active.
- '401: authorization error'
- '403: insufficient consumption units'
- '500: server error'
- '400 Bad Request: Check required fields and values.'
- '401 Unauthorized: Verify API key and permissions.'
- '404 Not Found: Ensure endpoint exists.'
- '401 Unauthorized: Check your API key.'
- '401 Unauthorized: Recheck OAuth token'
auth_info:
  mentioned_objects:
  - OauthToken
  - AuthProvider
  - NamedCredential
  - IB-Context
  - API token
client:
  base_url: https://aihub.instabase.com
  auth:
    type: oauth2
source_metadata: null
