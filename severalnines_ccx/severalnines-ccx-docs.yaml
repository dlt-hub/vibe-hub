resources:
- name: database_management
  endpoint:
    path: /api/database_management
    method: GET
    data_selector: databases
    params: {}
- name: database_support
  endpoint:
    path: /databases
    method: GET
    data_selector: supported_databases
- name: cloud_credentials
  endpoint:
    path: /ccx/cloud_credentials
    method: POST
    data_selector: credentials
    params: {}
- name: ccx
  endpoint:
    path: /auth/register
    method: GET
    data_selector: registration
    params:
      from: ccx
- name: persistent_volume_claims
  endpoint:
    path: /kubectl/get/pvc
    method: GET
    data_selector: items
    params: {}
- name: clusterissuer
  endpoint:
    path: /kubectl/get/clusterissuer
    method: GET
    data_selector: items
    params: {}
- name: cert
  endpoint:
    path: /kubectl/get/cert/-n/ccx
    method: GET
    data_selector: items
    params: {}
- name: secrets
  endpoint:
    path: /kubectl/get/secrets/-n/ccx
    method: GET
    data_selector: items
    params: {}
- name: pods
  endpoint:
    path: /kubectl/get/pods/-n/ccx
    method: GET
    data_selector: items
    params: {}
- name: mycloud-region1
  endpoint:
    path: /ccx/deployer/config/openstack_vendors/mycloud-region1
    method: GET
- name: mycloud-region2
  endpoint:
    path: /ccx/deployer/config/openstack_vendors/mycloud-region2
    method: GET
- name: mycloud-region1
  endpoint:
    path: /services/data/vXX.X/sobjects/mycloud-region1
    method: GET
- name: mycloud-region2
  endpoint:
    path: /services/data/vXX.X/sobjects/mycloud-region2
    method: GET
- name: aws_credentials
  endpoint:
    path: /aws/credentials
    method: POST
    data_selector: credentials
    params: {}
- name: kubectl_cluster_info
  endpoint:
    path: /kubernetes/cluster-info
    method: GET
    data_selector: cluster_info
    params: {}
- name: helm_deploy_ccx
  endpoint:
    path: /helm/deploy/ccx
    method: POST
    data_selector: deployment_status
    params: {}
- name: AWS
  endpoint:
    path: ../aws/
    method: GET
- name: Openstack
  endpoint:
    path: ../openstack/
    method: GET
- name: Cloudstack
  endpoint:
    path: ../cloudstack/
    method: GET
- name: Vmware
  endpoint:
    path: ../vmware/
    method: GET
- name: Google Cloud Provider
  endpoint:
    path: ../gcp/
    method: GET
- name: ec2
  endpoint:
    path: /services/ec2
    method: POST
    data_selector: instances
    params:
      permissions:
      - ec2:RunInstances
      - ec2:TerminateInstances
      - ec2:DescribeInstances
      - ec2:DescribeInstanceStatus
      - ec2:StartInstances
      - ec2:StopInstances
      - ec2:RebootInstances
      - ec2:CreateVolume
      - ec2:DeleteVolume
      - ec2:AttachVolume
      - ec2:DetachVolume
      - ec2:DescribeVolumes
      - ec2:ModifyVolume
      - ec2:DescribeVolumeStatus
      - ec2:DescribeSnapshots
      - ec2:CreateSnapshot
      - ec2:DeleteSnapshot
      - ec2:CreateTags
      - ec2:CreateSecurityGroup
      - ec2:DeleteSecurityGroup
      - ec2:DescribeSecurityGroups
      - ec2:AuthorizeSecurityGroupIngress
      - ec2:RevokeSecurityGroupIngress
      - ec2:AuthorizeSecurityGroupEgress
      - ec2:RevokeSecurityGroupEgress
      - ec2:AllocateAddress
      - ec2:ReleaseAddress
      - ec2:AssociateAddress
      - ec2:DisassociateAddress
      - ec2:DescribeAddresses
      - ec2:CreateVpc
      - ec2:DeleteVpc
      - ec2:DescribeVpcs
      - ec2:CreateSubnet
      - ec2:DeleteSubnet
      - ec2:DescribeSubnets
      - ec2:CreateRouteTable
      - ec2:DeleteRouteTable
      - ec2:AssociateRouteTable
      - ec2:DisassociateRouteTable
      - ec2:CreateRoute
      - ec2:DeleteRoute
      - ec2:DescribeRouteTables
      - ec2:CreateInternetGateway
      - ec2:AttachInternetGateway
      - ec2:DetachInternetGateway
      - ec2:DeleteInternetGateway
      - ec2:DescribeInternetGateways
      - ec2:CreateKeyPair
      - ec2:DeleteKeyPair
      - ec2:CreateVpcPeeringConnection
      - ec2:ModifySubnetAttribute
      - route53:ChangeResourceRecordSets
      - route53:ListResourceRecordSets
      - route53:GetHostedZone
      - route53:ListHostedZones
      - s3:CreateBucket
      - ec2:DeleteVpcPeeringConnection
      - s3:ListAllMyBuckets
      - s3:DeleteBucket
      - s3:ListBucket
      - s3:GetBucketLocation
      - s3:PutBucketPolicy
      - s3:DeleteBucketPolicy
      - s3:PutBucketAcl
      - s3:PutObject
      - s3:GetObject
      - s3:DeleteObject
- name: cloudstack_vendors
  endpoint:
    path: /client/api
    method: GET
    data_selector: vendors
    params: {}
- name: cloudstack-s3
  endpoint:
    path: /api/v1/cloudstack-s3
    method: POST
    data_selector: data
    params: {}
- name: gcp_vendor
  endpoint:
    path: /gcp/vendor
    method: POST
    data_selector: vendor_data
- name: mariadb
  endpoint:
    path: /mycloud/mariadb
    method: GET
    data_selector: security_groups
    params: {}
- name: microsoft
  endpoint:
    path: /mycloud/microsoft
    method: GET
    data_selector: security_groups
    params: {}
- name: percona
  endpoint:
    path: /mycloud/percona
    method: GET
    data_selector: security_groups
    params: {}
- name: postgres
  endpoint:
    path: /mycloud/postgres
    method: GET
    data_selector: security_groups
    params: {}
- name: redis
  endpoint:
    path: /mycloud/redis
    method: GET
    data_selector: security_groups
    params: {}
- name: cloudSecrets
  endpoint:
    path: /ccx-values.yaml
    method: POST
    data_selector: cloudSecrets
    params: {}
- name: vmware_vendor_name
  endpoint:
    path: /vmware_vendors
    method: GET
    data_selector: vmware_vendors
- name: mysql-innodbcluster
  endpoint:
    path: /mysql-innodbcluster
    method: POST
    data_selector: mysql-innodbcluster
    params: {}
- name: postgres-operator
  endpoint:
    path: /postgres-operator
    method: POST
    data_selector: configKubernetes
    params:
      pod_environment_configmap: production/postgres-pod-config
- name: configAwsOrGcp
  endpoint:
    path: /configAwsOrGcp
    method: POST
    data_selector: aws_region
    params:
      aws_region: eu-north-1
      wal_s3_bucket: postgres-backup-s3-ccx
- name: configLogicalBackup
  endpoint:
    path: /configLogicalBackup
    method: POST
    data_selector: logical_backup_s3_access_key_id
    params:
      logical_backup_s3_access_key_id: <YOUR-ACCESS-KEY-ID>
      logical_backup_s3_bucket: postgres-backup-s3-ccx
      logical_backup_s3_endpoint: ''
      logical_backup_s3_secret_access_key: <YOUR-SECRET-KEY>
      logical_backup_s3_sse: ''
- name: postgres_backup
  endpoint:
    path: /backup
    method: POST
    data_selector: backup_result
- name: postgres_restore
  endpoint:
    path: /restore
    method: POST
    data_selector: restore_result
- name: fluentbit
  endpoint:
    path: /fluentbit
    method: POST
    data_selector: logs
    params: {}
- name: cmon
  endpoint:
    path: /cmon
    method: POST
    data_selector: nodeSelector
    params:
      zone: europe-west1-a
- name: ccx
  endpoint:
    path: /ccx
    method: POST
    data_selector: affinity
    params:
      podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app
                operator: In
                values:
                - ccx-deployer-service
            topologyKey: topology.kubernetes.io/zone
- name: jwt_login
  endpoint:
    path: /api/auth/jwt-login
    method: POST
    data_selector: user
    params: {}
- name: jwt_check
  endpoint:
    path: /api/auth/jwt-check
    method: POST
    data_selector: claims
    params: {}
- name: autoscaling_storage
  endpoint:
    path: /autoscaling/storage
    method: GET
- name: configuration_management
  endpoint:
    path: /config_management
    method: GET
- name: lifecycle_management
  endpoint:
    path: /lifecycle_management
    method: GET
- name: notifications
  endpoint:
    path: /notifications
    method: GET
- name: MySQL Backup Validation
  endpoint:
    path: /mysql/backup/validation
    method: GET
    data_selector: backupStatus
- name: MySQL Restore Validation
  endpoint:
    path: /mysql/restore/validation
    method: GET
    data_selector: restoreStatus
- name: Postgres Backup Validation
  endpoint:
    path: /postgres/backup/validation
    method: GET
    data_selector: backupStatus
- name: Postgres Restore Validation
  endpoint:
    path: /postgres/restore/validation
    method: GET
    data_selector: restoreStatus
- name: billing_usage
  endpoint:
    path: /admin/datastores/billing/usage/{type}
    method: GET
- name: users_count
  endpoint:
    path: /admin/users/count
    method: GET
- name: datastores_count
  endpoint:
    path: /admin/datastores/count
    method: GET
- name: billing_usage
  endpoint:
    path: /{type}
    method: GET
    data_selector: datastores
    params:
      type: json
      start: YYYY-MM-DD
      end: YYYY-MM-DD
- name: users
  endpoint:
    path: /ccx.users
    method: GET
    data_selector: records
    params: {}
- name: high_availability
  endpoint:
    path: /high-availability
    method: GET
    data_selector: availability_info
    params: {}
- name: database_configuration
  endpoint:
    path: /database-configuration
    method: GET
    data_selector: configuration_info
    params: {}
- name: multiple_az_support
  endpoint:
    path: /multiple-az
    method: GET
    data_selector: az_support_info
    params: {}
- name: write_read_instances
  endpoint:
    path: /write-read-instances
    method: GET
    data_selector: instance_info
    params: {}
- name: load_balancer_support
  endpoint:
    path: /load-balancer
    method: GET
    data_selector: load_balancer_info
    params: {}
- name: backup_automatic
  endpoint:
    path: /automatic-backup
    method: GET
    data_selector: backup_info
    params: {}
- name: sql_version_upgrade
  endpoint:
    path: /sql-version-upgrade
    method: GET
    data_selector: upgrade_info
    params: {}
- name: external_backup
  endpoint:
    path: /external-backup
    method: GET
    data_selector: external_backup_info
    params: {}
- name: external_data_restore
  endpoint:
    path: /external-data-restore
    method: GET
    data_selector: restore_info
    params: {}
- name: MySQL
  endpoint:
    path: /mysql
    method: GET
- name: MariaDB
  endpoint:
    path: /mariadb
    method: GET
- name: PostgreSQL
  endpoint:
    path: /postgresql
    method: GET
- name: Cache22
  endpoint:
    path: /cache22
    method: GET
- name: Valkey
  endpoint:
    path: /valkey
    method: GET
- name: MSSQL Server
  endpoint:
    path: /mssql
    method: GET
- name: DB Parameters
  endpoint:
    path: /db_parameters
    method: GET
    data_selector: parameters
    params: {}
- name: scale_nodes
  endpoint:
    path: /nodes
    method: GET
- name: scale_storage
  endpoint:
    path: /scale_storage
    method: GET
- name: backup
  endpoint:
    path: /api/backup
    method: GET
    data_selector: backups
    params: {}
- name: restore
  endpoint:
    path: /api/restore
    method: POST
    data_selector: restore_info
    params: {}
- name: parameter_group
  endpoint:
    path: /api/parameter_groups
    method: GET
    data_selector: parameter_groups
    params: {}
- name: datastore
  endpoint:
    path: /create_datastore_from_backup
    method: POST
    data_selector: datastore
    params: {}
- name: Upgrade now
  endpoint:
    path: /upgrade/now
    method: POST
    data_selector: response
    params: {}
- name: Scheduled upgrade
  endpoint:
    path: /upgrade/scheduled
    method: POST
    data_selector: response
    params: {}
- name: Upgrade database major version
  endpoint:
    path: /upgrade/database/major-version
    method: POST
    data_selector: response
    params: {}
- name: list_database_users
  endpoint:
    path: /list/database/users
    method: GET
- name: create_admin_user
  endpoint:
    path: /create/admin/user
    method: POST
- name: delete_database_user
  endpoint:
    path: /delete/database/user
    method: DELETE
- name: databases
  endpoint:
    path: /databases
    method: GET
    data_selector: databases
    params: {}
- name: create_database
  endpoint:
    path: /databases/create
    method: POST
    data_selector: result
    params: {}
- name: drop_database
  endpoint:
    path: /databases/drop
    method: DELETE
    data_selector: result
    params: {}
- name: trusted_sources
  endpoint:
    path: /trusted_sources
    method: GET
- name: add_trusted_source
  endpoint:
    path: /trusted_sources
    method: POST
- name: delete_trusted_source
  endpoint:
    path: /trusted_sources/{source_id}
    method: DELETE
- name: open_ports
  endpoint:
    path: /trusted_sources/{source_id}/ports
    method: GET
- name: delete_port
  endpoint:
    path: /trusted_sources/{source_id}/ports/{port_number}
    method: DELETE
- name: Event Viewer Columns
  endpoint:
    path: /event-viewer/columns
    method: GET
    data_selector: columns
    params: {}
- name: logs
  endpoint:
    path: /logs
    method: GET
    data_selector: logs
- name: parameter_group
  endpoint:
    path: /ccx_parameter_group
    method: CREATE
- name: datastore
  endpoint:
    path: /ccx_datastore
    method: CREATE
- name: mssql_exporter
  endpoint:
    path: /metrics/<storeID>/<nodeName>/mssql_exporter
    method: GET
- name: redis_exporter
  endpoint:
    path: /metrics/<storeID>/<nodeName>/redis_exporter
    method: GET
- name: postgres_exporter
  endpoint:
    path: /metrics/<storeID>/<nodeName>/postgres_exporter
    method: GET
- name: mysqld_exporter
  endpoint:
    path: /metrics/<storeID>/<nodeName>/mysqld_exporter
    method: GET
- name: node_exporter
  endpoint:
    path: /metrics/<storeID>/<nodeName>/node_exporter
    method: GET
- name: datastore_statuses
  endpoint:
    path: /datastore/statuses
    method: GET
    data_selector: statuses
    params: {}
- name: MariaDB
  endpoint:
    path: /supported-databases/mariadb
    method: GET
- name: MySQL
  endpoint:
    path: /supported-databases/mysql
    method: GET
- name: PostgreSQL
  endpoint:
    path: /supported-databases/postgresql
    method: GET
- name: Redis
  endpoint:
    path: /supported-databases/redis
    method: GET
- name: Valkey
  endpoint:
    path: /supported-databases/valkey
    method: GET
- name: Microsoft SQL Server for Linux
  endpoint:
    path: /supported-databases/mssql
    method: GET
- name: blocked_clients
  endpoint:
    path: /clients/blocked
    method: GET
    data_selector: clients
    params: {}
- name: memory_used
  endpoint:
    path: /memory/used
    method: GET
    data_selector: memory
    params: {}
- name: connected_clients
  endpoint:
    path: /clients/connected
    method: GET
    data_selector: clients
    params: {}
- name: redis_commands_per_second
  endpoint:
    path: /commands/per_second
    method: GET
    data_selector: commands
    params: {}
- name: total_keys
  endpoint:
    path: /keys/total
    method: GET
    data_selector: keys
    params: {}
- name: replica_lag
  endpoint:
    path: /replica/lag
    method: GET
    data_selector: lag
    params: {}
- name: database_user
  endpoint:
    path: /create_login
    method: POST
    data_selector: results
    params: {}
- name: replication_user
  endpoint:
    path: /create_replication_user
    method: POST
    data_selector: user_creation_status
    params: {}
- name: replication_filter
  endpoint:
    path: /create_replication_filter
    method: POST
    data_selector: filter_creation_status
    params: {}
- name: database_dump
  endpoint:
    path: /create_database_dump
    method: POST
    data_selector: dump_creation_status
    params: {}
- name: apply_dump
  endpoint:
    path: /apply_database_dump
    method: POST
    data_selector: apply_status
    params: {}
- name: start_replica
  endpoint:
    path: /start_replica
    method: POST
    data_selector: replica_start_status
    params: {}
- name: stop_replica
  endpoint:
    path: /stop_replica
    method: POST
    data_selector: replica_stop_status
    params: {}
- name: datastore
  endpoint:
    path: /gcp/datastore
    method: POST
    data_selector: datastore
    params: {}
- name: replication_user
  endpoint:
    path: /create-replication-user
    method: POST
    data_selector: user_created
    params:
      username: repl
      password: replpassword
- name: dump_data
  endpoint:
    path: /create-dump
    method: POST
    data_selector: dump_created
    params:
      databases:
      - prod
      - crm
- name: replication_filter
  endpoint:
    path: /create-replication-filter
    method: POST
    data_selector: filter_created
    params:
      ignore_databases:
      - mysql
      - sys
      - performance_schema
- name: connect_ccx_primary
  endpoint:
    path: /connect
    method: POST
    data_selector: connection_status
    params:
      source_host: database-1.cluster-cqc4xehkpymd.eu-north-1.rds.amazonaws.com
      source_user: repl
      source_password: replpassword
      source_log_file: mysql-bin-changelog.000901
      source_log_pos: 584
- name: backup_storage
  endpoint:
    path: /backup/storage
    method: GET
    data_selector: backups
    params: {}
- name: backup_schedule
  endpoint:
    path: /backup/schedule
    method: GET
    data_selector: schedules
    params: {}
- name: vector
  endpoint:
    path: /extensions/vector
    method: POST
    data_selector: extension_creation
    params: {}
- name: postgis
  endpoint:
    path: /extensions/postgis
    method: POST
    data_selector: extension_creation
    params: {}
- name: existing_users
  endpoint:
    path: /users
    method: GET
    data_selector: users
- name: create_admin_user
  endpoint:
    path: /users/create_admin
    method: POST
    data_selector: user
- name: backup_schedule
  endpoint:
    path: /backup/schedule
    method: GET
- name: valkey_user
  endpoint:
    path: /users
    method: GET
    data_selector: users
notes:
- Contact Severalnines support for information about API access.
- Master CCX administration with expert tips, detailed guides, and essential management
  tools.
- Unlock the full potential of CCX with user-focused insights, tutorials, and best
  practices.
- Supports various deployment types to cater to different scalability and redundancy
  needs.
- Offers customizable configurations for various node types.
- Supports various deployment types for scalability and redundancy.
- Provides advanced monitoring capabilities with detailed performance analysis.
- CCX requires Kubernetes Cluster Version to be >=1.22.
- A namespace must be configured for the CCX K8s services to operate.
- Authentication mechanism consists of Username / password, Oauth2 credentials, JWT
  for UI and API integration.
- Ensure you have a DNS A record setup, pointing the EXTERNAL_IP with the domain you
  wish to install CCX on, e.g `ccx.example.com`.
- Ensure enough storage available for PVCs, about 100Gi is recommended.
- Nginx is configured as the ingress controller.
- cc.example.com and ccx.example.com are just examples. You can change them to e.g.
  adm and dbaas.
- 'If the certificate has False in the READY column, proceed with the following: kubectl
  describe certificate -n ccx ccx-ingress.'
- 'If no challenge exists, run the following commands: kubectl get order.acme.cert-manager.io.'
- Each region requires its own set of secrets.
- Ensure that all necessary secrets are properly configured for each region before
  deployment.
- Each region requires its own complete configuration including Database vendors,
  Network configuration, Storage settings, Authentication credentials.
- This setup is only for demo and development purposes and the installation will only
  work for the specified CIDR or 0.0.0.0/0 if no CIDR is set.
- If you move the laptop/computer where the installation is made to another location,
  then you must login to the AWS Console and add that network to the security group.
- Supports a single zone per region.
- Supports only disks with configurable, custom sizes.
- 'For the key MYCLOUD_S3_ENDPOINT: base64_endpoint, if you are using an AWS S3 bucket,
  the endpoint should be provided without the https details.'
- A GCP project must be created.
- A service account must be created with the necessary permissions.
- A VPC network may be created for CCX, where CCX will create necessary rules. If
  no VPC network is created, CCX will use 'default'.
- Cloud Storage Service account HMAC key must be created in 'Cloud Storage > Settings
  > Interoperability'.
- VMware requires a network with a pool of IP addresses with access to the internet.
- IP addresses must be assigned automatically for the VM and must not change.
- Ubuntu 22.04 with automated installation is required.
- Uses JWT authentication flow for user management.
- It is recommended to set negative cache TTL - SOA.MINIMUM to a low value (0-10)
  to prevent issues with negative cache.
- It is recommended to set ExternalDNS interval to a low value (10s) to enable fast
  dns record creation and prevent issues with dns timeouts or record not found errors.
- It is recommended to have backup enabled so that it can be restored on cluster failures.
- Sometimes the MySQL InnoDB Cluster pod is stuck due to some issues preventing graceful
  termination of pod such as node deletion.
- Backup schedule in the cron format is '00 10 * * *'.
- S3 bucket for backups is 'postgres-backup-s3-ccx'.
- This stack uses Victoria metrics - Prometheus compatible observability for metrics
  and alerting
- Grafana dashboards and datasources are kept as a code in the repo
- If the Loki gateway ingress is not found, a warning will be shown when you deploy
  ccx.
- Make sure you have updated and deployed ccxdeps, else the logging feature will be
  disabled.
- Use distributed storage systems like Ceph, GlusterFS, or JuiceFS for high availability.
- Extreme care must be taken to change the `cmon.user` and `cmon.password` at runtime/during
  the lifecycle to prevent access denied to either part. The password is not applied
  on the either the CMON database or the datastores. Please contact CCX Support before
  changing these properties on a running system.
- Updating the `cmon.db.host` property requires that the `mysql_hostname` is updated
  in cmon.cnf and in all `cmon_X.cnf` files. Please contact CCX Support before changing
  these properties on a running system.
- A bearer token can be used to authenticate with the API.
- Tokens are useful for automation and can be used in scripts where the user does
  not want to store their password.
- JWT allows a way to authenticate users from your service panel in CCX.
- The JWT contains an associative array with claims about the user and session.
- The issuer should be set to 'MYCLOUD'.
- 'For more information see: Observability, Logging, Email Notifications'
- End-users have to activate this feature on a per datastore basis by setting autoscale
  storage to true in the UI. It is disabled by default.
- This feature, if used improperly, can bring significant risk to datastore stability.
- We do not recommend changing anything that affects calculated values based on the
  instance memory.
- The parameter settings are applied on scaling and during upgrads (Life-cycle management).
- It is not recommended to update database configuration parameters manually, using
  S9S CLI or ClusterControl UI. The changes will be overwritten by the latest saved
  settings when adding a node (either as part of Scaling, during Lifecycle management,
  or during automatic repair).
- Never use the S9S CLI nor the CCUIv2 to delete resources (nodes or datastores).
  This may lead to stray data.
- The FQDNs will be constant but the underlying IP addresses may change.
- There will be a brief service interruption during step 5, to promote the new primary.
- By default, CCX sends NO emails to either of the above parties.
- CCX does not get end-users' email addresses with the existing auth flow.
- Downgrades are not supported.
- The supported upgrade path is to update to each version increment between the released
  versions.
- CCX uses Transport Layer Security (TLS) and Secure Sockets Layer (SSL) to secure
  the communication between the database server and clients. This feature cannot be
  disabled.
- SSL is required for all users.
- Unsecured connections can only be established for users that use the mysql_native_password
  authentication method.
- The 'target' should be the website where you want to perform a vulnerability assessment.
- Docker installed on your machine
- Access to the necessary environment variables and credentials
- Optional `datastore.json` file to run your own dedicated spec
- The IP_ADDRESS variable must include the firewall rule IP with the mask (e.g. /32).
- Adjust the number of workers using the --workers flag to optimize for your environment.
- Reports will be generated and hosted on the specified port.
- Disk autoscaling is enabled by default in CCX.
- CCX will fix readonly state automatically in version 1.51+.
- When using NFS as a volume provisioner, enable root_squash on the NFS server to
  allow proper access.
- CCX will fix the readonly state issue automatically in version 1.51+.
- If exporters are not running inside datastores, then deploy agents commands
- When using NFS as a volume provisioner, NFS servers map requests from unprivileged
  users to the 'nobody' user on the server, which may result in specific directories
  being owned by 'nobody'. Containers cannot modify these permissions. Therefore,
  it's necessary to enable `root_squash` on the NFS server to allow proper access.
- Disk autoscaling is enabled by default in CCX. The system will automatically increase
  the storage size by 20% when the used space exceeds 75% of the allocated storage.
- The credentials can be found in the kubernetes secret admin-basic-auth.
- Never use the ClusterControl UI to delete resources (nodes or datastores). This
  may lead to stray data.
- Tickets must be logged to https://support.severalnines.com/hc/en-us. Please create
  an account and sign up before you submit a ticket.
- No, only the ticketing system.
- Basic auth is supported. The credentials are stored in the admin-basic-auth secret.
- Is it self-hosted in the partner’s infra/datacenter or hosted by Severalnines?
- Self hosted in partner’s data center.
- Databases are deployed on virtual machines.
- Global network with a firewall to restrict access.
- SSL is used for all inter-host and client/server communications.
- This release must be deployed, you cannot skip it when upgrading to later release
- Restore backup that was done before the upgrade might fail, it will be fix in next
  patch. As workaround create datastore from backup can be use in such cases.
- Migrate vault is enabled by default. So if you are using Vault we will copy all
  the values to the Kubernetes secrets. To disable it change useK8sSecrets in values.yaml
- This release must be deployed, you cannot skip it when upgrading to later release.
- MSSQL Upgrade datastore functionality is now disabled, as it is not yet supported.
- Some objects like Contact may return nulls in deeply nested fields
- Yes, backups are created automatically. The user can set the frequency.
- Only minor upgrades are supported. Major upgrades are not supported in an online
  operation.
- 'Keep credentials secure: After downloading, ensure the credentials and certificates
  are stored in a secure location and only accessible by authorized personnel.'
- 'Use encryption: Where possible, encrypt your credentials and certificates both
  at rest and in transit.'
- 'Regularly rotate credentials: To maintain security, periodically rotate your credentials
  and update any related system configurations.'
- Deprecated in v1.51 in favor of parameter groups
- Ensure all tasks linked with the node are concluded before initiating a reboot to
  prevent data loss.
- Only authorized personnel should perform actions within the administration panel
  to maintain system integrity.
- Please note that rebooting may cause temporary unavailability.
- In Valkey, the primary may failover to a secondary if the reboot takes more than
  30 seconds.
- PITR is only supported by Postgres, MySQL/MariaDb, and MS SQLServer.
- A datastore can only be associated with one parameter group at a time.
- Changes to parameters are automatically propagated to all associated datastores.
- At least one parameter group must exist matching the vendor, version and configuration.
- A parameter group cannot be deleted if it is assigned to a datastore.
- PITR is not supported yet.
- MySQL database creation does not require specifying an owner.
- DROP DATABASE will hang if there is a metadata lock on the database or a table/resource
  in the database.
- Only trusted sources are allowed to connect to the datastore.
- A number of ports are open for each trusted source.
- Only one parameter group can be used at any given time by a datastore.
- You cannot change an existing parameter group from terraform.
- Access to these metrics is limited to the sources specified in Firewall Management.
- CCX notifies users by email in case of certain events.
- Scaling is not supported in SQLServer as of the standard license.
- Maximum size depends on the service provider and instance size.
- Volume type cannot currently be changed.
- SQL Server has no direct 'max connection per GB of RAM' rule.
- SQL Server allows a maximum of 32,767 user connections.
- User connections is a dynamic (self-configuring) option, SQL Server adjusts the
  maximum number of user connections automatically as needed, up to the maximum value
  allowable.
- In most cases, you do not have to change the value for this option. The default
  is 0, which means that the maximum (32,767) user connections are allowed.
- Single node (no High Availability)
- Always On (2 nodes, asynchronous commit mode, High Availability)
- Only asynchronous commit mode is currently supported.
- The `ccxdb` is currently the only supported Always On enabled database.
- Scaling is not supported as the standard license does not permit more than two nodes.
- In the Always On configuration, only the `ccxdb` is replicated.
- Data loss may occur for other user-created databases, as they are not transferred
  to the replica during the add node process.
- MariaDB Replication uses the standard asynchronous replication based on GTIDs.
- The maximum number of database nodes in a datastore is 5.
- Multi-primary configuration must contain an odd number of nodes (1, 3 and 5).
- A node cannot be scaled vertically currently.
- Mariabackup is used to create backups.
- CCX backups the Primary server. In multi-primary setups the node with the highest
  `wsrep_local_index` is elected.
- Restoring a backup may be a long running process.
- Running several restores may change the timelines.
- These setting cannot be changed as it affects system stability.
- The recommendation is not enforced by the CCX platform.
- The MariaDB Datastore on CCX is denoted as the 'replica'
- The source of the data is denoted as the 'source'
- 'If you do not want to setup replication, then you can chose to only apply the sections:
  Create a database dump file, Apply the dumpfile on the replica'
- Ensure that the source is configured to act as a replication source.
- Binary logging is enabled.
- '`server_id` is set to non 0.'
- The dump must not contains any mysql or other system databases.
- 'CCX currently supports connections to MariaDB in two SSL modes: REQUIRED and VERIFY_CA.'
- The Certificate Authority (CA) certificate required for VERIFY_CA mode can be downloaded
  from your datastore on CCX.
- require_secure_transport is a MariaDB setting that governs if connections to the
  datastore are required to use SSL.
- The privilege system is not as flexible as in MySQL.
- Users can only create databases from the CCX UI.
- Percona Xtrabackup blocks DDL operations during the backup using the --lock-ddl
  flag.
- Any attempt to CREATE, ALTER, DROP, TRUNCATE a table during backup creation will
  be locked with the status Waiting for backup lock.
- We recommend a maximum of 100GB storage per GB of RAM.
- Binary logging must be enabled on the source.
- Ensure that the source is added as a Trusted Source in the CCX Firewall.
- Ensure you can connect a MySQL client to both the CCX Primary and the GCP Primary.
- If the CCX datastore's system tables are corrupted using replication, then the datastore
  must be recreated.
- AWS RDS makes it intentionally difficult to migrate away from.
- Ensure you can connect a MySQL client to both the CCX Primary and the RDS Writer.
- '''ccxadmin'' user has more privileges in MySQL than in MariaDB'
- '''ccxadmin'' is not allowed to modify the following databases: mysql.*, sys.*'
- 'CCX currently supports connections to MySQL in two SSL modes: REQUIRED and VERIFY_CA.'
- 'The database user is not allowed to modify the following databases: mysql.*, sys.*'
- The PostgreSQL Datastore on CCX is denoted as the 'replica'
- 'PostgreSQL users are created with the following permissions: NOSUPERUSER, CREATEROLE,
  LOGIN, CREATEDB'
- The backup schedule can be tuned and backups can be paused
- Default privileges like -@admin and -@dangerous are filtered out for security.
- Since Valkey is an in-memory database, the storage size is fixed and twice the amount
  of the RAM. Thus, it is not possible to specify the storage size in the deployment
  wizard.
- Redis is configured to use both AOF and RDB for persistence.
- By default, the `-@admin` and `-@dangerous` privileges are filtered out for security
  purposes.
errors:
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency.'
- 'QUERY_TIMEOUT: Break down filters or add selectivity.'
- Deployment fails if there is no EXTERNAL-IP for the ingress controller.
- 'HostAutoScaleDiskSpaceReached: Disk autoscale threshold has been reached'
- 'max_connections: Any setting affecting connectivity (e.g port, bind addresses).'
- 'Replication settings: Any setting requiring a server restart.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- Non-office hours? See [SLA](https://severalnines.com/ccx/sla), use the ticketing
  system.
- 'Invalid DB Parameter Acceptance: Fixed an issue allowing invalid DB parameters
  to be saved, causing cluster errors.'
- 'Missing Validation for Backup Retention: The UI now properly enforces valid backup
  retention periods.'
- 'DROP_DATABASE_HANGS: Check for locks preventing deletion.'
- There must be no user management happening on the source, while the data is imported
  and the replication link is active. This is avoid corruption of the mysql database
  and possibly other system databases.
- It is recommended to set `binlog-ignore-db` on the source to 'mysql, performance_schema,
  and sys' during the data import/sync process.
- 'ERROR 3159 (08004): Connections using insecure transport are prohibited while --require_secure_transport=ON.'
- Replication fails if the replication source is not trusted.
- User creation issues may arise if permissions are incorrect.
- Ensure that the IP address of the CCX Primary is added to the security group used
  by the GCP Primary instance.
- Ensure that you have the correct IP/FQDN of the GCP Primary instance.
- Ensure that users are created correctly and using the correct password.
- Ensure that the dump is fresh.
auth_info:
  mentioned_objects:
  - ccx-ui-auth
  - ccx-auth-service
  - MYCLOUD_USERNAME
  - MYCLOUD_PASSWORD
  - MYCLOUD_PROJECT_ID
  - MYCLOUD_AUTH_URL
  - MYCLOUD_USER_DOMAIN
  - MYCLOUD_USER_DOMAIN_NAME
  - admin-basic-auth
  - admin-users
  - cmon-credentials
client:
  base_url: https://severalnines.com/ccx/
  auth:
    type: oauth2
    location: header
    header_name: Authorization
source_metadata: null
