resources:
- name: generate_qr_code
  endpoint:
    path: /middle-east/ksa/einvoicing/v1/b2c/qrcode/generate
    method: POST
    data_selector: QrCode
    params: {}
- name: campaign_member
  endpoint:
    path: /services/data/vXX.X/sobjects/CampaignMember
    method: GET
    data_selector: records
    params:
      incremental: updated_at
- name: contact
  endpoint:
    path: /services/data/vXX.X/sobjects/Contact
    method: GET
    data_selector: records
    params: {}
- name: purchase_invoices
  endpoint:
    path: /ingest/purchase_invoices
    method: POST
    data_selector: records
- name: reconciliation_results
  endpoint:
    path: /reconciliation/results
    method: GET
    data_selector: results
- name: health
  endpoint:
    path: /health
    method: GET
- name: Generate IRN
  endpoint:
    path: /generate-irn
    method: POST
- name: Cancel IRN
  endpoint:
    path: /cancel-irn
    method: POST
- name: Get Invoice by IRN
  endpoint:
    path: /get-invoice-by-irn
    method: GET
- name: GENERATE_IRN
  endpoint:
    path: /e-invoicing/generate_irn
    method: POST
    data_selector: OUTPUT/SUCCESS
    params: {}
- name: GENERATE_EWB_WITH_IRN
  endpoint:
    path: /e-invoicing/generate_ewb_with_irn
    method: POST
    data_selector: OUTPUT/SUCCESS
    params: {}
- name: GENERATE_EWB
  endpoint:
    path: /e-invoicing/generate_ewb
    method: POST
    data_selector: OUTPUT/SUCCESS
    params: {}
- name: GENERATE_B2C_QR_CODE
  endpoint:
    path: /e-invoicing/generate_b2c_qr_code
    method: POST
    data_selector: OUTPUT/SUCCESS
    params: {}
- name: CANCEL_IRN
  endpoint:
    path: /e-invoicing/cancel_irn
    method: POST
    data_selector: OUTPUT/SUCCESS
    params: {}
- name: B2B FTP Magnet
  endpoint:
    path: /e-invoicing-ftp-magnet/b2b
    method: POST
    data_selector: response
    params: {}
- name: B2C FTP Magnet
  endpoint:
    path: /e-invoicing-ftp-magnet/b2c
    method: POST
    data_selector: response
    params: {}
- name: API
  endpoint:
    path: /middle-east/ksa/einvoicing
    method: GET
- name: KSA Einv FTP Generation Success
  endpoint:
    path: /KSA_Einv_FTP_Generation_Success.csv
    method: GET
- name: KSA Einv FTP Generation Error
  endpoint:
    path: /KSA_Einv_FTP_Generation_Error.csv
    method: GET
- name: KSA Einv FTP Upload Error
  endpoint:
    path: /KSA_Einv_FTP_Upload_Error.csv
    method: GET
- name: api_sandbox
  endpoint:
    path: /api-sandbox.clear.in
    method: ping
- name: storage
  endpoint:
    path: /storage.clear.in
    method: ping
- name: api_production
  endpoint:
    path: /api.clear.in
    method: ping
- name: storage_production
  endpoint:
    path: /storage.clear.in
    method: ping
- name: sandbox
  endpoint:
    path: /api-sandbox.clear.in
    method: GET
- name: production
  endpoint:
    path: /api.clear.in
    method: GET
- name: storage_sandbox
  endpoint:
    path: /storage.clear.in
    method: GET
- name: storage_production
  endpoint:
    path: /storage.clear.in
    method: GET
- name: karvy_gstn_auth
  endpoint:
    path: /taxpayerapi/v1.0/authenticate
    method: POST
- name: karvy_gstn_ret
  endpoint:
    path: /taxpayerapi/v1.1/returns
    method: GET
- name: karvy_gstn_comm
  endpoint:
    path: /commonapi/v1.1/search
    method: GET
- name: karvy_gstn_comm_track_ret
  endpoint:
    path: /commonapi/v1.0/returns
    method: GET
- name: karvy_gstn_ledr
  endpoint:
    path: /taxpayerapi/v0.3/ledgers
    method: GET
- name: EWB GSP
  endpoint:
    path: /
    method: GET
- name: ewaybill
  endpoint:
    path: /ewayapi
    method: POST
    data_selector: records
- name: EINV GSP
  endpoint:
    path: /services/data/vXX.X/sobjects/EINV
    method: GET
- name: generate_e_invoice
  endpoint:
    path: /e-invoicing/generate-e-invoice
    method: POST
- name: generate_e_invoice_async
  endpoint:
    path: /e-invoicing/generate-e-invoice-async
    method: POST
- name: generate_e_invoice_via_xml
  endpoint:
    path: /e-invoicing/generate-e-invoice-via-xml
    method: POST
- name: send_signed_e_invoice_xml_to_zatca
  endpoint:
    path: /e-invoicing/send-signed-e-invoice-xml-to-zatca
    method: POST
- name: get_bulk_invoice_lite
  endpoint:
    path: /e-invoicing/get-bulk-invoice-lite
    method: GET
- name: get_invoice
  endpoint:
    path: /e-invoicing/get-invoice
    method: GET
- name: get_e_invoice_pdf
  endpoint:
    path: /e-invoicing/get-e-invoice-pdf
    method: GET
- name: get_e_invoice_pdf_a3_with_pdf_api
  endpoint:
    path: /e-invoicing/get-e-invoice-pdf-a-3-with-pdf-api
    method: GET
- name: register_device
  endpoint:
    path: /e-invoicing/register-device
    method: POST
- name: get_pcsid_generation_status
  endpoint:
    path: /e-invoicing/get-pcsid-generation-status
    method: GET
- name: renew_pcsid
  endpoint:
    path: /e-invoicing/renew-pcsid
    method: POST
- name: generate_e_invoice_phase_i
  endpoint:
    path: /e-invoicing/generate-e-invoice-phase-i
    method: POST
- name: generate_qr_code_phase_i
  endpoint:
    path: /e-invoicing/generate-qr-code-phase-i
    method: POST
- name: generate_device_id
  endpoint:
    path: /e-invoicing/generate-device-id
    method: POST
- name: generate_csid_and_pcsid
  endpoint:
    path: /e-invoicing/generate-csid-and-pcsid
    method: POST
- name: send_e_invoice_via_email
  endpoint:
    path: /e-invoicing/send-e-invoice-via-email
    method: POST
- name: add_business_units_api
  endpoint:
    path: /e-invoicing/add-business-units-api
    method: POST
- name: access_token
  endpoint:
    path: /integration/v1/authz/token
    method: GET
- name: Generate E-Invoice
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/generate-e-invoice
    method: POST
- name: Get Invoice
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/get-invoice
    method: GET
- name: generate_e_invoice
  endpoint:
    path: /v2/einvoices/generate
    method: POST
- name: EInvoice
  endpoint:
    path: /generate-e-invoice
    method: POST
    data_selector: EInvoice
    params: {}
- name: Generate E-Invoice Async
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/generate-e-invoice-async
    method: POST
- name: generate_e_invoice_async
  endpoint:
    path: /v2/einvoices/generate/async
    method: POST
- name: Generate E-Invoice
  endpoint:
    path: /e-invoicing-ksa-api/generating-e-invoice/generate-e-invoice
    method: POST
- name: Send Signed E-Invoice XML To ZATCA
  endpoint:
    path: /e-invoicing-ksa-api/generating-e-invoice/send-signed-e-invoice-xml-to-zatca
    method: POST
- name: generate_e_invoice_via_xml
  endpoint:
    path: /v2/einvoices/generate-with-file
    method: POST
    data_selector: response
    params: {}
- name: send_signed_e_invoice
  endpoint:
    path: /generate-e-invoice/send-signed-e-invoice-xml-to-zatca
    method: POST
    data_selector: response
    params: {}
- name: send_signed_e_invoice
  endpoint:
    path: /v2/einvoices/generate-with-file-offline
    method: POST
    data_selector: ''
    params: {}
- name: invoice
  endpoint:
    path: /generating-e-invoice/get-bulk-invoice-lite
    method: GET
- name: Invoices
  endpoint:
    path: /v3/einvoices/get-bulk
    method: POST
    data_selector: Invoices
    params: {}
- name: Get Invoice
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/get-invoice
    method: GET
- name: get_invoice
  endpoint:
    path: /v2/einvoices/data
    method: GET
    data_selector: records
    params: {}
- name: Get E-Invoice PDF
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/get-e-invoice-pdf
    method: GET
- name: get_e_invoice_pdf
  endpoint:
    path: /v2/einvoices/print
    method: GET
    data_selector: response
    params:
      invoiceNumber: Mandatory. Document Number (Invoice Reference Number)
      issueDate: Mandatory. Document Date
      invoiceType: Mandatory. INV - Invoice, CRN - Credit Note, DBN - Debit Note,
        RECEIPT - Receipt
      vat: Mandatory. VAT Number
      templateId: Optional. Default is '39'
- name: Get E-Invoice PDF/A-3 with PDF API
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/get-e-invoice-pdf-a-3-with-pdf-api
    method: GET
- name: get_e_invoice_pdf_a3
  endpoint:
    path: /v2/einvoices/embeddedpdf
    method: POST
    data_selector: response
    params:
      invoiceNumber: Mandatory. Document Number.
      invoiceType: Mandatory. Document Type.
      issueDate: Mandatory. Document Date.
      vat: Mandatory. TaxPayer/VAT Number.
      pdfTypeResponse: Optional. If the field is not passed or left blank then by
        default PDF_FILE
- name: einvoice_pdf
  endpoint:
    path: /einvoices/embeddedpdf
    method: GET
    params:
      invoiceNumber: MULTIUPLEVAT009
      invoiceType: CRN
      vat: '300474179900003'
      issueDate: '2022-05-31'
- name: Register Device
  endpoint:
    path: /e-invoicing-ksa-api/generating-e-invoice/register-device
    method: POST
- name: Get PCSID Generation Status
  endpoint:
    path: /e-invoicing-ksa-api/generating-e-invoice/get-pcsid-generation-status
    method: GET
- name: Renew PCSID
  endpoint:
    path: /e-invoicing-ksa-api/generating-e-invoice/renew-pcsid
    method: POST
- name: register_device
  endpoint:
    path: /onboarding/register-device
    method: POST
    data_selector: ''
    params: {}
- name: Get PCSID Generation Status
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/get-pcsid-generation-status
    method: GET
- name: Get PCSID Generation Status
  endpoint:
    path: /middle-east/ksa/einvoicing/onboarding/{ActivityId}/pcsid-status
    method: GET
    data_selector: records
    params:
      ActivityId: Mandatory. The PcsidGenerationActivityId received in the previous
        API
- name: Renew PCSID
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/renew-pcsid
    method: POST
- name: renew_pcsid
  endpoint:
    path: /onboarding/renew-pcsid
    method: POST
    data_selector: Status
    params: {}
- name: Generate E-Invoice (Phase I)
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/generate-e-invoice-phase-i
    method: POST
- name: einvoice
  endpoint:
    path: /v2/einvoices/generate
    method: POST
    data_selector: QRCode
    params: {}
- name: generate_device_id
  endpoint:
    path: /e-invoicing-ksa-api/generating-e-invoice/generate-device-id
    method: POST
- name: generate_device_id
  endpoint:
    path: /onboarding/generate-csr
    method: POST
- name: Generate CSID and PCSID
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/generate-csid-and-pcsid
    method: POST
- name: generate_csid_and_pcsid
  endpoint:
    path: /onboarding/generate-csid
    method: POST
    data_selector: Status
- name: Send E-Invoice via Email
  endpoint:
    path: /e-invoicing-ksa-api/e-invoicing-ksa-api-reference/generating-e-invoice/send-e-invoice-via-email
    method: POST
- name: send_e_invoice_via_email
  endpoint:
    path: /v1/emails
    method: POST
    data_selector: attachments
    params: {}
- name: businessHierarchy
  endpoint:
    path: /v1/businessHierarchy
    method: POST
- name: nic_credentials
  endpoint:
    path: /einv/v2/nic_credentials/store_nic_credentials
    method: POST
    data_selector: success
    params:
      shouldPersist: true
- name: B2B E-Invoicing APIs
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/cleartax-e-invoicing-apis-xml-schema/b2b-e-invoicing-apis
    method: GET
- name: E-Waybills APIs
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/cleartax-e-invoicing-apis-xml-schema/e-waybills-apis
    method: GET
- name: B2C E-Invoicing APIs
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/cleartax-e-invoicing-apis-xml-schema/b2c-e-invoicing-apis
    method: GET
- name: DSC APIs
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/cleartax-e-invoicing-apis-xml-schema/dsc-apis
    method: GET
- name: Generate IRN
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/govt-compatible-apis/generate-irn
    method: GET
- name: Cancel IRN
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/govt-compatible-apis/cancel-irn
    method: GET
- name: Get Invoice by IRN
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/govt-compatible-apis/get-invoice-by-irn
    method: GET
- name: Generate E-Waybill by IRN
  endpoint:
    path: /e-invoicing-api/e-invoicing-api-reference/govt-compatible-apis/generate-e-waybill-by-irn
    method: GET
- name: E-Invoice Object
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/e-invoice-object
    method: GET
- name: Country Code Master
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/country-code-master
    method: GET
- name: State Code Master
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/state-master
    method: GET
- name: Pincode Master
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/pincodes
    method: GET
- name: Pincode State Mapping Pattern
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/pincode-state-mapping-pattern
    method: GET
- name: Port Code Master
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/port-code-master
    method: GET
- name: Currency Code Master
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/currency-code-master
    method: GET
- name: UQC Master
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/unit-master
    method: GET
- name: Tax Rates
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/tax-rates
    method: GET
- name: Error Codes
  endpoint:
    path: /cleartax-docs/e-invoicing-api/e-invoicing-api-reference/resources-and-master/error-codes
    method: GET
notes:
- This API is valid only for Phase I requirements of ZATCA.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Some objects like Contact may return nulls in deeply nested fields
- The above URL is for API requests only. The corresponding frontend web application
  URL where you can log in and verify the data is https://app.clear.in/
- Do not use a production account that hosts live data to complete this quick start.
- The output file templates are subject to change. Both the headers and the order
  of columns may change. We recommend you map the output with flexible options to
  add or change the headers in the future.
- The QR Code must be printed with the JWT in the payload without any decoding.
- Every user who registers with ClearTax E-Waybill gets an account associated with
  the email ID used for signing up.
- A user can log in to ClearTax E-Waybill with the email ID and password or can interact
  with ClearTax E-Waybill programmatically with an Auth token.
- This is a multidomain SAN (Subject Alternative Name) certificate, utilized across
  all products within the Clear ecosystem and is common for both sandbox and production
  environments.
- 'TLS Versions Supported: TLS 1.2.'
- The success and error file templates are subject to change. Both the headers and
  the order of columns may change. We recommend you map the output with flexible options
  to add or change the headers in the future.
- These template names and samples are applicable only if you are using our standard
  templates available in the portal. In case you have created custom templates, then
  the template names and headers might vary based on your customizations.
- E-Invoicing will be rolled out in two phases in KSA.
- E-invoicing applies to all persons subject to VAT and any other parties issuing
  tax invoices on behalf of suppliers subject to VAT.
- Non-resident taxable persons for VAT purposes are excluded.
- The success and error file templates are subject to change. Both the headers and
  the order of columns may change.
- The DNS resolution has to be consistent and successful at any point of time from
  all the instances from where the API request might be made in future.
- The hostname reachability has to be consistent and successful at any point of time
  from all the instances from where the API request might be made in future.
- These APIs are deprecated and no more supported.
- For testing, it is recommended to always use the sandbox environment.
- Test all the APIs on the sandbox environment.
- Once the testing is successful, create a ClearTax production account.
- Before making any changes to production, you need to register ClearTax as GSP in
  NIC.
- Update karvyclient_secret based on email or contact integrations-support@cleartax.in
- NIC token expiry is set to 300 seconds
- You need to be a tenant administrator with role AuthGroup.Administrator.
- Highly recommend you to test the entire flow with all scenarios in the sandbox environment
  before moving to production.
- This API is deprecated.
- Uses OAuth2 with authentication token — requires user account setup
- Documents must be in JSON or CSV/Excel format for upload
- GST 1.0 APIs are deprecated and will not be supported after 30-11-2022. If you want
  to integrate with ClearTax GST, please use GST 2.0 APIs instead.
- This API is deprecated. Please use the E-Waybill APIs from the unified set available
  here.
- This API is deprecated. Please use the E-Waybill APIs from the unified set available.
- The output file templates are subject to change. Both the headers and the order
  of columns may change. We recommend you to map the output with flexible options
  to add or change the headers in the future.
- CFC includes GST 2.0, MaxITC, E-Invoicing, Invoicing, Capture, TDS, Invoice Discounting,
  and CimplyFive.
- 'Rate Limit : 1000 API requests per minute'
- This API needs to be authenticated with a valid user authentication token. If the
  auth token is not present or is invalid, the API will return HTTP Status Code 401.
- Each customer is allowed to send a limited number of requests per minute to prevent
  server overload. If the limit is exceeded, the server will respond with a 429 Too
  Many Requests status code.
- If the auth token is valid, but the user does not have the authorization to generate
  device ID, then the API will return HTTP Status Code 403. The user, whose auth token
  is used, should have an Admin role for the particular VAT used in the request.
- Requires setup of connected app in api
- 'Rate Limit: 1000 API requests per minute'
- Requires setup of connected app in ClearTax.
- 'Rate Limit : 10 API requests per minute'
- Maximum invoice list can be up to 500
- 'Rate Limit : 150 API requests per minute'
- 'Rate Limit: 10 API requests per minute.'
- Electronic invoicing will be rolled out in two phases in KSA.
- Phase 1 is enforceable as of December 4th, 2021, for all taxpayers (excluding non-resident
  taxpayers).
- Phase 2 is enforceable starting January 1st, 2023.
errors:
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'GENERATION_ERROR: Check input files for correctness'
- 'UPLOAD_ERROR: Ensure file format is supported'
- 'SUCCESS: File uploaded successfully'
- 'Error: Incoming requests from ClearTax may be sent from specific IP addresses.'
- 'Unauthorized: Check API key or token expiration'
- 'Error codes can be checked at: https://docs.ewaybillgst.gov.in/apidocs/api-error-codes-list.html'
- '400 Bad Request: Check the request format or parameters'
- '401 Unauthorized: Verify authentication token'
- '429 Too Many Requests: Reduce frequency of API calls'
- 'CLI-SEC-001: Client secret header is missing or value is empty.'
- 'CLI-SEC-002: Invalid or inactive client secret.'
- 'CLI-SEC-003: API Client IP is not within the allowed IP range.'
- '400: For any kind of validation issues either from ClearTax or ZATCA.'
- '401: If the user is not authenticated for the operation.'
- '403: If the user is not authorized for the operation.'
- '429: Too many requests'
- '401: User is not authorized'
- '429: Too Many Requests'
- '403: Forbidden'
- '400: For any cleartax validation error'
- '401: If the user is not authenticated for the operation'
- '403: If the user is not authorized for the operation'
- '401 Unauthorized: If the auth token is not present or is invalid'
- '429 Too Many Requests: If the limit is exceeded'
- '403 Forbidden: If the user does not have authorization to generate device ID'
- '400: Bad Request'
- '5xx: Unhandled exception'
- '401: Authentication token is not present or is invalid'
- '403: User does not have the authorization to generate device ID'
- '403: If the user does not have the authorization to fetch invoice details'
- '5XX: Unhandled exception.'
- '401 Unauthorized: If the auth token is not present or is invalid.'
- '429 Too Many Requests: If the request limit is exceeded.'
- '400: For any Clear validation error'
- '404: If data is not present'
- '400: For any kind of validation issues'
- '404: If the data is not present'
- '5XX: Unhandled exception'
- 'HTTP Status Code - 400: Please supply a valid PDF file. Supplied file content type
  is : null , and file name is: '
- 'HTTP Status Code - 404: You don''t have any data present for the selected Document
  Details'
- 'HTTP Status Code 401: Authentication token is not present or is invalid'
- 'HTTP Status Code 429: Too Many Requests'
- 'HTTP Status Code 403: User does not have the authorization to download the invoice
  with the given search parameters'
- '400: For any kind of validation issues.'
- '403 Forbidden: If the user does not have the authorization to generate device ID'
- '6003: The async activity was not found'
- '6002: Invalid value for the field EInvoice.TaxTotal. Send the correct the value
  and try again'
- '429: Too many requests.'
- '400: Bad request Unable to process JSON.'
- '400: Bad request'
- '401: Unauthorized'
- '500: Internal server error'
auth_info:
  mentioned_objects:
  - OauthToken
  - AuthProvider
  - NamedCredential
client:
  base_url: '{{BASE_URL}}'
  headers:
    x-cleartax-auth-token: Mandatory. User auth token
    vat: Mandatory. VAT or Group VAT of the entity
    accept-language: 'Optional. Language of error message from ZATCA. Default: en.'
source_metadata: null
