resources:
- name: devices
  endpoint:
    path: /api/devices
    method: GET
    data_selector: devices
- name: admin_user
  endpoint:
    path: /ca/admin
    method: POST
    data_selector: SUBJECT
    params: {}
- name: provisioner
  endpoint:
    path: /ca/provisioner
    method: POST
    data_selector: PROVISIONER
    params: {}
- name: Google
  endpoint:
    path: /provisioner/add
    method: POST
    data_selector: provisioners
    params: {}
- name: X5C
  endpoint:
    path: /provisioner/add
    method: POST
    data_selector: provisioners
    params: {}
- name: Nebula
  endpoint:
    path: /provisioner/add
    method: POST
    data_selector: provisioners
    params: {}
- name: SSHPOP
  endpoint:
    path: /provisioner/add
    method: POST
    data_selector: provisioners
    params: {}
- name: acme-example
  endpoint:
    path: /acme/acme-example
    method: POST
    data_selector: directory
    params: {}
- name: my_scep_provisioner
  endpoint:
    path: /scep/my_scep_provisioner
    method: POST
    data_selector: provisioner
    params:
      challenge: secret1234
      encryptionAlgorithmIdentifier: 2
- name: K8sSA
  endpoint:
    path: /provisioner/k8s
    method: POST
    data_selector: provisioner
    params: {}
- name: AWS
  endpoint:
    path: /provisioner/aws
    method: POST
    data_selector: provisioner
    params: {}
- name: GCP
  endpoint:
    path: /provisioner/gcp
    method: POST
    data_selector: provisioner
    params: {}
- name: Azure
  endpoint:
    path: /provisioner/azure
    method: POST
    data_selector: provisioner
    params: {}
- name: account
  endpoint:
    path: /v2025-01-01/schemas/account
    method: GET
    data_selector: records
- name: ACME Device Attestation Provisioner
  endpoint:
    path: /v2025-01-01/schemas/acmeAttestationProvisioner
    method: GET
    data_selector: attestationFormats
    params: {}
- name: ACME Provisioner
  endpoint:
    path: /v2025-01-01/schemas/acmeProvisioner
    method: GET
    data_selector: challenges
    params: {}
- name: authority
  endpoint:
    path: /v2025-01-01/schemas/authority
    method: GET
    data_selector: records
- name: authority_csr
  endpoint:
    path: /v2025-01-01/schemas/authorityCsr
    method: GET
    data_selector: records
- name: AWS Provisioner
  endpoint:
    path: /v2025-01-01/schemas/awsProvisioner
    method: GET
    data_selector: accounts
- name: account
  endpoint:
    path: /v2025-01-01/schemas/account
    method: GET
- name: device
  endpoint:
    path: /v2025-01-01/schemas/device
    method: GET
- name: azure_provisioner
  endpoint:
    path: /v2025-01-01/schemas/azureProvisioner
    method: GET
    data_selector: records
    params: {}
- name: device
  endpoint:
    path: /v2025-01-01/schemas/device
    method: GET
    data_selector: records
    params: {}
- name: deviceDiscoverySource
  endpoint:
    path: /v2025-01-01/schemas/deviceDiscoverySource
    method: GET
    data_selector: string
- name: deviceDisplayId
  endpoint:
    path: /v2025-01-01/schemas/deviceDisplayId
    method: GET
    data_selector: string
- name: deviceMetadata
  endpoint:
    path: /v2025-01-01/schemas/deviceMetadata
    method: GET
    data_selector: dictionary
    params: {}
- name: deviceOS
  endpoint:
    path: /v2025-01-01/schemas/deviceOS
    method: GET
    data_selector: string
- name: deviceSerial
  endpoint:
    path: /v2025-01-01/schemas/deviceSerial
    method: GET
    data_selector: string
- name: deviceStatus
  endpoint:
    path: /v2025-01-01/schemas/deviceStatus
    method: GET
    data_selector: string
    params: {}
- name: deviceTags
  endpoint:
    path: /v2025-01-01/schemas/deviceTags
    method: GET
    data_selector: array[string]
- name: deviceUser
  endpoint:
    path: /v2025-01-01/schemas/deviceUser
    method: GET
    data_selector: deviceUser
- name: deviceUserPatch
  endpoint:
    path: /v2025-01-01/schemas/deviceUserPatch
    method: GET
    data_selector: email
    params: {}
- name: managed_endpoint_certificate_info
  endpoint:
    path: /v2025-01-01/schemas/endpointCertificateInfo
    method: GET
    data_selector: details
    params: {}
- name: endpointConfiguration
  endpoint:
    path: /v2025-01-01/schemas/endpointConfiguration
    method: GET
    data_selector: endpointConfiguration
    params: {}
- name: Ethernet
  endpoint:
    path: /v2025-01-01/schemas/ethernetAccount
    method: GET
    data_selector: autojoin
- name: GCP Disable Custom SANs
  endpoint:
    path: /v2025-01-01/schemas/gcpDisableCustomSANs
    method: GET
    data_selector: boolean
    params: {}
- name: GCP Project IDs
  endpoint:
    path: /v2025-01-01/schemas/gcpProjectIDs
    method: GET
    data_selector: array[string]
    params: {}
- name: GCP Provisioner
  endpoint:
    path: /v2025-01-01/schemas/gcpProvisioner
    method: GET
    data_selector: records
    params: {}
- name: ikeV2Config
  endpoint:
    path: /v2025-01-01/schemas/ikeV2Config
    method: GET
    data_selector: ''
    params: {}
- name: JWK Provisioner
  endpoint:
    path: /v2025-01-01/schemas/jwkProvisioner
    method: GET
    data_selector: records
    params: {}
- name: managedRadius
  endpoint:
    path: /v2025-01-01/schemas/managedRadius
    method: GET
    data_selector: records
    params: {}
- name: New Hosted Authority
  endpoint:
    path: /v2025-01-01/schemas/newAuthority
    method: POST
    data_selector: ''
    params: {}
- name: new_authority_csr
  endpoint:
    path: /v2025-01-01/schemas/newAuthorityCsr
    method: POST
    data_selector: activeRevocation
    params: {}
- name: OIDC Provisioner
  endpoint:
    path: /v2025-01-01/schemas/oidcProvisioner
    method: GET
    data_selector: records
- name: account
  endpoint:
    path: /v2025-01-01/schemas/account
    method: GET
    data_selector: records
    params: {}
- name: device
  endpoint:
    path: /v2025-01-01/schemas/device
    method: GET
    data_selector: records
    params: {}
- name: provisioner_webhook
  endpoint:
    path: /v2025-01-01/schemas/provisionerWebhook
    method: GET
    data_selector: webhook
    params: {}
- name: SCEP Provisioner
  endpoint:
    path: /v2025-01-01/schemas/scepProvisioner
    method: GET
    data_selector: records
    params: {}
- name: VPN
  endpoint:
    path: /v2025-01-01/schemas/vpnAccount
    method: GET
    data_selector: records
- name: WiFi
  endpoint:
    path: /v2025-01-01/schemas/wifiAccount
    method: GET
    data_selector: records
    params: {}
- name: X5C Provisioner
  endpoint:
    path: /v2025-01-01/schemas/x5cProvisioner
    method: GET
    data_selector: roots
    params: {}
- name: Add Device
  endpoint:
    path: /api/devices
    method: POST
    data_selector: responses
- name: devices
  endpoint:
    path: /devices
    method: GET
    data_selector: responses
    params: {}
- name: delete_device
  endpoint:
    path: /devices/{deviceID}
    method: DELETE
- name: device
  endpoint:
    path: /api/devices/{deviceID}
    method: GET
    data_selector: /
    params: {}
- name: update_device
  endpoint:
    path: /api/devices/{deviceID}
    method: PATCH
- name: platforms
  endpoint:
    path: /platforms
    method: GET
    data_selector: responses
- name: Create Platform
  endpoint:
    path: /api/platforms/{platformSlug}
    method: PUT
notes:
- Devices added via API are automatically approved but will not be marked as high-assurance
  until Smallstep receives an attestation from the device.
- While we think step-ca is the best open source, online Certificate Authority on
  the internet, every piece of software comes with limitations and tradeoffs.
- Uses OAuth2 with refresh token â€” requires setup of connected app in api
- Admin and Super Admin privileges are not scoped to a provisioner.
- Redirect URI should be http://127.0.0.1 for OAuth flow.
- The client secret may be visible via the CA's /provisioners API endpoint.
- Your CA must use an RSA intermediate CA for SCEP provisioner.
- K8sSA provisioner does little to no validation on the CSR before signing it.
- IIDs simplify the integration of step-ca but come with risks.
- Provide your bearer token in the Authorization header when making requests to protected
  resources.
- Some objects may return nulls in deeply nested fields
- Only ACME clients that have been preconfigured with valid EAB credentials will be
  able to create an account with this provisioner.
- At most one of bearerToken and basicAuth may be set.
- The SCEP provisioner grants certificates to clients using the SCEP protocol. This
  type is currently experimental and subject to change.
- If a device with the same permanent identifier has been synced from an MDM, then
  the response will be a merged record with data from both the request and the MDM.
- Uses Bearer Auth for authentication.
errors:
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'INVALID_REQUEST: Check the parameters passed to the request.'
- 'UNAUTHORIZED_CLIENT: Verify client credentials.'
- 'FORBIDDEN: Ensure you have the correct permissions.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- '401 Unauthorized: Recheck API key or token expiration'
- '400'
- '401'
- '403'
- '422'
- '500'
- '404'
- '400 Bad Request: Check the deviceID format'
- '401 Unauthorized: Invalid or missing authentication token'
- '403 Forbidden: Insufficient permissions to access this resource'
- '404 Not Found: Device not found'
- '500 Internal Server Error: An error occurred on the server'
- 400 Bad Request
- 401 Unauthorized
- 403 Forbidden
- 404 Not Found
- 500 Internal Server Error
- '400 Bad Request: Check query parameters.'
- '401 Unauthorized: Check authorization token.'
- '403 Forbidden: Insufficient permissions.'
- '500 Internal Server Error: Retry the request.'
auth_info:
  mentioned_objects:
  - OauthToken
  - AuthProvider
  - NamedCredential
  - Admin
  - Super Admin
  - Admin JWK
  - IdP
  - OAuth
  - JWT
  - admins
  - clientID
  - clientSecret
  - configurationEndpoint
  - domains
  - groups
  - listenAddress
  - tenantID
client:
  base_url: https://gateway.smallstep.com
  auth:
    type: Bearer
    location: header
    header_name: Authorization
  headers:
    Accept: application/json
    x-smallstep-api-version: '2025-01-01'
source_metadata: null
