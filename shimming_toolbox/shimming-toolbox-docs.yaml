resources:
- name: mask_cube
  endpoint:
    path: /masking/shapes/shape_cube
    method: POST
    data_selector: mask
    params: {}
- name: mask_sphere
  endpoint:
    path: /masking/shapes/shape_sphere
    method: POST
    data_selector: mask
    params: {}
- name: mask_square
  endpoint:
    path: /masking/shapes/shape_square
    method: POST
    data_selector: mask
    params: {}
- name: threshold
  endpoint:
    path: /masking/threshold/threshold
    method: POST
    data_selector: mask
    params: {}
- name: modify_binary_mask
  endpoint:
    path: /masking/mask_utils/modify_binary_mask
    method: POST
    data_selector: modified_mask
    params: {}
- name: resample_mask
  endpoint:
    path: /masking/mask_utils/resample_mask
    method: POST
    data_selector: resampled_mask
    params: {}
- name: mask_mrs
  endpoint:
    path: /masking/mask_mrs/mask_mrs
    method: POST
    data_selector: mask
    params: {}
- name: add_softmask_to_binmask
  endpoint:
    path: /masking/softmasks/add_softmask_to_binmask
    method: POST
    data_selector: new_soft_mask
    params: {}
- name: create_gaussian_softmask
  endpoint:
    path: /masking/softmasks/create_gaussian_softmask
    method: POST
    data_selector: soft_mask
    params: {}
- name: create_linear_softmask
  endpoint:
    path: /masking/softmasks/create_linear_softmask
    method: POST
    data_selector: soft_mask
    params: {}
- name: create_softmask
  endpoint:
    path: /masking/softmasks/create_softmask
    method: POST
    data_selector: soft_mask
    params: {}
- name: create_two_levels_softmask
  endpoint:
    path: /masking/softmasks/create_two_levels_softmask
    method: POST
    data_selector: soft_mask
    params: {}
- name: save_softmask
  endpoint:
    path: /masking/softmasks/save_softmask
    method: POST
    data_selector: nifti_file
    params: {}
- name: coil
  endpoint:
    path: /shimmingtoolbox/coils
    method: GET
    data_selector: profiles
    params: {}
- name: constraints
  endpoint:
    data_selector: constraints
- name: generate_meshgrid
  endpoint:
    path: /shimmingtoolbox/coils/coordinates/generate_meshgrid
    method: GET
    data_selector: list
    params: {}
- name: get_main_orientation
  endpoint:
    path: /shimmingtoolbox/coils/coordinates/get_main_orientation
    method: GET
    data_selector: str
    params: {}
- name: phys_gradient
  endpoint:
    path: /shimmingtoolbox/coils/coordinates/phys_gradient
    method: GET
    data_selector: numpy.ndarray
    params: {}
- name: phys_to_vox_coefs
  endpoint:
    path: /shimmingtoolbox/coils/coordinates/phys_to_vox_coefs
    method: GET
    data_selector: numpy.ndarray
    params: {}
- name: resample_from_to
  endpoint:
    path: /shimmingtoolbox/coils/coordinates/resample_from_to
    method: GET
    data_selector: nibabel.Nifti1Image
    params: {}
- name: biot_savart
  endpoint:
    path: /shimmingtoolbox/coils/biot_savart/biot_savart
    method: GET
    data_selector: numpy.ndarray
    params: {}
- name: generate_coil_bfield
  endpoint:
    path: /shimmingtoolbox/coils/biot_savart/generate_coil_bfield
    method: GET
    data_selector: numpy.ndarray
    params: {}
- name: slices
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/slices
    method: GET
- name: mask_dilation_kernel
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/mask_dilation_kernel
    method: GET
- name: mask_dilation_kernel_size
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/mask_dilation_kernel_size
    method: GET
- name: reg_factor
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/reg_factor
    method: GET
- name: path_output
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/path_output
    method: GET
- name: complex_difference
  endpoint:
    path: /field_mapping/complex_difference
    method: POST
    data_selector: result
- name: correct_2pi_offset
  endpoint:
    path: /field_mapping/correct_2pi_offset
    method: POST
    data_selector: result
- name: get_mask
  endpoint:
    path: /field_mapping/get_mask
    method: POST
    data_selector: result
- name: prepare_fieldmap
  endpoint:
    path: /field_mapping/prepare_fieldmap
    method: POST
    data_selector: result
- name: unwrap_phase
  endpoint:
    path: /unwrap/unwrap_phase
    method: POST
    data_selector: result
- name: prelude
  endpoint:
    path: /unwrap/prelude
    method: POST
    data_selector: result
- name: skimage_unwrap
  endpoint:
    path: /unwrap/skimage_unwrap
    method: POST
    data_selector: result
- name: shapes
  endpoint:
    path: /masking/shapes
    method: POST
    data_selector: result
- name: threshold
  endpoint:
    path: /masking/threshold
    method: POST
    data_selector: result
- name: modify_binary_mask
  endpoint:
    path: /masking/modify_binary_mask
    method: POST
    data_selector: result
- name: masking_resample_mask
  endpoint:
    path: /masking/resample_mask
    method: POST
    data_selector: mask
- name: masking_mrs
  endpoint:
    path: /masking/mrs
    method: POST
    data_selector: mask
- name: softmasks_add_softmask_to_binmask
  endpoint:
    path: /softmasks/add_softmask_to_binmask
    method: POST
    data_selector: new_soft_mask
- name: softmasks_create_gaussian_softmask
  endpoint:
    path: /softmasks/create_gaussian_softmask
    method: POST
    data_selector: soft_mask
- name: softmasks_create_linear_softmask
  endpoint:
    path: /softmasks/create_linear_softmask
    method: POST
    data_selector: soft_mask
- name: softmasks_create_softmask
  endpoint:
    path: /softmasks/create_softmask
    method: POST
    data_selector: soft_mask
- name: softmasks_create_two_levels_softmask
  endpoint:
    path: /softmasks/create_two_levels_softmask
    method: POST
    data_selector: soft_mask
- name: softmasks_save_softmask
  endpoint:
    path: /softmasks/save_softmask
    method: POST
    data_selector: nifti_file
- name: coils_coil
  endpoint:
    path: /coils/coil
    method: POST
    data_selector: coil_profile
- name: coils_scanner_coil
  endpoint:
    path: /coils/scanner_coil
    method: POST
    data_selector: scanner_coil
- name: spher_harm_basis
  endpoint:
    path: /shimmingtoolbox/coils/spher_harm_basis
    method: GET
- name: biot_savart
  endpoint:
    path: /shimmingtoolbox/coils/biot_savart
    method: GET
- name: coordinates
  endpoint:
    path: /shimmingtoolbox/coils/coordinates
    method: GET
- name: real_time_sequencer
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/RealTimeSequencer
    method: GET
- name: sequencer
  endpoint:
    path: /shimmingtoolbox/shim/sequencer/Sequencer
    method: GET
- name: shim_sequencer
  endpoint:
    path: /shimmingtoolbox/shim/sequencer
    method: POST
    data_selector: coefficients
    params: {}
- name: get_stability_factor
  endpoint:
    path: /get_stability_factor
    method: GET
    data_selector: residuals
    params: {}
- name: merge_bounds
  endpoint:
    path: /merge_bounds
    method: GET
    data_selector: merged_bounds
    params: {}
- name: merge_coils
  endpoint:
    path: /merge_coils
    method: GET
    data_selector: merged_coils
    params: {}
- name: optimize
  endpoint:
    path: /optimize
    method: GET
    data_selector: coefficients
    params: {}
- name: set_merged_bounds
  endpoint:
    path: /set_merged_bounds
    method: POST
    data_selector: success
    params: {}
- name: set_unshimmed
  endpoint:
    path: /set_unshimmed
    method: POST
    data_selector: success
    params: {}
- name: NiftiFile
  endpoint:
    path: /shimmingtoolbox/files/NiftiFile
    method: GET
    data_selector: records
    params: {}
- name: NiftiFieldMap
  endpoint:
    path: /shimmingtoolbox/files/NiftiFieldMap
    method: GET
    data_selector: records
    params: {}
- name: NiftiMask
  endpoint:
    path: /shimmingtoolbox/files/NiftiMask
    method: GET
    data_selector: records
    params: {}
- name: numerical_model
  endpoint:
    path: /module-shimmingtoolbox/simulate/numerical_model
    method: GET
    data_selector: records
- name: dicom_to_nifti
  endpoint:
    path: /module-shimmingtoolbox/dicom_to_nifti
    method: GET
    data_selector: records
- name: load_nifti
  endpoint:
    path: /module-shimmingtoolbox/load_nifti
    method: GET
    data_selector: records
- name: download
  endpoint:
    path: /module-shimmingtoolbox/download
    method: GET
    data_selector: records
- name: PmuResp
  endpoint:
    path: /shimmingtoolbox/pmu
    method: GET
    data_selector: data
    params: {}
- name: download_test_data
  endpoint:
    path: /st_download_data
    method: GET
    data_selector: data
    params:
      dataset: data_b1_shimming
- name: start_gui
  endpoint:
    path: /shimming-toolbox
    method: GET
    data_selector: gui
    params: {}
- name: convert_dicom_to_nifti
  endpoint:
    path: /dicom_to_nifti
    method: GET
    data_selector: nifti
    params:
      input_folder: data_b1_shimming/dicoms
      subject_name: test
      output_folder: <your-local-path>/data_b1_shimming/niftis
- name: create_mask
  endpoint:
    path: /create_mask
    method: POST
    data_selector: mask
    params:
      input_image: data_b1_shimming/niftis/derivatives/sub-test_TB1map_uncombined_mean.nii.gz
      center: 48,48,19
      size: 35,50,12
- name: coil_profiles
  endpoint:
    path: /create_coil_profiles
    method: POST
    data_selector: coil_profiles
    params:
      input: demo_config_coil_profile.json
      unwrapper: prelude
      threshold: 0.03
      output: coil_profiles.nii.gz
      relative_path: .
- name: add-shim-coefs
  endpoint:
    path: /add-shim-coefs
    method: POST
    data_selector: output
    params:
      input: fname_input
      input2: fname_input2
      output: fname_output
- name: convert-shim-coefs-format
  endpoint:
    path: /convert-shim-coefs-format
    method: POST
    data_selector: output
    params:
      input: fname_input
      input-file-format: i_format
      output-file-format: o_format
      target: fname_target
      output: fname_output
- name: dynamic
  endpoint:
    path: /dynamic
    method: POST
    data_selector: output
    params:
      coil: coils
      fmap: fname_fmap
      target: fname_target
      mask: fname_mask
- name: max-intensity
  endpoint:
    path: /max-intensity
    method: POST
    data_selector: output
    params:
      input: fname_input
      mask: fname_mask
      output: fname_output
- name: realtime-dynamic
  endpoint:
    path: /realtime-dynamic
    method: POST
    data_selector: output
    params:
      coil: coils_static
      fmap: fname_fmap
      target: fname_target
      resp: fname_resp
- name: st_b1shim
  endpoint:
    path: /st_b1shim
    method: POST
    data_selector: weights
    params:
      b1: <fname_b1>
      mask: <fname_mask>
      algo: '1'
      output: ./b1_shim_results
- name: st_mask
  endpoint:
    path: /st_mask
    method: POST
    data_selector: mask
    params:
      input: <fname_input>
      output: ./mask
- name: fsleyes
  endpoint:
    path: /fsleyes
    method: GET
notes:
- Path to the directory to output figures. Set logging level to debug to output debug
  artefacts.
- Optimizes shim parameters for static and dynamic shimming.
- Make sure the extent of the coil profiles are larger than the extent of the fieldmap.
- Raises KeyError if the key is not found and required=True.
- Simulation can export to NIfTI file format
- To facilitate reproducibility, commands can be chained together in a pipeline using
  multiple Shimming Toolbox commands.
- Conda requires an installation path that does not contain spaces.
- The installer will install Shimming Toolbox into an isolated environment.
- This tutorial only covers static B1+ shimming applications performed on Siemens
  scanners.
- Prelude is necessary to be able to calculate the field maps.
- The output B0 coil profile is scaled in Hz/<current> where current depends on the
  value in the configuration file.
- Default output filenames are given in the options.
- Default slice ordering is 'auto'.
- Default slice factor is '1'.
- Default optimizer method is 'quad_prog'.
- Default optimizer criteria is 'mse'.
- Default regularization factor is '0.0'.
- Default mask dilation kernel size is '3'.
- Default fat saturation is 'auto'.
- Default output directory is '/home/docs/checkouts/readthedocs.org/user_builds/shimming-toolbox-py/checkouts/latest/docs/source'.
- Default output file format for coil is 'slicewise-ch'.
- Default output file format for scanner is 'slicewise-ch'.
- Default output value format is 'delta'.
- Uses Command Line Tools for processing.
- Support fsleyes as a GUI.
errors:
- 'INVALID_INPUT: Check the input parameters for the shim sequencer.'
- 'OPTIMIZATION_FAILED: The optimization process did not converge.'
auth_info:
  mentioned_objects: []
client:
  base_url: https://shimmingtoolbox.api.com
source_metadata: null
