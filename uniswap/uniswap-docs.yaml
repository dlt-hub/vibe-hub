resources:
- name: v4
  endpoint:
    path: /subgraphs/id/DiYPVdygkfjDWhbxGSqAQxwBKmfKnkWQojqeM2rkLb3G
    method: GET
- name: v3
  endpoint:
    path: /subgraphs/id/5zvR82QoaXYFyDEKLZ9t6v9adgnptxYpKpSbxtgVENFV
    method: GET
- name: v2
  endpoint:
    path: /subgraphs/id/A3Np3RQbaBA6oKJgiwDJeo5T3zrYfGHPWFYayMwtNDum
    method: GET
- name: v1
  endpoint:
    path: /subgraphs/id/ESnjgAG9NjfmHypk4Huu4PVvz55fUwpyrRqHF21thoLJ
    method: GET
- name: PoolManager
  endpoint:
    path: /contracts/PoolManager
    method: GET
    data_selector: address
- name: PositionDescriptor
  endpoint:
    path: /contracts/PositionDescriptor
    method: GET
    data_selector: address
- name: PositionManager
  endpoint:
    path: /contracts/PositionManager
    method: GET
    data_selector: address
- name: Quoter
  endpoint:
    path: /contracts/Quoter
    method: GET
    data_selector: address
- name: StateView
  endpoint:
    path: /contracts/StateView
    method: GET
    data_selector: address
- name: Universal Router
  endpoint:
    path: /contracts/UniversalRouter
    method: GET
    data_selector: address
- name: Permit2
  endpoint:
    path: /contracts/Permit2
    method: GET
    data_selector: address
- name: PoolManager
  endpoint:
    path: https://explorer.zora.energy/address/0x0575338e4c17006ae181b47900a84404247ca30f
    method: GET
- name: PositionDescriptor
  endpoint:
    path: https://explorer.zora.energy/address/0x7d64630bbb4993b5578dbd65e400961c9e68d55a
    method: GET
- name: PositionManager
  endpoint:
    path: https://explorer.zora.energy/address/0xf66c7b99e2040f0d9b326b3b7c152e9663543d63
    method: GET
- name: Quoter
  endpoint:
    path: https://explorer.zora.energy/address/0x5edaccc0660e0a2c44b06e07ce8b915e625dc2c6
    method: GET
- name: StateView
  endpoint:
    path: https://explorer.zora.energy/address/0x385785af07d63b50d0a0ea57c4ff89d06adf7328
    method: GET
- name: Universal Router
  endpoint:
    path: https://explorer.zora.energy/address/0x3315ef7ca28db74abadc6c44570efdf06b04b020
    method: GET
- name: Permit2
  endpoint:
    path: https://explorer.zora.energy/address/0x000000000022D473030F116dDEE9F6B43aC78BA3
    method: GET
- name: PoolManager
  endpoint:
    path: https://github.com/Uniswap/v4-core/blob/main/src/PoolManager.sol
    method: GET
- name: Universal Router
  endpoint:
    path: https://github.com/Uniswap/universal-router/blob/dev/contracts/UniversalRouter.sol
    method: GET
- name: PositionManager
  endpoint:
    path: https://github.com/Uniswap/v4-periphery/blob/main/src/PositionManager.sol
    method: GET
- name: StateView
  endpoint:
    path: https://github.com/Uniswap/v4-periphery/blob/main/src/lens/StateView.sol
    method: GET
- name: Quoter
  endpoint:
    path: https://github.com/Uniswap/v4-periphery/blob/main/src/lens/V4Quoter.sol
    method: GET
- name: PoolSwapTest
  endpoint:
    path: https://github.com/Uniswap/v4-core/blob/main/src/test/PoolSwapTest.sol
    method: GET
- name: PoolModifyLiquidityTest
  endpoint:
    path: https://github.com/Uniswap/v4-core/blob/main/src/test/PoolModifyLiquidityTest.sol
    method: GET
- name: Permit2
  endpoint:
    path: https://github.com/Uniswap/permit2
    method: GET
- name: quoteExactInputSingle
  endpoint:
    path: /quoteExactInputSingle
    method: GET
    data_selector: quotedAmountOut
- name: single_swap
  endpoint:
    path: /v4/swap
    method: POST
    data_selector: data
    params: {}
- name: multi-hop_swap
  endpoint:
    path: /v4/multi-hop-swap
    method: POST
    data_selector: swapDetails
    params: {}
- name: trade
  endpoint:
    path: /api/trade
    method: POST
    data_selector: tradeResponse
- name: quote
  endpoint:
    path: /api/quotes
    method: POST
    data_selector: quote
    params: {}
- name: routing
  endpoint:
    path: /api/subgraph/overview
    method: GET
- name: mint_position
  endpoint:
    path: /v3/mint
    method: POST
    data_selector: data
    params: {}
- name: Liquidity Positions
  endpoint:
    path: /api/liquidity_positions
    method: GET
    data_selector: positions
    params: {}
- name: positions
  endpoint:
    path: /positions
    method: GET
    data_selector: positions
- name: addLiquidity
  endpoint:
    path: /sdk/v3/guides/liquidity/modifying-position/add
    method: POST
- name: removeLiquidity
  endpoint:
    path: /sdk/v3/guides/liquidity/modifying-position/remove
    method: POST
- name: collect_fees
  endpoint:
    path: /sdk/v3/guides/liquidity/liquidity-fees
    method: GET
    data_selector: fees
    params: {}
- name: swap_add_liquidity
  endpoint:
    path: /v3/swap-and-add
    method: POST
    data_selector: data
    params: {}
- name: Range Orders
  endpoint:
    path: /sdk/v3/guides/advanced/range-orders
    method: GET
    data_selector: content
    params: {}
- name: CounterHook
  endpoint:
    path: ./src/CounterHook.sol
    method: GET
    data_selector: ''
    params: {}
- name: Pool
  endpoint:
    path: /contracts/v4/quickstart/create-pool
    method: POST
    data_selector: poolData
    params: {}
- name: UniversalRouter
  endpoint:
    path: /contracts/universal-router
    method: POST
    data_selector: ''
- name: PoolManager
  endpoint:
    path: /contracts/pool-manager
    method: GET
    data_selector: ''
- name: Permit2
  endpoint:
    path: /contracts/permit2
    method: POST
    data_selector: ''
- name: SwapHook
  endpoint:
    path: /contracts/v4/quickstart/hooks/swap
    method: GET
    data_selector: parameters
- name: LiquidityHook
  endpoint:
    path: /liquidity/hooks
    method: GET
    data_selector: hooks
    params: {}
- name: AsyncSwapHook
  endpoint:
    path: /contracts/v4/quickstart/hooks/async-swap
    method: GET
    data_selector: records
- name: mint_position
  endpoint:
    path: /contracts/v4/quickstart/manage-liquidity/mint-position
    method: GET
    data_selector: records
- name: PositionManager
  endpoint:
    path: /contracts/v4/quickstart/manage-liquidity/increase-liquidity
    method: POST
    data_selector: actions
    params: {}
- name: liquidity_positions
  endpoint:
    path: /v4/liquidity_positions
    method: GET
    data_selector: positions
    params: {}
- name: Collect Fees
  endpoint:
    path: /contracts/v4/quickstart/manage-liquidity/collect
    method: GET
- name: burn_position
  endpoint:
    path: /contracts/v4/quickstart/manage-liquidity/burn-liquidity
    method: POST
- name: Batch Modify
  endpoint:
    path: /contracts/v4/quickstart/manage-liquidity/batch-liquidity
    method: GET
- name: flash_accounting
  endpoint:
    path: /contracts/v4/guides/flash-accounting
    method: GET
    data_selector: none
    params: {}
- name: unlock_callback
  endpoint:
    path: /contracts/v4/guides/unlock-callback
    method: GET
- name: operations
  endpoint:
    path: /contracts/v4/guides/unlock-callback#operations
    method: GET
- name: pool_state
  endpoint:
    path: /contracts/v4/guides/read-pool-state
    method: GET
    data_selector: poolData
- name: hook_fee_example
  endpoint:
    path: /contracts/v4/hooks/hook_fee_example
    method: GET
    data_selector: records
- name: hook_fee_after_swap
  endpoint:
    path: /contracts/v4/hooks/hook_fee_after_swap
    method: GET
    data_selector: records
- name: HookFeeAfterSwap
  endpoint:
    path: /contracts/v4/hooks/HookFeeAfterSwap
    method: GET
    data_selector: records
- name: UniversalRouter
  endpoint:
    path: /contracts/universal-router
    method: GET
    data_selector: data
    params: {}
- name: position_manager
  endpoint:
    path: /contracts/v4/position-manager
    method: POST
    data_selector: actions
    params: {}
- name: burnPosition
  endpoint:
    path: /burnPosition
    method: POST
    data_selector: actions
    params: {}
- name: rebalanceLiquidity
  endpoint:
    path: /rebalanceLiquidity
    method: POST
    data_selector: actions
    params: {}
- name: modifyLiquidities
  endpoint:
    path: /modifyLiquidities
    method: POST
    data_selector: actions
    params: {}
- name: modifyLiquiditiesWithoutUnlock
  endpoint:
    path: /modifyLiquiditiesWithoutUnlock
    method: POST
    data_selector: actions
    params: {}
- name: getSlot0
  endpoint:
    path: /stateView/getSlot0
    method: GET
    data_selector: sqrtPriceX96
    params: {}
- name: getLiquidity
  endpoint:
    path: /stateView/getLiquidity
    method: GET
    data_selector: liquidity
    params: {}
- name: getPositionInfo
  endpoint:
    path: /stateView/getPositionInfo
    method: GET
    data_selector: positionInfo
    params: {}
- name: getFeeGrowthGlobals
  endpoint:
    path: /stateView/getFeeGrowthGlobals
    method: GET
    data_selector: feeGrowthGlobals
    params: {}
- name: AccessSenderHook
  endpoint:
    path: /contracts/v4/guides/accessing-msg.sender-using-hook
    method: GET
    data_selector: records
- name: calculate_lp_fees
  endpoint:
    path: /contracts/v4/guides/calculate-lp-fees
    method: GET
    data_selector: records
- name: Subscriber
  endpoint:
    path: /contracts/v4/guides/subscriber
    method: GET
    data_selector: records
- name: PointsHook
  endpoint:
    path: /contracts/v4/hooks/PointsHook
    method: POST
    data_selector: hookData
    params: {}
- name: PointsToken
  endpoint:
    path: /contracts/v4/tokens/PointsToken
    method: POST
    data_selector: tokenData
    params: {}
- name: core_contracts
  endpoint:
    path: /contracts/v2/core
    method: GET
    data_selector: core
- name: periphery_contracts
  endpoint:
    path: /contracts/v2/periphery
    method: GET
    data_selector: periphery
- name: factory
  endpoint:
    path: /contracts/v2/factory
    method: GET
    data_selector: factory
- name: pairs
  endpoint:
    path: /contracts/v2/pairs
    method: GET
    data_selector: pairs
- name: pools
  endpoint:
    path: /pools
    method: GET
    data_selector: pools
    params: {}
- name: PairCreated
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: events
- name: getPair
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: read-only functions
- name: allPairs
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: read-only functions
- name: allPairsLength
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: read-only functions
- name: feeTo
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: read-only functions
- name: feeToSetter
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: read-only functions
- name: createPair
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: POST
    data_selector: state-changing functions
- name: resource_lock
  endpoint:
    path: /contracts/the-compact/reference/resource-locks
    method: GET
    data_selector: resource_locks
    params: {}
- name: allocator
  endpoint:
    path: /contracts/the-compact/reference/allocators
    method: GET
    data_selector: allocators
    params: {}
- name: arbiters
  endpoint:
    path: /contracts/the-compact/reference/arbiters
    method: GET
    data_selector: arbiters
    params: {}
- name: emissary
  endpoint:
    path: /contracts/the-compact/reference/src/interfaces/IEmissary.sol
    method: GET
    data_selector: records
    params: {}
- name: tribunal
  endpoint:
    path: /contracts/the-compact/reference/tribunal
    method: GET
    data_selector: records
    params: {}
- name: UniswapFactory
  endpoint:
    path: /uniswap/factory
    method: GET
    data_selector: data
- name: Token
  endpoint:
    path: /uniswap/token
    method: GET
    data_selector: data
- name: Pair
  endpoint:
    path: /uniswap/pair
    method: GET
    data_selector: data
- name: User
  endpoint:
    path: /uniswap/user
    method: GET
    data_selector: data
- name: Transaction
  endpoint:
    path: /uniswap/transaction
    method: GET
    data_selector: data
- name: global_stats
  endpoint:
    path: /subgraph/uniswap/uniswap-v2
    method: POST
    data_selector: uniswapFactory
    params: {}
- name: pair_data
  endpoint:
    path: /subgraph/uniswap/uniswap-v2
    method: POST
    data_selector: pair
    params: {}
- name: token_data
  endpoint:
    path: /subgraph/uniswap/uniswap-v2
    method: POST
    data_selector: token
    params: {}
- name: eth_price
  endpoint:
    path: /subgraph/uniswap/uniswap-v2
    method: POST
    data_selector: bundle
    params: {}
- name: governance
  endpoint:
    path: /v2/governance
    method: GET
    data_selector: data
    params: {}
- name: LiquidityValueCalculator
  endpoint:
    path: /contracts/LiquidityValueCalculator
    method: POST
    data_selector: data
    params: {}
- name: swap
  endpoint:
    path: /contracts/v2/guides/smart-contract-integration/trading-from-a-smart-contract
    method: GET
    data_selector: example
    params: {}
- name: flash_swaps
  endpoint:
    path: /v2/flash_swaps
    method: GET
    data_selector: data
    params: {}
- name: getPair
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory#getpair
    method: GET
    data_selector: address
    params: {}
- name: CREATE2
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory#CREATE2
    method: GET
    data_selector: factory address
    params: {}
- name: pair_addresses
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory#getpair
    method: GET
    data_selector: pair
    params: {}
- name: tokens
  endpoint:
    path: /api/tokens
    method: GET
    data_selector: tokens
- name: pairs
  endpoint:
    path: /api/pairs
    method: GET
    data_selector: pairs
- name: swapExactETHForTokens
  endpoint:
    path: /contracts/v2/reference/smart-contracts/router-02#swapexactethfortokens
    method: POST
- name: pair
  endpoint:
    path: /sdk/v2/reference/pair
    method: GET
    data_selector: Pair
    params: {}
- name: route
  endpoint:
    path: /sdk/v2/reference/route
    method: GET
    data_selector: pairs
    params: {}
- name: trade
  endpoint:
    path: /api/v2/trade
    method: GET
    data_selector: tradeData
    params: {}
- name: PairCreated
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: PairCreated
    params: {}
- name: getPair
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: getPair
    params: {}
- name: allPairs
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: allPairs
    params: {}
- name: allPairsLength
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: allPairsLength
    params: {}
- name: feeTo
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: feeTo
    params: {}
- name: feeToSetter
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: GET
    data_selector: feeToSetter
    params: {}
- name: createPair
  endpoint:
    path: /contracts/v2/reference/smart-contracts/factory
    method: POST
    data_selector: createPair
    params: {}
notes:
- v4 requires all swapping operations to go through the Universal Router.
- All swaps must be 'planned' using v4Planner.
- Position enumeration must happen off-chain through event indexing.
- Uses Universal Router for executing swaps
- Ensure proper token approvals for ERC20 swaps
- Uses Uniswap V4 SDK for executing multi-hop swaps
- Includes functionality to wrap/unwrap ETH as needed for swaps.
- RPCs are either full or archival nodes with a JSON-RPC interface.
- When choosing an RPC provider, look for one that supports websockets for better
  performance.
- Liquidity positions are represented using non-fungible tokens.
- This guide assumes you are familiar with our Minting a Position guide.
- Collecting fees requires a minted position.
- Uses OAuth2 with refresh token â€” requires setup of connected app in Uniswap
- Ensure liquidity position is minted before adding liquidity
- Executing a range order has certain limitations that may have become obvious during
  the course of this guide.
- Range Orders can only be created between initializable ticks and may not exactly
  represent our limit order Price-Target.
- Requires foundry for building and testing
- Use Universal Router for swaps to simplify interactions.
- The swap hook is not production ready code, and is implemented in a simplistic manner
  for the purpose of learning.
- The liquidity examples are not production ready code, and are implemented in a simplistic
  manner for the purpose of learning.
- AsyncSwap only works on exact-input swaps and the beforeSwap must take the input
  currency and return BeforeSwapDelta.
- The flexibility of AsyncSwap means hook developers can implement harmful behavior.
- Liquidity positions are minted as ERC-721 tokens and depend on a periphery contract.
- To obtain balance changes, callers should read token balances before and after the
  .modifyLiquidities() call.
- Some positions may return nulls in deeply nested fields
- To collect fees, the integrator must execute encoded actions using the PositionManager
  contract.
- There is no COLLECT command, instead developers must decrease liquidity with a zero
  liquidity change.
- To obtain the amount of fees received, callers should read token balances before
  and after the .modifyLiquidities() call.
- All operations that access pool liquidity must occur while the PoolManager is unlocked.
- Every delta must be resolved before the transaction ends, or the entire transaction
  will revert.
- In v4, reading pool state involves a complex mapping within the PoolManager contract.
- Custom accounting and hook fees allow for tailored AMM experiences.
- By implementing hook fees this way, we've leveraged Uniswap v4's delta accounting
  system to create a seamless fee collection mechanism.
- The Universal Router is designed to execute complex swap operations across various
  protocols.
- The Position Manager uses a batched command pattern that allows multiple operations
  to be executed in a single transaction.
- Make sure you include an address mapping in your hook for the routers before adding
  the functions.
- Subscribers allow contracts to be notified by the PositionManager about events like
  liquidity changes.
- The data parameter in notifySubscribe is optional and its interpretation is implementation-specific.
- Uses hooks to reward users based on ETH swapped or liquidity added.
- It is important to note that the delta should be passed to awardPoints function
  as it avoids amount errors in case of partial fills.
- Emissaries provide a fallback verification mechanism for sponsors when authorizing
  claims.
- The updated reference for the newly deployed Governor Bravo is available via Etherscan.
- Access to an external price source is required for swaps.
- Smart contracts must perform safety checks to avoid exploitation.
errors:
- 'INSUFFICIENT_LIQUIDITY: Check liquidity amounts and token ratios'
- 'SWAP_FAILED: Verify swap parameters and approvals'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'Insufficient output amount: Verify minimum amount specified.'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- 'Not pool manager: Must check caller is PoolManager'
- 'InvalidToken(address token): Invalid token address provided'
- 'InvalidLockTag(): Invalid lock tag provided'
- 'InvalidDepositBalanceChange(): Actual balance change doesn''t match expectations'
- 'PrematureWithdrawal(uint256 id): Attempting withdrawal before reset period'
- 'ForcedWithdrawalFailed(): Forced withdrawal operation failed'
- 'InvalidAllocation(address allocator): Invalid allocator used'
- 'InvalidBatchAllocation(): Batch allocation is invalid'
- 'InvalidRegistrationProof(address allocator): Registration proof is invalid'
- 'InconsistentAllocators(): Allocators are inconsistent across batch operations'
- 'InvalidNonce(address account, uint256 nonce): Nonce is invalid or already consumed'
- 'InvalidArbiter: The caller is not the designated arbiter'
- 'ClaimExpired: The claim has passed its expiration time'
- 'InvalidClaimSignature: The sponsor''s signature is invalid'
- 'UnauthorizedClaim: The arbiter is not authorized for this claim'
auth_info:
  mentioned_objects:
  - AlphaRouter
  - SwapAndAddOptions
  - SwapAndAddConfig
client:
  base_url: https://api.uniswap.org
  headers:
    Accept: application/json
source_metadata: null
