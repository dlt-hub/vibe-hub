resources:
- name: Test Connection
  endpoint:
    path: /api/v1/hc
    method: GET
    data_selector: status
- name: List Available Connections
  endpoint:
    path: /api/v1/connections/list
    method: GET
    data_selector: results
- name: Identifier Retrieval
  endpoint:
    path: /api/v1/privacy/identifiers/:connection-uuid
    method: POST
    data_selector: results
- name: Submit an Access Request
  endpoint:
    path: /api/v1/privacy/access/:connection-uuid
    method: POST
    data_selector: status
- name: Submit a Deletion Request
  endpoint:
    path: /api/v1/privacy/delete/:connection-uuid
    method: POST
    data_selector: status
- name: Submit an Opt-Out Request
  endpoint:
    path: /api/v1/privacy/optout/:connection-uuid
    method: POST
    data_selector: status
- name: retrieve_results
  endpoint:
    path: /api/v1/results/retrieve
    method: POST
    data_selector: results
    params: {}
- name: webhook_callback
  endpoint:
    path: /api/v1/data-request-callback
    method: POST
    data_selector: '{}'
    params: {}
- name: privacy_requests
  endpoint:
    path: /api/v2/privacy_requests
    method: GET
    data_selector: records
- name: privacy_requests
  endpoint:
    path: /api/v2/privacy-requests
    method: GET
    data_selector: requests
    params: {}
- name: consent_audit_logs
  endpoint:
    path: /api/v2/consent-audit-logs
    method: GET
    data_selector: logs
    params: {}
- name: processing_activities
  endpoint:
    path: /api/v2/processing-activities
    method: GET
    data_selector: data
    params: {}
- name: Privacy Request Index
  endpoint:
    path: /get-a-list-of-privacy-requests
    method: GET
- name: Privacy Request Policies Index
  endpoint:
    path: /get-a-list-of-privacy-request-policies
    method: GET
- name: Consent Audit Logs
  endpoint:
    path: /fetch-the-consent-audit-log
    method: GET
- name: PrivacyRequest
  endpoint:
    path: /v2/privacy-requests
    method: GET
    data_selector: data
    params: {}
- name: Consent
  endpoint:
    path: /v2/consents
    method: GET
    data_selector: data
    params: {}
- name: request_manager
  endpoint:
    path: /request-manager
    method: GET
- name: opt_out_requests
  endpoint:
    path: /opt-out-requests
    method: POST
    data_selector: request
    params: {}
- name: forms
  endpoint:
    path: /forms
    method: GET
- name: form_details
  endpoint:
    path: /forms/form_id
    method: GET
- name: form_responses
  endpoint:
    path: /forms/form_id/responses
    method: GET
- name: delete_form_responses
  endpoint:
    path: /forms/form_id/responses
    method: DEL
- name: webhook
  endpoint:
    path: /api/v2/webhooks
    method: POST
- name: cookie_scanner
  endpoint:
    path: /api/v2/cookies
    method: GET
    data_selector: cookies
    params: {}
- name: trackings
  endpoint:
    path: /trackings
    method: GET
- name: update_tracking
  endpoint:
    path: /trackings/tracking_id
    method: PUT
- name: Request Manager
  endpoint:
    path: /api/now/table/request
    method: GET
    data_selector: result
- name: Live Data Map
  endpoint:
    path: /api/now/table/live_data_map
    method: GET
    data_selector: result
- name: upload_files
  endpoint:
    path: /api/v2/privacy_requests/:id/integrations/:integration_id/files
    method: POST
- name: test_connection
  endpoint:
    path: /test_connection
    method: GET
- name: schema
  endpoint:
    path: /schema
    method: GET
- name: record_count
  endpoint:
    path: /record_count
    method: GET
- name: sample_data
  endpoint:
    path: /sample_data
    method: GET
- name: opt_out_integrations
  endpoint:
    path: /api/v2/opt_outs/:uuid/integration_states
    method: GET
    data_selector: data
    params: {}
- name: query
  endpoint:
    path: /services/data/v38.0/query
    method: GET
- name: sobjects
  endpoint:
    path: /services/data/v38.0/sobjects
    method: GET
- name: users
  endpoint:
    path: /scim/v2/Users
    method: POST
    data_selector: Users
    params: {}
- name: consent_audit_log
  endpoint:
    path: /consent/audit_log
    method: GET
    data_selector: data
    params:
      limit: 10000
      offset: 0
- name: privacy_request_integrations
  endpoint:
    path: /api/v2/privacy_requests/:id/integrations
    method: GET
- name: privacy_requests
  endpoint:
    path: /api/v2/privacy_requests
    method: POST
    data_selector: response
    params: {}
- name: privacy_requests
  endpoint:
    path: /privacy_requests
    method: GET
    data_selector: data
    params: {}
- name: privacy_request_policies
  endpoint:
    path: /api/v2/privacy_request_policies
    method: GET
    data_selector: data
    params: {}
- name: accounts
  endpoint:
    params:
      scope: accounts:read
- name: profiles
  endpoint:
    params:
      scope: profiles:read
- name: lists
  endpoint:
    params:
      scope: lists:read
- name: segments
  endpoint:
    params:
      scope: segments:read
- name: data-privacy
  endpoint:
    params:
      scope:
      - data-privacy:read
      - data-privacy:write
- name: Test Connection
  endpoint:
    path: /api/v1/hc
    method: GET
- name: List Available Connections
  endpoint:
    path: /api/v1/connections/list
    method: GET
- name: Identifier Retrieval
  endpoint:
    path: /api/v1/privacy/identifiers/:connection-uuid
    method: POST
- name: Submit an Access Request
  endpoint:
    path: /api/v1/privacy/access/:connection-uuid
    method: POST
- name: Submit a Deletion Request
  endpoint:
    path: /api/v1/privacy/delete/:connection-uuid
    method: POST
- name: Submit an Opt-Out Request
  endpoint:
    path: /api/v1/privacy/optout/:connection-uuid
    method: POST
- name: retrieve_results
  endpoint:
    path: /api/v1/results/retrieve
    method: POST
    data_selector: status
    params: {}
- name: webhook_callback
  endpoint:
    path: /api/v1/data-request-callback
    method: POST
    data_selector: '{}'
    params: {}
- name: request_manager
  endpoint:
    path: /request-manager
    method: GET
    data_selector: data
    params: {}
- name: consent
  endpoint:
    path: /consent
    method: GET
    data_selector: data
    params: {}
- name: live_data_map
  endpoint:
    path: /live-data-map
    method: GET
    data_selector: data
    params: {}
- name: risk_assessments
  endpoint:
    path: /risk-assessments
    method: GET
    data_selector: data
    params: {}
- name: integration_statuses
  endpoint:
    path: /api/v2/integration_statuses
    method: GET
    data_selector: records
- name: request_manager
  endpoint:
    path: /api/v2/request_manager
    method: GET
    data_selector: records
- name: Transactional Mailer
  endpoint:
    path: /api/v2/transactional_mailer
    method: POST
    data_selector: data
    params: {}
- name: Cloud Storage
  endpoint:
    path: /api/v2/cloud_storage
    method: POST
    data_selector: data
    params: {}
- name: audit_log
  endpoint:
    path: /audit_logs
    method: GET
    data_selector: logs
- name: Direct Contact Email Resend
  endpoint:
    path: /api/v1/direct_contact/resend_email
    method: POST
    data_selector: response
    params: {}
- name: messages
  endpoint:
    path: /api/messages/send
    method: POST
- name: senders
  endpoint:
    path: /api/senders/domains
    method: GET
- name: privacy_requests
  endpoint:
    path: /privacy-requests
    method: GET
- name: logs
  endpoint:
    path: /logs
    method: GET
- name: datagrail-blob-storage
  endpoint:
    path: /datagrail-blob-storage
    method: GET
- name: Consent Management
  endpoint:
    path: /consent/management
    method: GET
    data_selector: records
- name: custom_service
  endpoint:
    path: /tracking-services
    method: POST
    data_selector: service
    params: {}
- name: Risk Assessments
  endpoint:
    path: /risk-assessments
    method: GET
    data_selector: assessments
- name: Risk
  endpoint:
    path: /api/v2/risk
    method: POST
    data_selector: risk
    params: {}
- name: risk_assessments
  endpoint:
    path: /risk_assessments
    method: GET
    data_selector: assessments
- name: email_intake
  endpoint:
    path: /email_intake
    method: POST
    data_selector: requests
    params: {}
- name: confirm_agent_running
  endpoint:
    path: /
    method: GET
- name: authenticate_and_retrieve_token
  endpoint:
    path: /api/v1/token
    method: POST
- name: list_available_connections
  endpoint:
    path: /api/v1/connections/list
    method: GET
- name: perform_all_health_checks
  endpoint:
    path: /api/v1/hc
    method: GET
- name: perform_single_health_check
  endpoint:
    path: /api/v1/hc/{connection-uuid}
    method: GET
- name: submit_an_access_request
  endpoint:
    path: /api/v1/privacy/access/{connection-uuid}
    method: POST
- name: submit_a_deletion_request
  endpoint:
    path: /api/v1/privacy/delete/{connection-uuid}
    method: POST
- name: submit_an_identifier_retrieval_request
  endpoint:
    path: /api/v1/privacy/identifiers/{connection-uuid}
    method: POST
- name: submit_an_opt_out_request
  endpoint:
    path: /api/v1/privacy/optout/{connection-uuid}
    method: POST
- name: contacts
  endpoint:
    path: /contacts
    method: GET
    data_selector: records
    params: {}
- name: Contacts DB
  endpoint:
    path: null
    method: null
    data_selector: null
    params: {}
- name: access
  endpoint:
    queries:
      access:
      - ./dsr.py access {email}
- name: delete
  endpoint:
    queries:
      delete:
      - ./dsr.py delete {email}
- name: optout
  endpoint:
    queries:
      optout:
      - ./dsr.py optout {email}
- name: identifiers
  endpoint:
    queries:
      identifiers:
        phone_number:
        - ./dsr.py identifiers {email}
- name: load_balancer
  endpoint:
    path: /services/data/vXX.X/sobjects/LoadBalancer
    method: POST
    data_selector: records
- name: ecs_service
  endpoint:
    path: /services/data/vXX.X/sobjects/ECSService
    method: POST
    data_selector: records
- name: Request Manager Agent
  endpoint:
    path: /datagrail-rm-agent
    method: POST
notes:
- All interactions with DataGrail must be secured using HTTPS via TLS v1.2 or above.
- At least one Production environment is required to receive real privacy requests.
- DataGrail only guarantees polling this endpoint with a frequency of every 15 minutes
  for a default period of 3 days.
- Requires setup of connected app in DataGrail
- Some integrations may have specific requirements
- Uses OAuth2 with refresh token — requires setup of connected app in DataGrail
- Improved retry logic for handling SERVER_UNAVAILABLE errors from Salesforce Sandbox
  Environments.
- Token Based Authentication for the Oracle Netsuite Integration is no longer supported.
  OAuth 2.0 authentication is now required.
- Opt-Out Requests no longer require the first and last name field.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Improved rate limit handling for the Facebook Marketing Integration.
- Detailed error information when connecting an API Integration has been added to
  Integrations page.
- Uses OAuth2 authentication.
- Improved the load time on the Data Subject Requests page.
- Requires OAuth2 authentication setup.
- Some integrations may have specific configuration requirements.
- Ensure OAuth2 token is up to date to avoid authentication errors.
- Rate limits apply to API calls based on user account tier.
- Some objects may return nulls in deeply nested fields
- Moved to Cursor-based pagination for the Gorgias integration, due to the deprecation
  of Gorgias' offset-based pagination.
- Direct Contact Integrations are no longer separate from API Integrations.
- On active Privacy Requests, users can now upload files to expired Direct Contact
  Integrations directly through the app.
- Ensure Required Permissions Are Granted on API Keys/Resources
- Review Required Account Types and User Roles
- Opt Out Requests can be created manually or through the API.
- The `ccpa_dnsmpi` cookie can be set on requests created through the Privacy Request
  Center.
- DataGrail supports requests throttling to stay within 70-80% of specified service
  rate limits.
- Requests succeed again after enough requests have emptied out of the bucket.
- DataGrail uses a layered system detection approach to ensure accuracy, completeness,
  and results you can trust.
- The System Detection process runs daily to provide continuous detection as your
  IT landscape changes.
- Webhook notifications will be sent as HTTP POST requests with a JSON body to the
  configured webhook endpoint.
- DataGrail can only retrieve and manage first-party cookies.
- It may take a few hours to start seeing scanned cookies populate within DataGrail.
- Facebook Marketing deletion does not occur immediately and usually take up to 24
  hours to process.
- The more posts you delete and/or the more custom audiences your account contains,
  the longer it takes to process your request.
- A Data Protection Officer or Representative has been assigned in Settings -> Reporting
  Contacts.
- All Processing Activities have complete RoPA data, with no missing mandatory fields.
- DataGrail only supports connections with SCIM v2.0.
- Each email that DataGrail sends out to data subjects is accessible within the platform
  as a customizable template.
- Integration encountered an issue that could not be resolved programmatically.
- The request type must be supported by the privacy request policy.
- We do not recommend use of an individual user's API credentials for the DataGrail
  integration connection. To ensure a reliable connection, we recommend creating a
  service account in Braintree to generate the API credentials.
- OAuth (Recommended) or Private Key Authentication can be used.
- 'Ensure you have sufficient privileges: Super Admin or Connections Manager for DataGrail;
  Admin for Klaviyo.'
- Ensure API access is enabled on your ZoomInfo account
- Inbound Assessments are only supported for accounts using Okta and OneLogin for
  SSO.
- Implementing a Consent Management Solution is a major change on your website.
- Always recommend configuring and testing DataGrail on a staging site before doing
  so on your production one.
- Support Access is customer-initiated and requires explicit consent.
- Support Access is temporary and expires after the selected duration or if manually
  revoked.
- 'Ensure you have sufficient privileges: Super Admin, Connections Manager for DataGrail
  and Admin for SQL Server.'
- Read-only credentials are created and stored in a vault on your network.
- Ensure the Agent has the necessary permissions to access the BigQuery credentials
  stored in your vault.
- Requests to the API will be made over port 443.
- Some integrations may have specific requirements for configuration.
- DataGrail requires setup of connected app for integrations.
- Logs are exported once per day, capturing all activity from the previous 24-hour
  period.
- Logs are exported in JSON format for easy integration with SIEM platforms.
- DataGrail uses role-based access control to provide flexible user management.
- DataGrail recommends following the Principle of Least Privilege (PoLP).
- Only requests submitted through the Privacy Request Center require verification
  by default.
- Requests submitted through email, phone, and API are automatically considered verified.
- Direct Contact Emails are sent weekly on Mondays to the Direct Contact Email configured
  for the integration.
- The sender identity associated with the transactional mailer email address must
  show a verified status before proceeding with the remaining DataGrail setup.
- Ensure your SES account is not in sandbox mode.
- DataGrail requires a verified Sender Identity for transactional mailer connections.
- Ensure required permissions are granted on API keys/resources used.
- Ensure the External ID is valid
- The External ID must be a 32+ character string that contains only alphanumeric characters,
  underscores, plus signs, equal signs, commas, periods, 'at' signs, colons, forward
  slashes, and hyphens.
- DataGrail can automatically translate and localize your Privacy Request Center experience
  in 20 different languages, ensuring that Data Subjects can confidently exercise
  their privacy rights.
- Asynchronous integrations will show a 'processing' status in DataGrail until the
  API returns a complete status during one of these hourly polls.
- Whole Record Deletion Integrations should not be used in 'data found' conditions
  in workflow automations.
- Automations allow for programmatic workflows for Privacy Requests.
- If your organization does not have a staging site, we recommend using Test Mode,
  which allows you to test updates silently on your production site without exposing
  them to users.
- In test mode, we will ignore GPC and DNT signals and will automatically enable our
  Script Control functionality, unless you already have a preference cookie set in
  your browser.
- DataGrail Consent simplifies compliance with cookie and tracking script opt-in/opt-out.
- Default Policies have been established by DataGrail on a best effort basis under
  the guidance of our legal counsel; however, you should consult your own in-house
  counsel to verify the behaviors within each policy align with your internal stance
  towards privacy and business objectives.
- Uses ScriptControl to manage inline scripts outside of Google Tag Manager.
- Required by GDPR, CPRA, and other current and future laws, legislation, and auditors.
- Automatically captures risks from Assessments
- Assessments can be created, reviewed, and approved through the Risk Assessments
  tab.
- 'Requests submitted through API, Toll-Free Number, and Email Forwarding will automatically
  enter the Active: Wizard state.'
- 'Requests created from the Intake Form will enter the Active: Pending Verification
  state immediately after creation.'
- 'If the verification is not completed within 7 days, the request will automatically
  move to Closed: Unverified.'
- Only supports Access and Deletion privacy request types.
- Forwarded emails must be authenticated with SPF.
- Default identifiers include Email and Phone Number.
- Extracted identifiers can be sourced from integrations or manually entered.
- The Data Subject has 7 days to verify their identity.
- 'Requests in the Closed: Unverified unverified state cannot be reopened.'
- Integrations actively used as a Transactional Mailer, Cloud Storage Solution, or
  Smart Verification System of Record cannot be removed from within the app.
- All requests to Internal Systems endpoints must include an Authorization header
  with Bearer authentication.
- The Request Manager Agent is distributed as a Docker image, enabling deployment
  in virtually any containerized environment.
- Network ingress to the Agent is secured with OAuth, TLS, and well-defined traffic
  rules.
- The Request Manager Agent uses a credentials manager to securely store sensitive
  information.
- Automate the fulfillment of data subject access, deletion, opt-out, and identifier
  retrieval requests using a command line argument on a remote server.
- Results should be reported via stdout as an array of objects.
- If your DataGrail account is already processing Data Subject Requests, new agent
  connections may be automatically processed with all new requests.
- After the restart, confirm that the agent service is healthy, and the logs contain
  no errors.
- As of Request Manager Agent v0.9.0, the container port has changed to 8080.
- The Agent service does not support internal TLS termination, so configuring a load
  balancer or another form of SSL termination is required.
- The Request Manager Agent Docker image is hosted in DataGrail's private image registry.
errors:
- '400: Bad Request'
- '401: Unauthorized'
- '403: Forbidden'
- '429: Too Many Requests'
- '500: Internal Server Error'
- '401 Unauthorized: User not authorized to perform action'
- '404 Not Found: Invalid request'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'SERVER_UNAVAILABLE: Handle retries accordingly'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency.'
- Resolved an issue preventing the rate limit for the Marketo Integration from being
  honored in some cases.
- '400 Bad Request: Check the request format and parameters.'
- '401 Unauthorized: Verify token validity.'
- '404 Not Found: Ensure the endpoint is correct.'
- '429 Too Many Requests: Reduce frequency of API calls.'
- '401 Unauthorized: Check token validity and permissions.'
- Ensure Required Permissions Are Granted on API Keys/Resources
- Review Required Account Types and User Roles
- '400 Bad Request: Verify request format and required fields.'
- '401 Unauthorized: Check authentication credentials.'
- 'HTTP 429 Too Many Requests: Requests have been throttled due to rate limits.'
- '401 Unauthorized: Invalid request signature'
- '400 Bad Request: Invalid request type'
- 'HTTP 429 Too Many Requests: Throttle API calls or reduce frequency'
- 'Unauthorized: Check client ID and secret'
- 'Forbidden: Check user roles and permissions'
- '404: Not Found'
- 'HTTP 429 Too Many Requests: Requests have been throttled, wait and retry.'
- '401 Unauthorized: The original System Admin credentials provided to DataGrail are
  now invalid.'
- '403: Unable to process request because DataGrail does not have required permissions.'
- '429: DataGrail has exceeded the API call limit.'
- '5xx: Integration API server is not ready to handle the request.'
- '404: Integration API server cannot find the requested resource.'
- '408: Processing has been interrupted due to request timeout.'
- '400, 422: Integration API server cannot process the request due to a request error.'
- 401 Unauthorized
- 404 Not Found
- '201: Privacy Request created'
- '422: Missing or invalid parameters'
- '400: Bad Request - Request was submitted with invalid formatting or parameters.'
- '401: Unauthorized - An invalid authentication signature was provided.'
- '403: Forbidden - An authorization signature was provided without permission to
  access a resource.'
- 'Rate Limiting: 3 requests / sec'
- '404 Not Found: Check the endpoint URL or resource identifier.'
- '401 Unauthorized: Verify credentials and scopes.'
- '400 Bad Request: Check your request parameters.'
- '401 Unauthorized: Verify your API key or credentials.'
- '401 Unauthorized: An invalid authentication signature was provided, or the authentication
  signature was missing.'
- '400 Bad Request: Check response to identify the failed connector.'
- 'Docker Pull Error: No Matching Manifest'
auth_info:
  mentioned_objects:
  - OAuth 2.0 Client Credentials Grant
  - access_token
  - OauthToken
  - AuthProvider
  - NamedCredential
  - OAuthToken
  - oauth
  - crm.objects.contacts.read
  - OAuth 2.0
  - Application Registry
client:
  base_url: https://www.datagrail.io
  auth:
    type: oauth2
    flow: refresh_token
source_metadata: null
