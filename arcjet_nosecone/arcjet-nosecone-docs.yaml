resources:
- name: AI quota control
  endpoint:
    path: /blueprints/ai-quota-control
    method: POST
    data_selector: decision.conclusion
    params:
      userId: totoro
- name: custom_rule
  endpoint:
    path: /custom/rule
    method: POST
    data_selector: rules
    params: {}
- name: send_feedback
  endpoint:
    path: /api/send-feedback
    method: POST
    data_selector: response
    params: {}
- name: process_payment
  endpoint:
    path: /api/process-payment
    method: POST
    data_selector: success
    params: {}
- name: IP reputation
  endpoint:
    path: /blueprints/vpn-proxy-detection
    method: GET
    data_selector: ip
    params: {}
- name: bot_protection
  endpoint:
    path: /bot-protection
    method: GET
- name: bot_protection
  endpoint:
    path: /api/arcjet
    method: POST
- name: arcjet
  endpoint:
    path: /api/arcjet/route
    method: POST
    data_selector: results
- name: fixed_window
  endpoint:
    path: /api/hello
    method: POST
    data_selector: rules
    params:
      mode: LIVE
      window: 60s
      max: 100
- name: sliding_window
  endpoint:
    path: /api/hello
    method: POST
    data_selector: rules
    params:
      mode: LIVE
      interval: 60
      max: 100
- name: token_bucket
  endpoint:
    path: /api/hello
    method: POST
    data_selector: rules
    params:
      mode: LIVE
      refillRate: 10
      interval: 60
      capacity: 100
- name: rate_limit_configuration
  endpoint:
    path: /rate-limiting/configuration
    method: GET
    data_selector: configuration
    params: {}
- name: fixed_window_rate_limit_options
  endpoint:
    path: /rate-limiting/fixed-window
    method: GET
    data_selector: options
    params: {}
- name: sliding_window_rate_limit_options
  endpoint:
    path: /rate-limiting/sliding-window
    method: GET
    data_selector: options
    params: {}
- name: token_bucket_rate_limit_options
  endpoint:
    path: /rate-limiting/token-bucket
    method: GET
    data_selector: options
    params: {}
- name: rate_limit
  endpoint:
    path: /api/hello
    method: GET
- name: email_validation
  endpoint:
    path: /app/api/arcjet/route
    method: POST
    data_selector: decision
    params: {}
- name: email_validation
  endpoint:
    path: /email-validation
    method: GET
    data_selector: validation_results
- name: email_verification
  endpoint:
    path: /email-verification
    method: POST
    data_selector: verification_results
- name: email_validation
  endpoint:
    path: /email-validation
    method: POST
    data_selector: result
    params: {}
- name: signup_form
  endpoint:
    path: /api/form
    method: POST
    data_selector: decision
    params: {}
- name: protectSignup
  endpoint:
    path: /protect/signup
    method: POST
- name: sensitive_info_detection
  endpoint:
    path: /app/api/arcjet/route
    method: POST
    data_selector: decision
    params: {}
- name: sensitive_information_detection
  endpoint:
    path: /sensitive-info/detect
    method: POST
    data_selector: result
    params: {}
- name: sensitiveInfo
  endpoint:
    path: /app/api/arcjet/route.ts
    method: POST
    data_selector: results
    params: {}
- name: filters
  endpoint:
    path: /filters
    method: POST
    data_selector: filters
- name: arcjet_integration
  endpoint:
    path: /arcjet/integration
    method: GET
    data_selector: records
    params: {}
- name: protect
  endpoint:
    path: /protect
    method: POST
    data_selector: decision
    params: {}
- name: arcjet
  endpoint:
    path: /arcjet
    method: POST
    data_selector: results
- name: protect
  endpoint:
    path: /protect
    method: POST
    data_selector: decision
- name: ip_analysis
  endpoint:
    path: /ip-analysis
    method: GET
    data_selector: data
- name: error_handling
  endpoint:
    path: /error-handling
    method: GET
    data_selector: data
- name: ArcjetModule
  endpoint:
    path: /api/arcjet-module
    method: POST
    data_selector: results
- name: ArcjetDecision
  endpoint:
    path: /arcjet/decision
    method: GET
    data_selector: results
- name: ArcjetReason
  endpoint:
    path: /arcjet/reason
    method: GET
    data_selector: reason
- name: arcjet
  endpoint:
    path: /arcjet
    method: POST
- name: arcjet
  endpoint:
    path: /api/route/hello
    method: POST
    data_selector: decision
    params: {}
- name: decision
  endpoint:
    path: /api/route/hello
    method: POST
    data_selector: results
- name: arcjet
  endpoint:
    path: /api/arcjet
    method: GET
- name: arcjet
  endpoint:
    path: /arcjet
    method: GET
    data_selector: results
- name: arcjet
  endpoint:
    path: /arcjet
    method: GET
    data_selector: response
    params: {}
- name: arcjet
  endpoint:
    path: /api/arcjet
    method: POST
    data_selector: results
- name: protect
  endpoint:
    path: /protect
    method: POST
    data_selector: decision
- name: arcjet
  endpoint:
    path: /
    method: GET
    data_selector: data
    params: {}
- name: ip_analysis
  endpoint:
    path: /ip-analysis
    method: GET
- name: fingerprint
  endpoint:
    path: /api/fingerprint
    method: POST
    data_selector: data
    params: {}
- name: bot_detection_rule
  endpoint:
    path: /detectBot
    method: POST
    data_selector: results
    params:
      mode: LIVE
      allow: []
- name: fixed_window_rule
  endpoint:
    path: /fixedWindow
    method: POST
    data_selector: results
    params:
      mode: LIVE
      window: 60s
      max: 100
- name: AWS
  endpoint:
    path: /regions/aws
    method: GET
    data_selector: regions
    params: {}
- name: Fly.io
  endpoint:
    path: /regions/flyio
    method: GET
    data_selector: regions
    params: {}
- name: Render
  endpoint:
    path: /regions/render
    method: GET
    data_selector: regions
    params: {}
- name: Vercel
  endpoint:
    path: /regions/vercel
    method: GET
    data_selector: regions
    params: {}
- name: security_headers
  endpoint:
    path: /nosecone/reference
    method: GET
    data_selector: headers
- name: ip
  endpoint:
    path: /api/ip
    method: GET
    data_selector: ip
    params: {}
- name: redaction_options
  endpoint:
    path: /redact
    method: POST
    data_selector: redacted_text
- name: auth_route_handler
  endpoint:
    path: /app/api/auth/[...nextauth]/route.ts
    method: POST
    data_selector: decision
    params:
      max: 10
      interval: 60
- name: rate_limit
  endpoint:
    path: /api/private
    method: GET
    data_selector: data
    params: {}
- name: chat_model
  endpoint:
    path: /path/to/chat_model
    method: POST
    data_selector: data
    params: {}
- name: llm
  endpoint:
    path: /path/to/llm
    method: POST
    data_selector: data
    params: {}
notes:
- Arcjet utilities are independent libraries that do not require the use of the main
  Arcjet SDK.
- 'In production environments, we recommend setting upgradeInsecureRequests: true
  to ensure all requests are served with HTTPS.'
- 'Defaults will produce the following header: Strict-Transport-Security: max-age=31536000;
  includeSubDomains'
- 'Defaults will produce the following header: X-Content-Type-Options: nosniff'
- 'Defaults will produce the following header: X-DNS-Prefetch-Control: off'
- 'Defaults will produce the following header: X-Download-Options: noopen'
- 'Defaults will produce the following header: X-Frame-Options: SAMEORIGIN'
- 'Defaults will produce the following header: X-Permitted-Cross-Domain-Policies:
  none'
- 'Defaults will produce the following header: X-XSS-Protection: 0'
- CommonJS is not supported. Arcjet is ESM only.
- Uses Token bucket rate limit configured to match category quota
- Mode can be 'LIVE' to block requests or 'DRY_RUN' to log only
- IP geolocation can be notoriously inaccurate, especially for mobile devices, satellite
  internet providers, and even just normal users.
- Country is usually accurate, but there are often cases where IP addresses are mis-located.
- The Arcjet SDK can be augmented with custom rules written by users.
- Arcjet can help you protect your feedback forms from spam and invalid contact details.
- Bots change, so it is good to check and update your rules once in a while.
- Arcjet can help you protect your payment form from fraudulent credit card transactions.
- The goal is to block high risk transactions before they are submitted to your credit
  card processor.
- When testing your rules, you can use DRY_RUN mode to see how your rules would behave
  without actually enforcing them.
- You can also write a simple sampling function to set the Arcjet rules based on a
  desired sample rate.
- Arcjet handles all the infrastructure for you so you don't need to worry about deploying
  global Redis clusters, designing data structures to track rate limits, or keeping
  security detection rules up to date.
- Arcjet SDK tries to do as much as possible asynchronously and locally to minimize
  latency for each request.
- Arcjet allows you to configure bot protection so you can decide which bots are allowed.
- Requests without User-Agent headers cannot be identified as any particular bot and
  are marked as an errored result.
- Requests without User-Agent headers might not be identified as any particular bot
  and could be marked as an errored result. Our recommendation is to block requests
  without User-Agent headers because most legitimate clients send this header.
- Bot detection functionality depends on your pricing plan
- Paid Arcjet accounts include additional verification checks using IP data
- Arcjet runs the same in any environment, including locally and in CI.
- Arcjet handles all the infrastructure for you so you don't need to worry about deploying
  global Redis clusters.
- If a call to the Cloud API is needed and there is a network problem or Arcjet is
  unavailable, the default behavior is to fail open and allow the request.
- Arcjet rate limiting allows you to define rules which limit the number of requests
  a client can make over a period of time.
- Each Arcjet rate limit rule has its own configuration depending on the algorithm
  used.
- Arcjet rate limiting is available on all pricing plans
- Arcjet can be used inside Next.js middleware, API routes, pages, server components,
  and server actions.
- Uses Arcjet for rate limiting on Next.js routes
- The rate limit is set to 60 requests per hour
- Uses DRY_RUN mode to log only. Use 'LIVE' to block.
- Arcjet Shield WAF protects against common attacks including the OWASP Top 10.
- Arcjet Shield WAF requires no additional resources from your application.
- Arcjet Shield WAF protects your application against common attacks, including the
  OWASP Top 10.
- Arcjet allows you to validate & verify an email address.
- The email prop is required when a validateEmail rule is configured.
- Validation options can usually be left as the defaults.
- Arcjet signup form protection combines rate limiting, bot protection, and email
  validation to protect your signup forms from abuse.
- If Arcjet is unavailable, the default behavior is to fail open and allow the request.
- Sensitive information detection is not supported in server actions because Next.js
  does not provide access to the request body.
- No data is sent to the cloud; all processing is done locally.
- Sensitive information detection is configured by allowing or denying a subset of
  sensitive information.
- Arcjet is designed to fail open so that a service issue or misconfiguration does
  not block all requests.
- Arcjet protection runs on HTTP requests.
- Where a decision has been cached locally e.g. blocking a client, Arcjet will continue
  to function even if the service is unavailable.
- When specifying multiple rules, the order of the rules is ignored. Rule execution
  ordering is automatically optimized for performance.
- The SDK will also time out and fail open after 500ms when NODE_ENV is production
  and 1000ms otherwise.
- In most cases, the response time will be less than 20-30ms.
- Requires setup of API key in the environment variable ARCJET_KEY.
- Ensure the load balancer sets X-Forwarded-For header correctly.
- Arcjet protects dynamic Astro pages, not static pages
- Some server Adapters, such as Vercel, only run middleware at build time for Static
  routes
- Get your site key from https://app.arcjet.com
- Arcjet requires the ARCJET_KEY for authentication.
- Ensure to handle the X-Forwarded-For header correctly.
- Arcjet is designed to fail open to avoid blocking requests during service issues.
- Uses ARCJET_KEY for API key
- Uses API key for authentication
- Supports ESM only, CommonJS is not supported
- The SDK will also time out and fail open after 1000ms when NODE_ENV or ARCJET_ENV
  is development and 500ms otherwise.
- Get your site key from https://app.arcjet.com and set it as an environment variable
  rather than hard coding.
- Use 'DRY_RUN' to log only
- Uses API key for authentication — requires setup in the Arcjet account.
- Uses API key for authentication — requires setup in Arcjet Dashboard
- IP geolocation can be notoriously inaccurate.
- In development environments (NODE_ENV === "development" or ARCJET_ENV === "development"),
  we allow private/internal addresses
- You must set your Arcjet site key as an environment variable called ARCJET_KEY.
- Get your site key from the Arcjet dashboard and set it as an environment variable
  called ARCJET_KEY in your .env file.
- Uses an API key for authentication — retrieve it from the Arcjet Dashboard
- Uses environment variables for configuration.
- Arcjet is designed to fail open
- Allows private/internal addresses in development environments
- block is now deny for validateEmail rules
- ArcjetEnum objects are now deprecated
- Handling of url-encoded data in sensitive info detection
- Wasm loading has moved to @arcjet/analyze-wasm
- add and remove replaced with allow and deny in detectBot rule
- When using the Arcjet SDK you may see a warning in your editor about a type mismatch.
- Calling `protect()` with no rules is deprecated.
- The current file is a CommonJS module whose imports will produce 'require' calls.
- This error usually means that you are trying to use the base `arcjet` package rather
  than an adapter.
- You may see an error if you try to access the request body after it has already
  been read by something else.
- If you see an error about reading properties of undefined, you are probably running
  an older version of Next.js.
- You may see an error if you are using an old version of Deno.
- Client IP address is a key part of the fingerprint.
- Different configurations can be used for each supported rule and globally on the
  SDK root instance.
- Rate limits are currently enforced per region.
- If code runs in multiple locations then the rate limits will be enforced separately.
- Network based security products block traffic before it hits your application.
- Arcjet is designed to integrate into your application and understand more about
  the request context.
- Shield analysis is currently based on the request headers and query parameters.
- Nosecone applies headers to all your routes via middleware in your Next.js application.
- We recommend you test your application thoroughly and tweak the settings to ensure
  it continues to work as expected.
- Spoofed bot detection is not available on Free plans.
- Verified bot detection is not available on Free plans.
- The public IP of a Request is difficult to discern, but some platforms provide specific
  mechanisms for accessing it.
- Arcjet can protect your Auth.js route handlers from brute force attacks and other
  abuse.
- You could also protect the GET handler, but these tend to be less sensitive.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Arcjet provides rate limiting based on user authentication with Clerk.
- Arcjet helps developers protect their apps in just a few lines of code.
- Arcjet can protect NextAuth login and signup routes from brute force attacks and
  other abuse.
- Use the Auth.js authenticated user ID to implement user-specific rate limits.
- Arcjet rate limits allow custom fingerprint characteristics to identify the client
  and apply the limit.
- Define a rate limit of 2,000 tokens per hour with a maximum of 5,000 tokens in the
  bucket.
- Data is retained for 30 days to provide historical analysis.
- Aggregated data is retained for longer to give you insights into your application’s
  traffic patterns.
- Arcjet manages tracking client state for rate limiting with no additional infrastructure
  required.
errors:
- '403 Forbidden: Blocked by Arcjet rules'
- Quota exceeded
- 403 Forbidden
- '403 Forbidden: Forbidden'
- '429 Too Many Requests: Please try again in a few minutes'
- '400 Bad Request: Invalid email address'
- '500 Internal Server Error: Internal server error'
- '403 Forbidden: Request denied'
- '429 Please try again in a few minutes: Rate limit exceeded'
- '400 Invalid email address: Invalid email'
- '403 Forbidden: You are a bot!'
- '403 Forbidden: You are pretending to be a good bot!'
- '400 Bad request: User-Agent header is missing'
- 'Too Many Requests: Rate limit exceeded'
- 'Too Many Requests: The request limit has been exceeded'
- '429 Too Many Requests: Rate limit exceeded'
- 'MissingTopLevelDomain: The email address didn’t contain at least 2 domain segments'
- 'InvalidDomainLiteral: Domain literals are not supported'
- 'MissingSeparator: The @ character was missing between the local part and domain'
- 'InvalidCharacter: The email address contained an invalid character'
- 'LocalPartEmpty: The local part of the email address must contain at least 1 character'
- 'LocalPartTooLong: The local part has a max-length of 64 characters'
- 'DomainEmpty: The domain of the email address must contain at least 1 character'
- 'DomainTooLong: The domain has a max-length of 254 characters'
- 'SubDomainEmpty: One or more domain segments are empty'
- 'SubDomainTooLong: One or more domain segments are longer than 63 characters'
- 'ERROR: Service issue or misconfiguration may block requests.'
- '400 Bad Request: Invalid email'
- '403 Forbidden: Access denied'
- Invalid email
- Forbidden
- Bad request
- '400: Bad request - sensitive information detected'
- '403 Forbidden: Unexpected sensitive info received'
- '503 Service unavailable: Service issue or misconfiguration'
- '403 Forbidden: Check if the user-agent is set correctly'
- DDoS protection is handled at the application level by Arcjet
- If there is an error condition when processing the rule, Arcjet will return an ERROR
  result for that rule.
- If all other rules that were run returned an ALLOW result, then the final Arcjet
  conclusion will be ERROR.
- 'API_KEY_INVALID: Check if ARCJET_KEY is set correctly.'
- 'RATE_LIMIT_EXCEEDED: Throttle API calls.'
- '403 Forbidden: Access Denied'
- 'Rate limit exceeded: Reduce the frequency of requests.'
- 'Request timeout: Check server response time.'
- Cannot find `ARCJET_KEY` environment variable
- 'Arcjet error: {reason.message}'
- 'FORBIDDEN: No bots allowed'
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '403 Forbidden: The request was denied'
- '403 Forbidden: Check your API key and permissions.'
- Too Many Requests
- '401 Unauthorized: Recheck API key validity'
- '403 Forbidden: Access denied based on rules.'
- '400 Bad request: User-Agent header is missing.'
- 'INVALID_API_KEY: Check your ARCJET_KEY environment variable.'
- '403 Forbidden: The request is denied.'
- '429 Too Many Requests: Rate limit exceeded.'
- '401 Unauthorized: Check API key validity'
- '403 Forbidden: Ensure proper permissions are granted'
- '400 Bad request: Requests without User-Agent headers might not be identified as
  any particular bot.'
- '403 Forbidden: The request is forbidden.'
- 429 Rate limited
- '[unauthenticated] invalid key'
- '[deadline_exceeded] the operation timed out'
- Arcjet will use 127.0.0.1 when missing public IP address in development mode
- 'generateFingerprint: ip is empty / [failed_precondition] client IP not provided'
- '[failed_precondition] request details failed validation'
- 'INVALID_REQUEST: Check the request parameters and format.'
- 'UNAUTHORIZED: Verify the API key and permissions.'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- '401 Unauthorized: Unauthorized access'
- '429 Too Many Requests: Too Many Requests'
auth_info:
  mentioned_objects:
  - ARCJET_KEY
  - ARCJET_BASE_URL
  - ARCJET_LOG_LEVEL
  - ARCJET_ENV
  - ArcjetDecision
  - NextAuth
  - GitHub
client:
  base_url: https://decide.arcjet.com
  auth:
    type: apikey
    location: header
    header_name: ARCJET_KEY
  headers:
    Accept: application/json
source_metadata: null
