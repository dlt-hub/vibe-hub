resources:
- name: unity_builder
  endpoint:
    path: /unity-builder
    method: POST
    data_selector: result
- name: unity_test_runner
  endpoint:
    path: /unity-test-runner
    method: POST
    data_selector: result
- name: build
  endpoint:
    path: /build
    method: POST
    data_selector: results
    params: {}
- name: test
  endpoint:
    path: /test
    method: POST
    data_selector: results
    params: {}
- name: test_project
  endpoint:
    path: /jobs/test
    method: POST
    data_selector: results
- name: build_project
  endpoint:
    path: /jobs/build
    method: POST
    data_selector: results
- name: checkout
  endpoint:
    path: /actions/checkout
    method: GET
    data_selector: records
- name: cache
  endpoint:
    path: /actions/cache
    method: GET
    data_selector: records
- name: test_runner
  endpoint:
    path: /actions/unity-test-runner
    method: GET
    data_selector: records
- name: builder
  endpoint:
    path: /actions/unity-builder
    method: GET
    data_selector: records
- name: upload_artifact
  endpoint:
    path: /actions/upload-artifact
    method: GET
    data_selector: records
- name: unity3d-gitlab-ci-example
  endpoint:
    path: /unity3d-gitlab-ci-example
    method: GET
    data_selector: records
    params: {}
- name: build
  endpoint:
    path: /build
    method: POST
    data_selector: buildData
    params: {}
- name: test
  endpoint:
    path: /test
    method: POST
    data_selector: testData
    params: {}
- name: cli-build
  endpoint:
    path: /cli-build
    method: GET
- name: list-resources
  endpoint:
    path: /list-resources
    method: GET
- name: list-workflow
  endpoint:
    path: /list-workflow
    method: GET
- name: watch
  endpoint:
    path: /watch
    method: GET
- name: garbage-collect
  endpoint:
    path: /garbage-collect
    method: POST
- name: unity_credentials
  endpoint:
    params:
      populateOverride: 'true'
      readInputFromOverrideList: UNITY_EMAIL,UNITY_SERIAL,UNITY_PASSWORD
      readInputOverrideCommand: gcloud secrets versions access 1 --secret="{0}"
- name: custom_steps
  endpoint:
    path: /docs/3/github-cloud-runner/advanced-topics/custom-hooks/container-hooks
    method: GET
    data_selector: steps
    params: {}
- name: deployToSteam
  endpoint:
    path: /github/deployment/steam
    method: POST
- name: garbage_collection
  endpoint:
    path: /api/garbage-collection
    method: POST
    data_selector: result
    params: {}
- name: customJob
  endpoint:
    path: /custom/job
    method: POST
    data_selector: jobData
- name: upload
  endpoint:
    path: /upload
    method: POST
    data_selector: commands
    params: {}
- name: Unity Activation
  endpoint:
    path: /license/unity3d.com/manual
    method: GET
    data_selector: activation_issues
    params: {}
- name: Docker Image Availability
  endpoint:
    path: /docs/docker/versions
    method: GET
    data_selector: docker_images
    params: {}
- name: unity_test_runner
  endpoint:
    path: https://github.com/marketplace/actions/unity-test-runner
    method: GET
    data_selector: records
    params: {}
- name: unity_builder
  endpoint:
    path: https://github.com/marketplace/actions/unity-builder
    method: GET
    data_selector: records
    params: {}
- name: buildForLinuxBasedPlatforms
  endpoint:
    path: /actions/buildForLinuxBasedPlatforms
    method: POST
- name: buildForWindowsBasedPlatforms
  endpoint:
    path: /actions/buildForWindowsBasedPlatforms
    method: POST
- name: buildForMacOSBasedPlatforms
  endpoint:
    path: /actions/buildForMacOSBasedPlatforms
    method: POST
- name: buildForLinuxBasedPlatforms
  endpoint:
    path: /actions/build/linux
    method: POST
    data_selector: outputs
    params: {}
- name: buildForWindowsBasedPlatforms
  endpoint:
    path: /actions/build/windows
    method: POST
    data_selector: outputs
    params: {}
- name: buildForMacOSBasedPlatforms
  endpoint:
    path: /actions/build/macos
    method: POST
    data_selector: outputs
    params: {}
- name: unity_builder
  endpoint:
    path: /unity-builder
    method: POST
    data_selector: result
- name: unity_test_runner
  endpoint:
    path: /unity-test-runner
    method: POST
    data_selector: result
- name: build
  endpoint:
    path: /actions/upload-artifact@v4
    method: POST
    data_selector: build
    params: {}
- name: test
  endpoint:
    path: /game-ci/unity-test-runner@v3
    method: POST
    data_selector: test
    params: {}
- name: test_project
  endpoint:
    path: /
    method: GET
    data_selector: Library
    params: {}
- name: unity-test-runner
  endpoint:
    path: /github/test-runner
    method: GET
- name: test_package
  endpoint:
    path: /test-package
    method: GET
    data_selector: artifacts
    params: {}
- name: unity-builder
  endpoint:
    path: /github/actions/unity-builder
    method: POST
- name: build_project
  endpoint:
    path: /build/project
    method: POST
- name: Return License
  endpoint:
    path: /unity-return-license
    method: POST
    data_selector: license
    params: {}
- name: garbage_collection
  endpoint:
    path: /garbage-collection
    method: POST
    data_selector: results
    params:
      mode: garbage-collect
notes:
- Unity Actions are using game-ci/docker since unity-builder version 2.
- Tests are currently only compatible on Linux hosts.
- The Orb is a work in progress. It doesn't have feature parity with our GitHub Builder
  Action yet.
- Cloud Runner is in active development
- 'Cloud Runner overall release status: preview'
- You must have a Kubernetes cluster setup and ready that supports persistent volumes.
- Create a kubeconfig and encode it as base64.
- Cloud Runner is in 'active development'
- Some APIs may change, features are still being added but the minimum feature set
  works and is stable
- populateOverride - Must be true to run the commands.
- readInputFromOverrideList - Comma separated list of parameters to read from override
  command.
- readInputOverrideCommand - A command line command to run (The command is formatted
  to replace "{0}" with the parameter parameter name).
- Must provide valid unity credentials when running any unity workload.
- Common to use command line mode with input override.
- You can avoid specifying long command line input for credentials by using environment
  variables or the input override feature to shorten commands significantly.
- You must have an AWS account setup and ready to create resources.
- Create a service account and generate an AWS access key and key id.
- Unity no longer supports manual activation of Personal licenses
- 'Known issue with Unity activation on gitlab-ci: empty license file'
- Branch is dirty. Refusing to base semantic version on uncommitted changes
- This usually happens with GitHub actions when using unity-builder. A dirty branch
  means that you have uncommitted changes in your project.
- Some objects like Contact may return nulls in deeply nested fields
- The GitHub-hosted runners often do not have enough disk space for game dev projects.
- To work around this limitation, you could try to use the Free Disk Space (Ubuntu)
  action at the start of your workflow.
- GitHub Actions for Unity provide the fastest way to automatically test and build
  any Unity project.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- GameCI does not acquire nor store your Unity email or password. They are required
  for reactivating the license during build and test steps.
- The test runner can only test packages on Linux runners - Windows runners are currently
  not supported
- If using the customImage parameter to use a custom Docker image to test the package,
  that image must have jq installed
- Some version must be included for package testing
- Issues have been observed when using a UNITY_PASSWORD with special characters. It
  is recommended to use a password without any special characters (mixed-case alphanumeric
  characters only).
errors:
- 'REQUEST_LIMIT_EXCEEDED: Throttle API calls or reduce frequency'
- 'QUERY_TIMEOUT: Break down filters or add selectivity'
- '401 Unauthorized: Recheck OAuth scopes or token expiration'
- 'Non-whitespace before first tag. Line: 0 Column: 1 Char: 㼼'
- 'Error: Code 400 while processing request (status: Cannot save ULF license file:
  Validation failed. The digital signature is invalid.)'
- 'Branch is dirty: Refusing to base semantic version on uncommitted changes'
- 'Error: 3.690 [ERROR] [org.gradle.launcher.daemon.server.DaemonStateCoordinator]
  Command execution: started DaemonCommandExecution[command = Build{id=69dbd5b3-10f2-488e-8640-977da68733f9,
  currentDir=/github/workspace/Temp/gradleOut/launcher}, connection = DefaultDaemonConnection:
  socket connection from /127.0.0.1:33657 to /127.0.0.1:43866] after 0.0 minutes of
  idle'
- 'docker: failed to register layer: ApplyLayer exit status 1 stdout:  stderr: write
  /opt/unity/Editor/Data/PlaybackEngines/AndroidPlayer/NDK/toolchains/llvm/prebuilt/linux-x86_64/lib64/clang/9.0.8/lib/linux/x86_64/libFuzzer.a:
  no space left on device.'
- 'Error: Failed to find a suitable OpenCL device for the GPU Lightmapper. Please
  change your lightmapper or install the latest graphics driver.'
- 'Invalid license: Check Unity license configuration'
- 'Build failed: Investigate build logs for errors'
- '401 Unauthorized: Recheck API keys or token expiration'
- The action will fail if the directory of the package being tested is the same as
  the root directory of the repository
- Excluding unityVersion or passing a unityVersion configuration of auto when testing
  a Unity package will cause the test runner to fail
auth_info:
  mentioned_objects:
  - UNITY_LICENSE
  - UNITY_EMAIL
  - UNITY_PASSWORD
  - GITHUB_TOKEN
  - STEAM_USERNAME
  - STEAM_CONFIG_VDF
  - STEAM_APP_ID
  - secrets.UNITY_LICENSE
  - secrets.UNITY_EMAIL
  - secrets.UNITY_PASSWORD
  - secrets.GITHUB_TOKEN
  - UNITY_SERIAL
client:
  base_url: https://api.game-ci.com
  auth:
    type: oauth2
source_metadata: null
