resources:
- name: random_dog_image
  endpoint:
    path: /api/breeds/image/random
    method: GET
    data_selector: response
    params: {}
- name: random_dog_image
  endpoint:
    path: /api/breeds/image/random
    method: GET
    data_selector: response
- name: JSON Request
  endpoint:
    path: /create-simulations/building-a-json-response/using-a-json-object-from-the-request
    method: GET
    data_selector: Request.Body
    params: {}
- name: webhook_simulation
  endpoint:
    path: /webhooks/stripe
    method: POST
- name: pets
  endpoint:
    path: /pets
    method: GET
    data_selector: data
    params: {}
- name: pets
  endpoint:
    path: /csv/pets
    method: GET
    data_selector: rows
- name: csv_data_source
  endpoint:
    path: /create-simulations
    method: POST
    data_selector: data_sources
    params: {}
- name: pets
  endpoint:
    path: /create-simulations/using-data-sources-in-simulations
    method: UPDATE
    data_selector: data
    params: {}
- name: pets
  endpoint:
    path: /data/pets
    method: GET
    data_selector: records
- name: pets
  endpoint:
    path: /create-simulations/using-data-sources-in-simulations/deleting-data-from-data-sources
    method: DELETE
    data_selector: records
    params: {}
- name: pets
  endpoint:
    path: /data-source-name
    method: GET
    data_selector: records
    params: {}
- name: pets
  endpoint:
    path: /create-simulations/using-data-sources-in-simulations/inserting-data-into-a-data-source
    method: POST
    data_selector: data
    params: {}
- name: pets
  endpoint:
    path: /create-simulations/using-data-sources-in-simulations/updating-data-in-data-sources
    method: POST
    data_selector: data
    params: {}
- name: pets
  endpoint:
    path: /create-simulations/using-data-sources-in-simulations/inserting-data-into-a-data-source
    method: POST
    data_selector: rows
    params: {}
- name: simulation
  endpoint:
    path: /create-simulations
    method: POST
    data_selector: simulation
    params: {}
- name: service
  endpoint:
    path: /work-with-services
    method: GET
    data_selector: services
    params: {}
- name: simulation_files
  endpoint:
    path: /create-simulations/working-with-simulation-files
    method: GET
    data_selector: simulation_files
- name: service
  endpoint:
    path: /service
    method: POST
- name: service
  endpoint:
    path: /work-with-services/start-a-new-service
    method: POST
- name: proxying
  endpoint:
    path: /work-with-services/enable-proxying
    method: POST
- name: behaviors
  endpoint:
    path: /work-with-services/add-behaviors
    method: POST
- name: product
  endpoint:
    path: /product/[^/]+
    method: GET
    data_selector: response
    params: {}
- name: products
  endpoint:
    path: /products
    method: GET
    data_selector: response
    params: {}
- name: pet
  endpoint:
    path: /v2/pet/{petId}
    method: GET
    data_selector: response
    params: {}
- name: findByStatus
  endpoint:
    path: /v2/pet/findByStatus
    method: GET
    data_selector: response
    params:
      status: somestatus
- name: user
  endpoint:
    path: /v2/user
    method: POST
    data_selector: response
    params: {}
- name: currencies
  endpoint:
    path: /api/currencies
    method: GET
    data_selector: exchangerates
    params:
      currency: '*'
- name: product
  endpoint:
    path: /product/[^/]+
    method: GET
    data_selector: response
    params: {}
- name: products
  endpoint:
    path: /products
    method: GET
    data_selector: response
    params: {}
- name: response-templating
  endpoint:
    path: /myapi
    method: GET
    data_selector: Body
    params: {}
- name: pet
  endpoint:
    path: /v2/pet/{petId}
    method: GET
    data_selector: response
- name: pet_findByStatus
  endpoint:
    path: /v2/pet/findByStatus
    method: GET
    data_selector: response
    params:
      status: someStatus
- name: user
  endpoint:
    path: /v2/user
    method: POST
    data_selector: response
- name: worldtimeapi
  endpoint:
    path: /api/timezone/Europe/London
    method: GET
    data_selector: null
    params: {}
- name: currencies
  endpoint:
    path: /api/currencies
    method: GET
    data_selector: exchangerates
    params:
      currency: USD
- name: service
  endpoint:
    path: /hoverfly-cloud/api/v1/users/<<user-name>>/hoverflies/product
    method: GET
    data_selector: name
    params: {}
- name: behavior
  endpoint:
    path: /hoverfly-cloud/api/v1/users/<<user-name>>/hoverflies/product/behavior
    method: PUT
    data_selector: behaviors
    params: {}
- name: response-templating
  endpoint:
    path: /myapi
    method: GET
    data_selector: response body
- name: worldtimeapi
  endpoint:
    path: /api/timezone/Europe/London
    method: GET
    data_selector: datetime
    params: {}
- name: product
  endpoint:
    path: /hoverfly-cloud/api/v1/users/<<user-name>>/hoverflies/product
    method: GET
    data_selector: records
- name: product_behavior
  endpoint:
    path: /hoverfly-cloud/api/v1/users/<<user-name>>/hoverflies/product/behavior
    method: PUT
    data_selector: records
notes:
- Hoverfly Cloud uses Kubernetes to run and manage multiple copies of Hoverfly
- CSV Data source support using SQL syntax is only available on the Enterprise plan.
- Simulating webhooks and callbacks is only available on the Enterprise plan.
- CSV key-value data in API responses is only available on the Enterprise plan.
- Simulating a persistent back-end is only available on the Enterprise plan.
- This is good for debugging, but when you are running the simulations in a live environment
  you might want to replace this with a more graceful response that won't break your
  consuming system.
- Up to 5 callbacks can be configured per simulation.
- Uses Handlebars templating for dynamic responses.
- You can use handlebars templating to modify the query parameters, the header values
  and the content of the body if you choose to make the callback dynamic.
- In order to enable templating you need to explicitly click the 'Enable templating'
  checkbox when crafting your response.
- The Go language uses a fixed reference time — Mon Jan 2 15:04:05 MST 2006 to define
  date/time layouts.
- When using template helper method `now`, time offset must be formatted using the
  specified syntax.
- The ability to loop over arrays of data can be very useful in constructing a response.
- If there are no items then the else block will execute.
- Uses OAuth2 with refresh token — requires setup of connected app in api
- Functions can be embedded into other functions.
- 'Supports two distinct mechanisms for simulating a persistent backend: Data sources
  and Journal templating.'
- This is only available to enterprise customers.
- 'Hoverfly supports two distinct mechanisms for simulating a persistent backend:
  Data sources and Journal templating.'
- This ability to look up in history is one of the ways Hoverfly supports the mocking
  of a persistent back-end service.
- Hoverfly Cloud supports CSV data sources for Enterprise customers to do key value
  data lookups and simulate persistence within simulations.
- You cannot edit the data sources on a simulation already running on a service. You
  need to add and remove data sources from the master copy of the simulation, and
  then start a service running a copy of that simulation.
- Data is modified for the duration that the service is running. When the service
  is restarted, the data will revert to what was in the original uploaded CSV.
- Data is added temporarily, reverting on restart.
- INSERT is not supported. To add data you must use the csvAddRow template function.
- Only simple conditions are supported.
- Joins across different data sources are not supported.
- Data is removed temporarily, reverting on restart.
- Services run instances of simulations.
- Simulations are JSON files that represent an API simulation configuration - it's
  endpoints and matching configuration.
- You can chain conditions using AND. OR is not supported.
- Capitalization of SQL keywords is required.
- Spaces between components of the SQL statement are required.
- Every value provided to a condition whether a number or a string must be enclosed
  in quotes.
- Data source names must not be in quotes.
- Proxying allows the service to forward requests to a remote destination.
- Hoverfly Cloud stores the configuration of its API simulations in JSON simulation
  files.
- One JSON file = One Hoverfly Simulation
- Services can be started using a simulation file from the library.
- Services can also be started without a simulation file.
- Requests require an API token (create one on the Account page).
- We would recommend you to export it as an environment variable.
- If you wish to keep the version running in the service separately from the version
  stored in the library you need to export it as a new simulation file.
- If you wish to overwrite the existing version in the library with any changes made
  to the version running in the service, you can synchronize the service's simulation
  with the library.
- This provides the useful illusion of a persistent back-end.
- Hoverfly Cloud does not currently provide built-in version control, but by following
  these naming practices, you can manage simulations like code simply and effectively.
- Simulations are stored in the Simulation Library from where they can be downloaded
  and because simulations are just JSON files, you can easily use a versioning tool
  like git to manage them outside the platform if required.
- The journal templating feature uses an in-memory history of the previous 1000 requests
  and corresponding responses processed by the API.
- The oldest requests are purged from memory once more than 1000 requests are processed.
- API token is stored in ~/.hcc/config.yaml for future use.
- API token required for authentication
- Starting a service creates a public available HTTP service that simulates an API.
- You can enable proxying when starting a new service.
- A Hoverfly Behavior is a function that intercepts and modifies the API response.
- API token is required for authentication
- 'The API works with the following values for currency: GBP,EUR,USD,JPY,CHF,CAD,AUD,NZD,RUB,ZAR,MXN,AED,
  if you try and pass in anything else you will get a response something like {"exchangerates":null,"timeofquote":"2023-07-05T10:39:07"}'
- Changes made to a copy of the simulation need to be explicitly synced back to the
  master if that is required.
- Uses templating to generate responses dynamically based on request parameters.
- 'Hoverfly has various modes: Capture, Simulate, Spy, and Passthrough.'
- Use the command line interface and the API to automate the creation and configuration
  of simulated APIs for use in your CI/CD pipelines.
- 'The API works with the following values for currency: GBP, EUR, USD, JPY, CHF,
  CAD, AUD, NZD, RUB, ZAR, MXN, AED.'
- Some objects like Contact may return nulls in deeply nested fields
- The API key can be retrieved from your Account page in Hoverfly Cloud.
- Hoverfly can re-use values from the Request path, query string, headers and body.
- Hoverfly's templating can perform simple equality checks to evaluate Request variables
  against strings.
- 'Hoverfly can use simple conditional statements (#if and #unless) to check for the
  presence of variables in the request.'
- 'Hoverfly has various modes: Capture, Simulate, Spy, Passthrough.'
- The API is extensive and covers all areas of functionality for Hoverfly Cloud.
errors:
- '502 Bad Gateway: Hoverfly cannot match'
- '400: Replace with a graceful response'
- '502 Bad Gateway: Hoverfly cannot match the request'
- '401 Unauthorized: Check API token or permissions'
- 'Matching error: The simulation only works if USD is passed in as a currency.'
- '404 Not Found: Indicates that the resource could not be found.'
- '404 Not Found: Check if the service is running or the endpoint is correct.'
auth_info:
  mentioned_objects: []
client:
  base_url: https://cloud.hoverfly.io
  auth:
    type: oauth2
    location: header
    header_name: Authorization
source_metadata: null
